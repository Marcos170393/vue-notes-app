import{shallowRef as uc,defineComponent as Mi,unref as Bt,shallowReactive as dc,reactive as wt,inject as kt,computed as Ge,h as Li,provide as Tn,ref as fe,watch as an,getCurrentInstance as dr,watchEffect as hc,nextTick as qn,createBlock as Jt,openBlock as oe,normalizeClass as Rt,withCtx as Gt,createElementVNode as U,toDisplayString as Et,createElementBlock as ae,Fragment as hr,renderList as Ri,effectScope as Ni,markRaw as It,toRaw as ko,hasInjectionContext as pc,isRef as Eo,isReactive as pr,toRef as Bn,getCurrentScope as fc,onScopeDispose as gc,toRefs as Ns,createCommentVNode as Kt,createVNode as Ce,Transition as Ds,resolveDynamicComponent as $s,withDirectives as Ot,withKeys as fr,vModelText as Pt,onMounted as Ve,onUnmounted as xt,createTextVNode as xo,onBeforeMount as js,withModifiers as Di,createStaticVNode as mc,createApp as vc}from"vue";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function bc(){return $i().__VUE_DEVTOOLS_GLOBAL_HOOK__}function $i(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const yc=typeof Proxy=="function",wc="devtools-plugin:setup",kc="plugin:settings:set";let Vt,Qn;function Ec(){var n;return Vt!==void 0||(typeof window<"u"&&window.performance?(Vt=!0,Qn=window.performance):typeof globalThis<"u"&&(!((n=globalThis.perf_hooks)===null||n===void 0)&&n.performance)?(Vt=!0,Qn=globalThis.perf_hooks.performance):Vt=!1),Vt}function xc(){return Ec()?Qn.now():Date.now()}class Sc{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const o={};if(e.settings)for(const i in e.settings){const a=e.settings[i];o[i]=a.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},o);try{const i=localStorage.getItem(r),a=JSON.parse(i);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(i){try{localStorage.setItem(r,JSON.stringify(i))}catch{}s=i},now(){return xc()}},t&&t.on(kc,(i,a)=>{i===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(i,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(i,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(h=>{this.targetQueue.push({method:a,args:l,resolve:h})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function gr(n,e){const t=n,o=$i(),r=bc(),s=yc&&t.enableEarlyProxy;if(r&&(o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(wc,n,e);else{const i=s?new Sc(t,r):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:i}),i&&e(i.proxiedTarget)}}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const pt=typeof document<"u";function ji(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Cc(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&ji(n.default)}const ve=Object.assign;function In(n,e){const t={};for(const o in e){const r=e[o];t[o]=qe(r)?r.map(n):n(r)}return t}const bo=()=>{},qe=Array.isArray;function le(n){const e=Array.from(arguments).slice(1);console.warn.apply(console,["[Vue Router warn]: "+n].concat(e))}const Fi=/#/g,_c=/&/g,Tc=/\//g,Bc=/=/g,Ic=/\?/g,Ui=/\+/g,Ac=/%5B/g,Oc=/%5D/g,Hi=/%5E/g,Pc=/%60/g,zi=/%7B/g,Mc=/%7C/g,Vi=/%7D/g,Lc=/%20/g;function mr(n){return encodeURI(""+n).replace(Mc,"|").replace(Ac,"[").replace(Oc,"]")}function Rc(n){return mr(n).replace(zi,"{").replace(Vi,"}").replace(Hi,"^")}function Wn(n){return mr(n).replace(Ui,"%2B").replace(Lc,"+").replace(Fi,"%23").replace(_c,"%26").replace(Pc,"`").replace(zi,"{").replace(Vi,"}").replace(Hi,"^")}function Nc(n){return Wn(n).replace(Bc,"%3D")}function Dc(n){return mr(n).replace(Fi,"%23").replace(Ic,"%3F")}function $c(n){return n==null?"":Dc(n).replace(Tc,"%2F")}function eo(n){try{return decodeURIComponent(""+n)}catch{le(`Error decoding "${n}". Using original value`)}return""+n}const jc=/\/$/,Fc=n=>n.replace(jc,"");function An(n,e,t="/"){let o,r={},s="",i="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(o=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=n(s)),a>-1&&(o=o||e.slice(0,a),i=e.slice(a,e.length)),o=zc(o??e,t),{fullPath:o+(s&&"?")+s+i,path:o,query:r,hash:eo(i)}}function Uc(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Fs(n,e,t){const o=e.matched.length-1,r=t.matched.length-1;return o>-1&&o===r&&St(e.matched[o],t.matched[r])&&qi(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function St(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function qi(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!Hc(n[t],e[t]))return!1;return!0}function Hc(n,e){return qe(n)?Us(n,e):qe(e)?Us(e,n):n===e}function Us(n,e){return qe(e)?n.length===e.length&&n.every((t,o)=>t===e[o]):n.length===1&&n[0]===e}function zc(n,e){if(n.startsWith("/"))return n;if(!e.startsWith("/"))return le(`Cannot resolve a relative location without an absolute path. Trying to resolve "${n}" from "${e}". It should look like "/${e}".`),n;if(!n)return e;const t=e.split("/"),o=n.split("/"),r=o[o.length-1];(r===".."||r===".")&&o.push("");let s=t.length-1,i,a;for(i=0;i<o.length;i++)if(a=o[i],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+o.slice(i).join("/")}const vt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var So;(function(n){n.pop="pop",n.push="push"})(So||(So={}));var Wo;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Wo||(Wo={}));const On="";function Vc(n){if(!n)if(pt){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),Fc(n)}const qc=/^[^#]+#/;function Qc(n,e){return n.replace(qc,"#")+e}function Wc(n,e){const t=document.documentElement.getBoundingClientRect(),o=n.getBoundingClientRect();return{behavior:e.behavior,left:o.left-t.left-(e.left||0),top:o.top-t.top-(e.top||0)}}const Gc=()=>({left:window.scrollX,top:window.scrollY});function Kc(n){let e;if("el"in n){const t=n.el,o=typeof t=="string"&&t.startsWith("#");if(typeof n.el=="string"&&(!o||!document.getElementById(n.el.slice(1))))try{const s=document.querySelector(n.el);if(o&&s){le(`The selector "${n.el}" should be passed as "el: document.querySelector('${n.el}')" because it starts with "#".`);return}}catch{le(`The selector "${n.el}" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);return}const r=typeof t=="string"?o?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r){le(`Couldn't find element using selector "${n.el}" returned by scrollBehavior.`);return}e=Wc(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Hs(n,e){return(history.state?history.state.position-e:-1)+n}const Gn=new Map;function Yc(n,e){Gn.set(n,e)}function Zc(n){const e=Gn.get(n);return Gn.delete(n),e}function Xc(n=""){let e=[],t=[On],o=0;n=Vc(n);function r(a){o++,o!==t.length&&t.splice(o),t.push(a)}function s(a,l,{direction:h,delta:d}){const p={direction:h,delta:d,type:So.pop};for(const f of e)f(a,l,p)}const i={location:On,state:{},base:n,createHref:Qc.bind(null,n),replace(a){t.splice(o--,1),r(a)},push(a,l){r(a)},listen(a){return e.push(a),()=>{const l=e.indexOf(a);l>-1&&e.splice(l,1)}},destroy(){e=[],t=[On],o=0},go(a,l=!0){const h=this.location,d=a<0?Wo.back:Wo.forward;o=Math.max(0,Math.min(o+a,t.length-1)),l&&s(this.location,h,{direction:d,delta:a})}};return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t[o]}),i}function Go(n){return typeof n=="string"||n&&typeof n=="object"}function Qi(n){return typeof n=="string"||typeof n=="symbol"}const Wi=Symbol("navigation failure");var zs;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(zs||(zs={}));const Jc={1({location:n,currentLocation:e}){return`No match for
 ${JSON.stringify(n)}${e?`
while being at
`+JSON.stringify(e):""}`},2({from:n,to:e}){return`Redirected from "${n.fullPath}" to "${tu(e)}" via a navigation guard.`},4({from:n,to:e}){return`Navigation aborted from "${n.fullPath}" to "${e.fullPath}" via a navigation guard.`},8({from:n,to:e}){return`Navigation cancelled from "${n.fullPath}" to "${e.fullPath}" with a new navigation.`},16({from:n,to:e}){return`Avoided redundant navigation to current location: "${n.fullPath}".`}};function to(n,e){return ve(new Error(Jc[n](e)),{type:n,[Wi]:!0},e)}function ct(n,e){return n instanceof Error&&Wi in n&&(e==null||!!(n.type&e))}const eu=["params","query","hash"];function tu(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const e={};for(const t of eu)t in n&&(e[t]=n[t]);return JSON.stringify(e,null,2)}const Vs="[^/]+?",ou={sensitive:!1,strict:!1,start:!0,end:!0},nu=/[.+*?^${}()[\]/\\]/g;function ru(n,e){const t=ve({},ou,e),o=[];let r=t.start?"^":"";const s=[];for(const h of n){const d=h.length?[]:[90];t.strict&&!h.length&&(r+="/");for(let p=0;p<h.length;p++){const f=h[p];let v=40+(t.sensitive?.25:0);if(f.type===0)p||(r+="/"),r+=f.value.replace(nu,"\\$&"),v+=40;else if(f.type===1){const{value:u,repeatable:g,optional:w,regexp:E}=f;s.push({name:u,repeatable:g,optional:w});const x=E||Vs;if(x!==Vs){v+=10;try{new RegExp(`(${x})`)}catch(O){throw new Error(`Invalid custom RegExp for param "${u}" (${x}): `+O.message)}}let S=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;p||(S=w&&h.length<2?`(?:/${S})`:"/"+S),w&&(S+="?"),r+=S,v+=20,w&&(v+=-8),g&&(v+=-20),x===".*"&&(v+=-50)}d.push(v)}o.push(d)}if(t.strict&&t.end){const h=o.length-1;o[h][o[h].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const i=new RegExp(r,t.sensitive?"":"i");function a(h){const d=h.match(i),p={};if(!d)return null;for(let f=1;f<d.length;f++){const v=d[f]||"",u=s[f-1];p[u.name]=v&&u.repeatable?v.split("/"):v}return p}function l(h){let d="",p=!1;for(const f of n){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of f)if(v.type===0)d+=v.value;else if(v.type===1){const{value:u,repeatable:g,optional:w}=v,E=u in h?h[u]:"";if(qe(E)&&!g)throw new Error(`Provided param "${u}" is an array but it is not repeatable (* or + modifiers)`);const x=qe(E)?E.join("/"):E;if(!x)if(w)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${u}"`);d+=x}}return d||"/"}return{re:i,score:o,keys:s,parse:a,stringify:l}}function su(n,e){let t=0;for(;t<n.length&&t<e.length;){const o=e[t]-n[t];if(o)return o;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Gi(n,e){let t=0;const o=n.score,r=e.score;for(;t<o.length&&t<r.length;){const s=su(o[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-o.length)===1){if(qs(o))return 1;if(qs(r))return-1}return r.length-o.length}function qs(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const iu={type:0,value:""},au=/[a-zA-Z0-9_]/;function lu(n){if(!n)return[[]];if(n==="/")return[[iu]];if(!n.startsWith("/"))throw new Error(`Route paths should start with a "/": "${n}" should be "/${n}".`);function e(v){throw new Error(`ERR (${t})/"${h}": ${v}`)}let t=0,o=t;const r=[];let s;function i(){s&&r.push(s),s=[]}let a=0,l,h="",d="";function p(){h&&(t===0?s.push({type:0,value:h}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),h="")}function f(){h+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){o=t,t=4;continue}switch(t){case 0:l==="/"?(h&&p(),i()):l===":"?(p(),t=1):f();break;case 4:f(),t=o;break;case 1:l==="("?t=2:au.test(l)?f():(p(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:t=3:d+=l;break;case 3:p(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${h}"`),p(),i(),r}function cu(n,e,t){const o=ru(lu(n.path),t);{const s=new Set;for(const i of o.keys)s.has(i.name)&&le(`Found duplicated params with name "${i.name}" for path "${n.path}". Only the last one will be available on "$route.params".`),s.add(i.name)}const r=ve(o,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function uu(n,e){const t=[],o=new Map;e=Ks({strict:!1,end:!0,sensitive:!1},e);function r(p){return o.get(p)}function s(p,f,v){const u=!v,g=Ws(p);fu(g,f),g.aliasOf=v&&v.record;const w=Ks(e,p),E=[g];if("alias"in p){const O=typeof p.alias=="string"?[p.alias]:p.alias;for(const M of O)E.push(Ws(ve({},g,{components:v?v.record.components:g.components,path:M,aliasOf:v?v.record:g})))}let x,S;for(const O of E){const{path:M}=O;if(f&&M[0]!=="/"){const C=f.record.path,B=C[C.length-1]==="/"?"":"/";O.path=f.record.path+(M&&B+M)}if(O.path==="*")throw new Error(`Catch all routes ("*") must now be defined using a param with a custom regexp.
See more at https://router.vuejs.org/guide/migration/#Removed-star-or-catch-all-routes.`);if(x=cu(O,f,w),f&&M[0]==="/"&&mu(x,f),v?(v.alias.push(x),pu(v,x)):(S=S||x,S!==x&&S.alias.push(x),u&&p.name&&!Gs(x)&&(gu(p,f),i(p.name))),Ki(x)&&l(x),g.children){const C=g.children;for(let B=0;B<C.length;B++)s(C[B],x,v&&v.children[B])}v=v||x}return S?()=>{i(S)}:bo}function i(p){if(Qi(p)){const f=o.get(p);f&&(o.delete(p),t.splice(t.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=t.indexOf(p);f>-1&&(t.splice(f,1),p.record.name&&o.delete(p.record.name),p.children.forEach(i),p.alias.forEach(i))}}function a(){return t}function l(p){const f=vu(p,t);t.splice(f,0,p),p.record.name&&!Gs(p)&&o.set(p.record.name,p)}function h(p,f){let v,u={},g,w;if("name"in p&&p.name){if(v=o.get(p.name),!v)throw to(1,{location:p});{const S=Object.keys(p.params||{}).filter(O=>!v.keys.find(M=>M.name===O));S.length&&le(`Discarded invalid param(s) "${S.join('", "')}" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`)}w=v.record.name,u=ve(Qs(f.params,v.keys.filter(S=>!S.optional).concat(v.parent?v.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),p.params&&Qs(p.params,v.keys.map(S=>S.name))),g=v.stringify(u)}else if(p.path!=null)g=p.path,g.startsWith("/")||le(`The Matcher cannot resolve relative paths but received "${g}". Unless you directly called \`matcher.resolve("${g}")\`, this is probably a bug in vue-router. Please open an issue at https://github.com/vuejs/router/issues/new/choose.`),v=t.find(S=>S.re.test(g)),v&&(u=v.parse(g),w=v.record.name);else{if(v=f.name?o.get(f.name):t.find(S=>S.re.test(f.path)),!v)throw to(1,{location:p,currentLocation:f});w=v.record.name,u=ve({},f.params,p.params),g=v.stringify(u)}const E=[];let x=v;for(;x;)E.unshift(x.record),x=x.parent;return{name:w,path:g,params:u,matched:E,meta:hu(E)}}n.forEach(p=>s(p));function d(){t.length=0,o.clear()}return{addRoute:s,resolve:h,removeRoute:i,clearRoutes:d,getRoutes:a,getRecordMatcher:r}}function Qs(n,e){const t={};for(const o of e)o in n&&(t[o]=n[o]);return t}function Ws(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:du(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function du(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const o in n.components)e[o]=typeof t=="object"?t[o]:t;return e}function Gs(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function hu(n){return n.reduce((e,t)=>ve(e,t.meta),{})}function Ks(n,e){const t={};for(const o in n)t[o]=o in e?e[o]:n[o];return t}function Kn(n,e){return n.name===e.name&&n.optional===e.optional&&n.repeatable===e.repeatable}function pu(n,e){for(const t of n.keys)if(!t.optional&&!e.keys.find(Kn.bind(null,t)))return le(`Alias "${e.record.path}" and the original record: "${n.record.path}" must have the exact same param named "${t.name}"`);for(const t of e.keys)if(!t.optional&&!n.keys.find(Kn.bind(null,t)))return le(`Alias "${e.record.path}" and the original record: "${n.record.path}" must have the exact same param named "${t.name}"`)}function fu(n,e){e&&e.record.name&&!n.name&&!n.path&&le(`The route named "${String(e.record.name)}" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`)}function gu(n,e){for(let t=e;t;t=t.parent)if(t.record.name===n.name)throw new Error(`A route named "${String(n.name)}" has been added as a ${e===t?"child":"descendant"} of a route with the same name. Route names must be unique and a nested route cannot use the same name as an ancestor.`)}function mu(n,e){for(const t of e.keys)if(!n.keys.find(Kn.bind(null,t)))return le(`Absolute path "${n.record.path}" must have the exact same param named "${t.name}" as its parent "${e.record.path}".`)}function vu(n,e){let t=0,o=e.length;for(;t!==o;){const s=t+o>>1;Gi(n,e[s])<0?o=s:t=s+1}const r=bu(n);return r&&(o=e.lastIndexOf(r,o-1),o<0&&le(`Finding ancestor route "${r.record.path}" failed for "${n.record.path}"`)),o}function bu(n){let e=n;for(;e=e.parent;)if(Ki(e)&&Gi(n,e)===0)return e}function Ki({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function yu(n){const e={};if(n===""||n==="?")return e;const o=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<o.length;++r){const s=o[r].replace(Ui," "),i=s.indexOf("="),a=eo(i<0?s:s.slice(0,i)),l=i<0?null:eo(s.slice(i+1));if(a in e){let h=e[a];qe(h)||(h=e[a]=[h]),h.push(l)}else e[a]=l}return e}function Ys(n){let e="";for(let t in n){const o=n[t];if(t=Nc(t),o==null){o!==void 0&&(e+=(e.length?"&":"")+t);continue}(qe(o)?o.map(s=>s&&Wn(s)):[o&&Wn(o)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function wu(n){const e={};for(const t in n){const o=n[t];o!==void 0&&(e[t]=qe(o)?o.map(r=>r==null?null:""+r):o==null?o:""+o)}return e}const ku=Symbol("router view location matched"),Zs=Symbol("router view depth"),ln=Symbol("router"),vr=Symbol("route location"),Yn=Symbol("router view location");function co(){let n=[];function e(o){return n.push(o),()=>{const r=n.indexOf(o);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function bt(n,e,t,o,r,s=i=>i()){const i=o&&(o.enterCallbacks[r]=o.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const h=f=>{f===!1?l(to(4,{from:t,to:e})):f instanceof Error?l(f):Go(f)?l(to(2,{from:e,to:f})):(i&&o.enterCallbacks[r]===i&&typeof f=="function"&&i.push(f),a())},d=s(()=>n.call(o&&o.instances[r],e,t,Eu(h,e,t)));let p=Promise.resolve(d);if(n.length<3&&(p=p.then(h)),n.length>2){const f=`The "next" callback was never called inside of ${n.name?'"'+n.name+'"':""}:
${n.toString()}
. If you are returning a value instead of calling "next", make sure to remove the "next" parameter from your function.`;if(typeof d=="object"&&"then"in d)p=p.then(v=>h._called?v:(le(f),Promise.reject(new Error("Invalid navigation guard"))));else if(d!==void 0&&!h._called){le(f),l(new Error("Invalid navigation guard"));return}}p.catch(f=>l(f))})}function Eu(n,e,t){let o=0;return function(){o++===1&&le(`The "next" callback was called more than once in one navigation guard when going from "${t.fullPath}" to "${e.fullPath}". It should be called exactly one time in each navigation guard. This will fail in production.`),n._called=!0,o===1&&n.apply(null,arguments)}}function Pn(n,e,t,o,r=s=>s()){const s=[];for(const i of n){!i.components&&!i.children.length&&le(`Record with path "${i.path}" is either missing a "component(s)" or "children" property.`);for(const a in i.components){let l=i.components[a];{if(!l||typeof l!="object"&&typeof l!="function")throw le(`Component "${a}" in record with path "${i.path}" is not a valid component. Received "${String(l)}".`),new Error("Invalid route component");if("then"in l){le(`Component "${a}" in record with path "${i.path}" is a Promise instead of a function that returns a Promise. Did you write "import('./MyPage.vue')" instead of "() => import('./MyPage.vue')" ? This will break in production if not fixed.`);const h=l;l=()=>h}else l.__asyncLoader&&!l.__warnedDefineAsync&&(l.__warnedDefineAsync=!0,le(`Component "${a}" in record with path "${i.path}" is defined using "defineAsyncComponent()". Write "() => import('./MyPage.vue')" instead of "defineAsyncComponent(() => import('./MyPage.vue'))".`))}if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(ji(l)){const d=(l.__vccOpts||l)[e];d&&s.push(bt(d,t,o,i,a,r))}else{let h=l();"catch"in h||(le(`Component "${a}" in record with path "${i.path}" is a function that does not return a Promise. If you were passing a functional component, make sure to add a "displayName" to the component. This will break in production if not fixed.`),h=Promise.resolve(h)),s.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const p=Cc(d)?d.default:d;i.mods[a]=d,i.components[a]=p;const v=(p.__vccOpts||p)[e];return v&&bt(v,t,o,i,a,r)()}))}}}return s}function Xs(n){const e=kt(ln),t=kt(vr);let o=!1,r=null;const s=Ge(()=>{const d=Bt(n.to);return(!o||d!==r)&&(Go(d)||(o?le(`Invalid value for prop "to" in useLink()
- to:`,d,`
- previous to:`,r,`
- props:`,n):le(`Invalid value for prop "to" in useLink()
- to:`,d,`
- props:`,n)),r=d,o=!0),e.resolve(d)}),i=Ge(()=>{const{matched:d}=s.value,{length:p}=d,f=d[p-1],v=t.matched;if(!f||!v.length)return-1;const u=v.findIndex(St.bind(null,f));if(u>-1)return u;const g=Js(d[p-2]);return p>1&&Js(f)===g&&v[v.length-1].path!==g?v.findIndex(St.bind(null,d[p-2])):u}),a=Ge(()=>i.value>-1&&_u(t.params,s.value.params)),l=Ge(()=>i.value>-1&&i.value===t.matched.length-1&&qi(t.params,s.value.params));function h(d={}){if(Cu(d)){const p=e[Bt(n.replace)?"replace":"push"](Bt(n.to)).catch(bo);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>p),p}return Promise.resolve()}if(pt){const d=dr();if(d){const p={route:s.value,isActive:a.value,isExactActive:l.value,error:null};d.__vrl_devtools=d.__vrl_devtools||[],d.__vrl_devtools.push(p),hc(()=>{p.route=s.value,p.isActive=a.value,p.isExactActive=l.value,p.error=Go(Bt(n.to))?null:'Invalid "to" value'},{flush:"post"})}}return{route:s,href:Ge(()=>s.value.href),isActive:a,isExactActive:l,navigate:h}}function xu(n){return n.length===1?n[0]:n}const Su=Mi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Xs,setup(n,{slots:e}){const t=wt(Xs(n)),{options:o}=kt(ln),r=Ge(()=>({[ei(n.activeClass,o.linkActiveClass,"router-link-active")]:t.isActive,[ei(n.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&xu(e.default(t));return n.custom?s:Li("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),br=Su;function Cu(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function _u(n,e){for(const t in e){const o=e[t],r=n[t];if(typeof o=="string"){if(o!==r)return!1}else if(!qe(r)||r.length!==o.length||o.some((s,i)=>s!==r[i]))return!1}return!0}function Js(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const ei=(n,e,t)=>n??e??t,Tu=Mi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){Bu();const o=kt(Yn),r=Ge(()=>n.route||o.value),s=kt(Zs,0),i=Ge(()=>{let h=Bt(s);const{matched:d}=r.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),a=Ge(()=>r.value.matched[i.value]);Tn(Zs,Ge(()=>i.value+1)),Tn(ku,a),Tn(Yn,r);const l=fe();return an(()=>[l.value,a.value,n.name],([h,d,p],[f,v,u])=>{d&&(d.instances[p]=h,v&&v!==d&&h&&h===f&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),h&&d&&(!v||!St(d,v)||!f)&&(d.enterCallbacks[p]||[]).forEach(g=>g(h))},{flush:"post"}),()=>{const h=r.value,d=n.name,p=a.value,f=p&&p.components[d];if(!f)return ti(t.default,{Component:f,route:h});const v=p.props[d],u=v?v===!0?h.params:typeof v=="function"?v(h):v:null,w=Li(f,ve({},u,e,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(p.instances[d]=null)},ref:l}));if(pt&&w.ref){const E={depth:i.value,name:p.name,path:p.path,meta:p.meta};(qe(w.ref)?w.ref.map(S=>S.i):[w.ref.i]).forEach(S=>{S.__vrv_devtools=E})}return ti(t.default,{Component:w,route:h})||w}}});function ti(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Yi=Tu;function Bu(){const n=dr(),e=n.parent&&n.parent.type.name,t=n.parent&&n.parent.subTree&&n.parent.subTree.type;if(e&&(e==="KeepAlive"||e.includes("Transition"))&&typeof t=="object"&&t.name==="RouterView"){const o=e==="KeepAlive"?"keep-alive":"transition";le(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.
Use slot props instead:

<router-view v-slot="{ Component }">
  <${o}>
    <component :is="Component" />
  </${o}>
</router-view>`)}}function uo(n,e){const t=ve({},n,{matched:n.matched.map(o=>ju(o,["instances","children","aliasOf"]))});return{_custom:{type:null,readOnly:!0,display:n.fullPath,tooltip:e,value:t}}}function Lo(n){return{_custom:{display:n}}}let Iu=0;function Au(n,e,t){if(e.__hasDevtools)return;e.__hasDevtools=!0;const o=Iu++;gr({id:"org.vuejs.router"+(o?"."+o:""),label:"Vue Router",packageName:"vue-router",homepage:"https://router.vuejs.org",logo:"https://router.vuejs.org/logo.png",componentStateTypes:["Routing"],app:n},r=>{typeof r.now!="function"&&console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.on.inspectComponent((d,p)=>{d.instanceData&&d.instanceData.state.push({type:"Routing",key:"$route",editable:!1,value:uo(e.currentRoute.value,"Current Route")})}),r.on.visitComponentTree(({treeNode:d,componentInstance:p})=>{if(p.__vrv_devtools){const f=p.__vrv_devtools;d.tags.push({label:(f.name?`${f.name.toString()}: `:"")+f.path,textColor:0,tooltip:"This component is rendered by &lt;router-view&gt;",backgroundColor:Zi})}qe(p.__vrl_devtools)&&(p.__devtoolsApi=r,p.__vrl_devtools.forEach(f=>{let v=f.route.path,u=ea,g="",w=0;f.error?(v=f.error,u=Ru,w=Nu):f.isExactActive?(u=Ji,g="This is exactly active"):f.isActive&&(u=Xi,g="This link is active"),d.tags.push({label:v,textColor:w,tooltip:g,backgroundColor:u})}))}),an(e.currentRoute,()=>{l(),r.notifyComponentUpdate(),r.sendInspectorTree(a),r.sendInspectorState(a)});const s="router:navigations:"+o;r.addTimelineLayer({id:s,label:`Router${o?" "+o:""} Navigations`,color:4237508}),e.onError((d,p)=>{r.addTimelineEvent({layerId:s,event:{title:"Error during Navigation",subtitle:p.fullPath,logType:"error",time:r.now(),data:{error:d},groupId:p.meta.__navigationId}})});let i=0;e.beforeEach((d,p)=>{const f={guard:Lo("beforeEach"),from:uo(p,"Current Location during this navigation"),to:uo(d,"Target location")};Object.defineProperty(d.meta,"__navigationId",{value:i++}),r.addTimelineEvent({layerId:s,event:{time:r.now(),title:"Start of navigation",subtitle:d.fullPath,data:f,groupId:d.meta.__navigationId}})}),e.afterEach((d,p,f)=>{const v={guard:Lo("afterEach")};f?(v.failure={_custom:{type:Error,readOnly:!0,display:f?f.message:"",tooltip:"Navigation Failure",value:f}},v.status=Lo("❌")):v.status=Lo("✅"),v.from=uo(p,"Current Location during this navigation"),v.to=uo(d,"Target location"),r.addTimelineEvent({layerId:s,event:{title:"End of navigation",subtitle:d.fullPath,time:r.now(),data:v,logType:f?"warning":"default",groupId:d.meta.__navigationId}})});const a="router-inspector:"+o;r.addInspector({id:a,label:"Routes"+(o?" "+o:""),icon:"book",treeFilterPlaceholder:"Search routes"});function l(){if(!h)return;const d=h;let p=t.getRoutes().filter(f=>!f.parent||!f.parent.record.components);p.forEach(na),d.filter&&(p=p.filter(f=>Zn(f,d.filter.toLowerCase()))),p.forEach(f=>oa(f,e.currentRoute.value)),d.rootNodes=p.map(ta)}let h;r.on.getInspectorTree(d=>{h=d,d.app===n&&d.inspectorId===a&&l()}),r.on.getInspectorState(d=>{if(d.app===n&&d.inspectorId===a){const f=t.getRoutes().find(v=>v.record.__vd_id===d.nodeId);f&&(d.state={options:Pu(f)})}}),r.sendInspectorTree(a),r.sendInspectorState(a)})}function Ou(n){return n.optional?n.repeatable?"*":"?":n.repeatable?"+":""}function Pu(n){const{record:e}=n,t=[{editable:!1,key:"path",value:e.path}];return e.name!=null&&t.push({editable:!1,key:"name",value:e.name}),t.push({editable:!1,key:"regexp",value:n.re}),n.keys.length&&t.push({editable:!1,key:"keys",value:{_custom:{type:null,readOnly:!0,display:n.keys.map(o=>`${o.name}${Ou(o)}`).join(" "),tooltip:"Param keys",value:n.keys}}}),e.redirect!=null&&t.push({editable:!1,key:"redirect",value:e.redirect}),n.alias.length&&t.push({editable:!1,key:"aliases",value:n.alias.map(o=>o.record.path)}),Object.keys(n.record.meta).length&&t.push({editable:!1,key:"meta",value:n.record.meta}),t.push({key:"score",editable:!1,value:{_custom:{type:null,readOnly:!0,display:n.score.map(o=>o.join(", ")).join(" | "),tooltip:"Score used to sort routes",value:n.score}}}),t}const Zi=15485081,Xi=2450411,Ji=8702998,Mu=2282478,ea=16486972,Lu=6710886,Ru=16704226,Nu=12131356;function ta(n){const e=[],{record:t}=n;t.name!=null&&e.push({label:String(t.name),textColor:0,backgroundColor:Mu}),t.aliasOf&&e.push({label:"alias",textColor:0,backgroundColor:ea}),n.__vd_match&&e.push({label:"matches",textColor:0,backgroundColor:Zi}),n.__vd_exactActive&&e.push({label:"exact",textColor:0,backgroundColor:Ji}),n.__vd_active&&e.push({label:"active",textColor:0,backgroundColor:Xi}),t.redirect&&e.push({label:typeof t.redirect=="string"?`redirect: ${t.redirect}`:"redirects",textColor:16777215,backgroundColor:Lu});let o=t.__vd_id;return o==null&&(o=String(Du++),t.__vd_id=o),{id:o,label:t.path,tags:e,children:n.children.map(ta)}}let Du=0;const $u=/^\/(.*)\/([a-z]*)$/;function oa(n,e){const t=e.matched.length&&St(e.matched[e.matched.length-1],n.record);n.__vd_exactActive=n.__vd_active=t,t||(n.__vd_active=e.matched.some(o=>St(o,n.record))),n.children.forEach(o=>oa(o,e))}function na(n){n.__vd_match=!1,n.children.forEach(na)}function Zn(n,e){const t=String(n.re).match($u);if(n.__vd_match=!1,!t||t.length<3)return!1;if(new RegExp(t[1].replace(/\$$/,""),t[2]).test(e))return n.children.forEach(i=>Zn(i,e)),n.record.path!=="/"||e==="/"?(n.__vd_match=n.re.test(e),!0):!1;const r=n.record.path.toLowerCase(),s=eo(r);return!e.startsWith("/")&&(s.includes(e)||r.includes(e))||s.startsWith(e)||r.startsWith(e)||n.record.name&&String(n.record.name).includes(e)?!0:n.children.some(i=>Zn(i,e))}function ju(n,e){const t={};for(const o in n)e.includes(o)||(t[o]=n[o]);return t}function Fu(n){const e=uu(n.routes,n),t=n.parseQuery||yu,o=n.stringifyQuery||Ys,r=n.history;if(!r)throw new Error('Provide the "history" option when calling "createRouter()": https://router.vuejs.org/api/interfaces/RouterOptions.html#history');const s=co(),i=co(),a=co(),l=uc(vt);let h=vt;pt&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=In.bind(null,N=>""+N),p=In.bind(null,$c),f=In.bind(null,eo);function v(N,z){let V,Q;return Qi(N)?(V=e.getRecordMatcher(N),V||le(`Parent route "${String(N)}" not found when adding child route`,z),Q=z):Q=N,e.addRoute(Q,V)}function u(N){const z=e.getRecordMatcher(N);z?e.removeRoute(z):le(`Cannot remove non-existent route "${String(N)}"`)}function g(){return e.getRoutes().map(N=>N.record)}function w(N){return!!e.getRecordMatcher(N)}function E(N,z){if(z=ve({},z||l.value),typeof N=="string"){const te=An(t,N,z.path),we=e.resolve({path:te.path},z),rt=r.createHref(te.fullPath);return rt.startsWith("//")?le(`Location "${N}" resolved to "${rt}". A resolved location cannot start with multiple slashes.`):we.matched.length||le(`No match found for location with path "${N}"`),ve(te,we,{params:f(we.params),hash:eo(te.hash),redirectedFrom:void 0,href:rt})}if(!Go(N))return le(`router.resolve() was passed an invalid location. This will fail in production.
- Location:`,N),E({});let V;if(N.path!=null)"params"in N&&!("name"in N)&&Object.keys(N.params).length&&le(`Path "${N.path}" was passed with params but they will be ignored. Use a named route alongside params instead.`),V=ve({},N,{path:An(t,N.path,z.path).path});else{const te=ve({},N.params);for(const we in te)te[we]==null&&delete te[we];V=ve({},N,{params:p(te)}),z.params=p(z.params)}const Q=e.resolve(V,z),ue=N.hash||"";ue&&!ue.startsWith("#")&&le(`A \`hash\` should always start with the character "#". Replace "${ue}" with "#${ue}".`),Q.params=d(f(Q.params));const ye=Uc(o,ve({},N,{hash:Rc(ue),path:Q.path})),ne=r.createHref(ye);return ne.startsWith("//")?le(`Location "${N}" resolved to "${ne}". A resolved location cannot start with multiple slashes.`):Q.matched.length||le(`No match found for location with path "${N.path!=null?N.path:N}"`),ve({fullPath:ye,hash:ue,query:o===Ys?wu(N.query):N.query||{}},Q,{redirectedFrom:void 0,href:ne})}function x(N){return typeof N=="string"?An(t,N,l.value.path):ve({},N)}function S(N,z){if(h!==N)return to(8,{from:z,to:N})}function O(N){return B(N)}function M(N){return O(ve(x(N),{replace:!0}))}function C(N){const z=N.matched[N.matched.length-1];if(z&&z.redirect){const{redirect:V}=z;let Q=typeof V=="function"?V(N):V;if(typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=x(Q):{path:Q},Q.params={}),Q.path==null&&!("name"in Q))throw le(`Invalid redirect found:
${JSON.stringify(Q,null,2)}
 when navigating to "${N.fullPath}". A redirect must contain a name or path. This will break in production.`),new Error("Invalid redirect");return ve({query:N.query,hash:N.hash,params:Q.path!=null?{}:N.params},Q)}}function B(N,z){const V=h=E(N),Q=l.value,ue=N.state,ye=N.force,ne=N.replace===!0,te=C(V);if(te)return B(ve(x(te),{state:typeof te=="object"?ve({},ue,te.state):ue,force:ye,replace:ne}),z||V);const we=V;we.redirectedFrom=z;let rt;return!ye&&Fs(o,Q,V)&&(rt=to(16,{to:we,from:Q}),de(Q,Q,!0,!1)),(rt?Promise.resolve(rt):T(we,Q)).catch(Te=>ct(Te)?ct(Te,2)?Te:be(Te):Z(Te,we,Q)).then(Te=>{if(Te){if(ct(Te,2))return Fs(o,E(Te.to),we)&&z&&(z._count=z._count?z._count+1:1)>30?(le(`Detected a possibly infinite redirection in a navigation guard when going from "${Q.fullPath}" to "${we.fullPath}". Aborting to avoid a Stack Overflow.
 Are you always returning a new location within a navigation guard? That would lead to this error. Only return when redirecting or aborting, that should fix this. This might break in production if not fixed.`),Promise.reject(new Error("Infinite redirect in navigation guard"))):B(ve({replace:ne},x(Te.to),{state:typeof Te.to=="object"?ve({},ue,Te.to.state):ue,force:ye}),z||we)}else Te=$(we,Q,!0,ne,ue);return _(we,Q,Te),Te})}function A(N,z){const V=S(N,z);return V?Promise.reject(V):Promise.resolve()}function k(N){const z=ot.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(N):N()}function T(N,z){let V;const[Q,ue,ye]=Uu(N,z);V=Pn(Q.reverse(),"beforeRouteLeave",N,z);for(const te of Q)te.leaveGuards.forEach(we=>{V.push(bt(we,N,z))});const ne=A.bind(null,N,z);return V.push(ne),nt(V).then(()=>{V=[];for(const te of s.list())V.push(bt(te,N,z));return V.push(ne),nt(V)}).then(()=>{V=Pn(ue,"beforeRouteUpdate",N,z);for(const te of ue)te.updateGuards.forEach(we=>{V.push(bt(we,N,z))});return V.push(ne),nt(V)}).then(()=>{V=[];for(const te of ye)if(te.beforeEnter)if(qe(te.beforeEnter))for(const we of te.beforeEnter)V.push(bt(we,N,z));else V.push(bt(te.beforeEnter,N,z));return V.push(ne),nt(V)}).then(()=>(N.matched.forEach(te=>te.enterCallbacks={}),V=Pn(ye,"beforeRouteEnter",N,z,k),V.push(ne),nt(V))).then(()=>{V=[];for(const te of i.list())V.push(bt(te,N,z));return V.push(ne),nt(V)}).catch(te=>ct(te,8)?te:Promise.reject(te))}function _(N,z,V){a.list().forEach(Q=>k(()=>Q(N,z,V)))}function $(N,z,V,Q,ue){const ye=S(N,z);if(ye)return ye;const ne=z===vt,te=pt?history.state:{};V&&(Q||ne?r.replace(N.fullPath,ve({scroll:ne&&te&&te.scroll},ue)):r.push(N.fullPath,ue)),l.value=N,de(N,z,V,ne),be()}let F;function L(){F||(F=r.listen((N,z,V)=>{if(!mt.listening)return;const Q=E(N),ue=C(Q);if(ue){B(ve(ue,{replace:!0,force:!0}),Q).catch(bo);return}h=Q;const ye=l.value;pt&&Yc(Hs(ye.fullPath,V.delta),Gc()),T(Q,ye).catch(ne=>ct(ne,12)?ne:ct(ne,2)?(B(ve(x(ne.to),{force:!0}),Q).then(te=>{ct(te,20)&&!V.delta&&V.type===So.pop&&r.go(-1,!1)}).catch(bo),Promise.reject()):(V.delta&&r.go(-V.delta,!1),Z(ne,Q,ye))).then(ne=>{ne=ne||$(Q,ye,!1),ne&&(V.delta&&!ct(ne,8)?r.go(-V.delta,!1):V.type===So.pop&&ct(ne,20)&&r.go(-1,!1)),_(Q,ye,ne)}).catch(bo)}))}let j=co(),q=co(),W;function Z(N,z,V){be(N);const Q=q.list();return Q.length?Q.forEach(ue=>ue(N,z,V)):(le("uncaught error during route navigation:"),console.error(N)),Promise.reject(N)}function X(){return W&&l.value!==vt?Promise.resolve():new Promise((N,z)=>{j.add([N,z])})}function be(N){return W||(W=!N,L(),j.list().forEach(([z,V])=>N?V(N):z()),j.reset()),N}function de(N,z,V,Q){const{scrollBehavior:ue}=n;if(!pt||!ue)return Promise.resolve();const ye=!V&&Zc(Hs(N.fullPath,0))||(Q||!V)&&history.state&&history.state.scroll||null;return qn().then(()=>ue(N,z,ye)).then(ne=>ne&&Kc(ne)).catch(ne=>Z(ne,N,z))}const he=N=>r.go(N);let Ze;const ot=new Set,mt={currentRoute:l,listening:!0,addRoute:v,removeRoute:u,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:g,resolve:E,options:n,push:O,replace:M,go:he,back:()=>he(-1),forward:()=>he(1),beforeEach:s.add,beforeResolve:i.add,afterEach:a.add,onError:q.add,isReady:X,install(N){const z=this;N.component("RouterLink",br),N.component("RouterView",Yi),N.config.globalProperties.$router=z,Object.defineProperty(N.config.globalProperties,"$route",{enumerable:!0,get:()=>Bt(l)}),pt&&!Ze&&l.value===vt&&(Ze=!0,O(r.location).catch(ue=>{le("Unexpected error when starting the router:",ue)}));const V={};for(const ue in vt)Object.defineProperty(V,ue,{get:()=>l.value[ue],enumerable:!0});N.provide(ln,z),N.provide(vr,dc(V)),N.provide(Yn,l);const Q=N.unmount;ot.add(N),N.unmount=function(){ot.delete(N),ot.size<1&&(h=vt,F&&F(),F=null,l.value=vt,Ze=!1,W=!1),Q()},pt&&Au(N,z,e)}};function nt(N){return N.reduce((z,V)=>z.then(()=>k(V)),Promise.resolve())}return mt}function Uu(n,e){const t=[],o=[],r=[],s=Math.max(e.matched.length,n.matched.length);for(let i=0;i<s;i++){const a=e.matched[i];a&&(n.matched.find(h=>St(h,a))?o.push(a):t.push(a));const l=n.matched[i];l&&(e.matched.find(h=>St(h,l))||r.push(l))}return[t,o,r]}function Ko(){return kt(ln)}function oi(n){return kt(vr)}const Fe=(n,e)=>{const t=n.__vccOpts||n;for(const[o,r]of e)t[o]=r;return t},Hu={__name:"NavButtonComponent",props:["route"],setup(n,{expose:e}){e();const t=n,o=t.route,r=oi(),s={props:t,link:o,router:r,get RouterLink(){return br},get useRoute(){return oi}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}};function zu(n,e,t,o,r,s){return oe(),Jt(o.RouterLink,{class:Rt(["rounded-md w-2/3 m-auto pl-2 hover:bg-slate-700 transition-all",{"font-bold text-white pl-5":o.router.name==o.link.name}]),to:o.link.route},{default:Gt(()=>[U("button",null,Et(o.link.title),1)]),_:1},8,["to","class"])}const Vu=Fe(Hu,[["render",zu],["__file","/home/marcos/DEV/vue-notes-app/src/components/shared/NavButtonComponent.vue"]]);function qu(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{d:"M7.25 3.688a8.035 8.035 0 0 0-4.872-.523A.48.48 0 0 0 2 3.64v7.994c0 .345.342.588.679.512a6.02 6.02 0 0 1 4.571.81V3.688ZM8.75 12.956a6.02 6.02 0 0 1 4.571-.81c.337.075.679-.167.679-.512V3.64a.48.48 0 0 0-.378-.475 8.034 8.034 0 0 0-4.872.523v9.268Z"})])}function Qu(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm3.844-8.791a.75.75 0 0 0-1.188-.918l-3.7 4.79-1.649-1.833a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.15-.043l4.25-5.5Z","clip-rule":"evenodd"})])}function Wu(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 1 14 0A7 7 0 0 1 1 8Zm7.75-4.25a.75.75 0 0 0-1.5 0V8c0 .414.336.75.75.75h3.25a.75.75 0 0 0 0-1.5h-2.5v-3.5Z","clip-rule":"evenodd"})])}function Gu(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{"fill-rule":"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM8 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM5.5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm6 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd"})])}function Ku(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{d:"M8 2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM8 6.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM9.5 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"})])}function Yu(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),U("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function Zu(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{"fill-rule":"evenodd",d:"M11.013 2.513a1.75 1.75 0 0 1 2.475 2.474L6.226 12.25a2.751 2.751 0 0 1-.892.596l-2.047.848a.75.75 0 0 1-.98-.98l.848-2.047a2.75 2.75 0 0 1 .596-.892l7.262-7.261Z","clip-rule":"evenodd"})])}function Xu(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.75-10.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z","clip-rule":"evenodd"})])}function Ju(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])}const ed=[{title:"Mis notas",name:"notes",route:"/"},{title:"Ajustes",name:"setup",route:"/setup"},{title:"Info",name:"about",route:"/about"}];var td=Object.create,no=Object.defineProperty,od=Object.getOwnPropertyDescriptor,nd=Object.getOwnPropertyNames,rd=Object.getPrototypeOf,sd=Object.prototype.hasOwnProperty,id=(n,e,t)=>e in n?no(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,y=(n,e)=>no(n,"name",{value:e,configurable:!0}),Ue=(n,e)=>()=>(n&&(e=n(n=0)),e),ie=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),tt=(n,e)=>{for(var t in e)no(n,t,{get:e[t],enumerable:!0})},ra=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of nd(e))!sd.call(n,r)&&r!==t&&no(n,r,{get:()=>e[r],enumerable:!(o=od(e,r))||o.enumerable});return n},ro=(n,e,t)=>(t=n!=null?td(rd(n)):{},ra(e||!n||!n.__esModule?no(t,"default",{value:n,enumerable:!0}):t,n)),Pe=n=>ra(no({},"__esModule",{value:!0}),n),ee=(n,e,t)=>id(n,typeof e!="symbol"?e+"":e,t),ad=ie(n=>{K(),n.byteLength=l,n.toByteArray=d,n.fromByteArray=v;var e=[],t=[],o=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,i=r.length;s<i;++s)e[s]=r[s],t[r.charCodeAt(s)]=s;var s,i;t[45]=62,t[95]=63;function a(u){var g=u.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=u.indexOf("=");w===-1&&(w=g);var E=w===g?0:4-w%4;return[w,E]}y(a,"getLens");function l(u){var g=a(u),w=g[0],E=g[1];return(w+E)*3/4-E}y(l,"byteLength");function h(u,g,w){return(g+w)*3/4-w}y(h,"_byteLength");function d(u){var g,w=a(u),E=w[0],x=w[1],S=new o(h(u,E,x)),O=0,M=x>0?E-4:E,C;for(C=0;C<M;C+=4)g=t[u.charCodeAt(C)]<<18|t[u.charCodeAt(C+1)]<<12|t[u.charCodeAt(C+2)]<<6|t[u.charCodeAt(C+3)],S[O++]=g>>16&255,S[O++]=g>>8&255,S[O++]=g&255;return x===2&&(g=t[u.charCodeAt(C)]<<2|t[u.charCodeAt(C+1)]>>4,S[O++]=g&255),x===1&&(g=t[u.charCodeAt(C)]<<10|t[u.charCodeAt(C+1)]<<4|t[u.charCodeAt(C+2)]>>2,S[O++]=g>>8&255,S[O++]=g&255),S}y(d,"toByteArray");function p(u){return e[u>>18&63]+e[u>>12&63]+e[u>>6&63]+e[u&63]}y(p,"tripletToBase64");function f(u,g,w){for(var E,x=[],S=g;S<w;S+=3)E=(u[S]<<16&16711680)+(u[S+1]<<8&65280)+(u[S+2]&255),x.push(p(E));return x.join("")}y(f,"encodeChunk");function v(u){for(var g,w=u.length,E=w%3,x=[],S=16383,O=0,M=w-E;O<M;O+=S)x.push(f(u,O,O+S>M?M:O+S));return E===1?(g=u[w-1],x.push(e[g>>2]+e[g<<4&63]+"==")):E===2&&(g=(u[w-2]<<8)+u[w-1],x.push(e[g>>10]+e[g>>4&63]+e[g<<2&63]+"=")),x.join("")}y(v,"fromByteArray")}),ld=ie(n=>{K(),n.read=function(e,t,o,r,s){var i,a,l=s*8-r-1,h=(1<<l)-1,d=h>>1,p=-7,f=o?s-1:0,v=o?-1:1,u=e[t+f];for(f+=v,i=u&(1<<-p)-1,u>>=-p,p+=l;p>0;i=i*256+e[t+f],f+=v,p-=8);for(a=i&(1<<-p)-1,i>>=-p,p+=r;p>0;a=a*256+e[t+f],f+=v,p-=8);if(i===0)i=1-d;else{if(i===h)return a?NaN:(u?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-d}return(u?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,o,r,s,i){var a,l,h,d=i*8-s-1,p=(1<<d)-1,f=p>>1,v=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=r?0:i-1,g=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+f>=1?t+=v/h:t+=v*Math.pow(2,1-f),t*h>=2&&(a++,h/=2),a+f>=p?(l=0,a=p):a+f>=1?(l=(t*h-1)*Math.pow(2,s),a=a+f):(l=t*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;e[o+u]=l&255,u+=g,l/=256,s-=8);for(a=a<<s|l,d+=s;d>0;e[o+u]=a&255,u+=g,a/=256,d-=8);e[o+u-g]|=w*128}}),cd=ie(n=>{K();var e=ad(),t=ld(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=x,n.INSPECT_MAX_BYTES=50;var r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{let c=new Uint8Array(1),m={foo:y(function(){return 42},"foo")};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(c,m),c.foo()===42}catch{return!1}}y(s,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:y(function(){if(a.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:y(function(){if(a.isBuffer(this))return this.byteOffset},"get")});function i(c){if(c>r)throw new RangeError('The value "'+c+'" is invalid for option "size"');let m=new Uint8Array(c);return Object.setPrototypeOf(m,a.prototype),m}y(i,"createBuffer");function a(c,m,b){if(typeof c=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(c)}return l(c,m,b)}y(a,"Buffer"),a.poolSize=8192;function l(c,m,b){if(typeof c=="string")return f(c,m);if(ArrayBuffer.isView(c))return u(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(Xe(c,ArrayBuffer)||c&&Xe(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xe(c,SharedArrayBuffer)||c&&Xe(c.buffer,SharedArrayBuffer)))return g(c,m,b);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let I=c.valueOf&&c.valueOf();if(I!=null&&I!==c)return a.from(I,m,b);let P=w(c);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return a.from(c[Symbol.toPrimitive]("string"),m,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}y(l,"from"),a.from=function(c,m,b){return l(c,m,b)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}y(h,"assertSize");function d(c,m,b){return h(c),c<=0?i(c):m!==void 0?typeof b=="string"?i(c).fill(m,b):i(c).fill(m):i(c)}y(d,"alloc"),a.alloc=function(c,m,b){return d(c,m,b)};function p(c){return h(c),i(c<0?0:E(c)|0)}y(p,"allocUnsafe"),a.allocUnsafe=function(c){return p(c)},a.allocUnsafeSlow=function(c){return p(c)};function f(c,m){if((typeof m!="string"||m==="")&&(m="utf8"),!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);let b=S(c,m)|0,I=i(b),P=I.write(c,m);return P!==b&&(I=I.slice(0,P)),I}y(f,"fromString");function v(c){let m=c.length<0?0:E(c.length)|0,b=i(m);for(let I=0;I<m;I+=1)b[I]=c[I]&255;return b}y(v,"fromArrayLike");function u(c){if(Xe(c,Uint8Array)){let m=new Uint8Array(c);return g(m.buffer,m.byteOffset,m.byteLength)}return v(c)}y(u,"fromArrayView");function g(c,m,b){if(m<0||c.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<m+(b||0))throw new RangeError('"length" is outside of buffer bounds');let I;return m===void 0&&b===void 0?I=new Uint8Array(c):b===void 0?I=new Uint8Array(c,m):I=new Uint8Array(c,m,b),Object.setPrototypeOf(I,a.prototype),I}y(g,"fromArrayBuffer");function w(c){if(a.isBuffer(c)){let m=E(c.length)|0,b=i(m);return b.length===0||c.copy(b,0,0,m),b}if(c.length!==void 0)return typeof c.length!="number"||Mo(c.length)?i(0):v(c);if(c.type==="Buffer"&&Array.isArray(c.data))return v(c.data)}y(w,"fromObject");function E(c){if(c>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return c|0}y(E,"checked");function x(c){return+c!=c&&(c=0),a.alloc(+c)}y(x,"SlowBuffer"),a.isBuffer=y(function(c){return c!=null&&c._isBuffer===!0&&c!==a.prototype},"isBuffer"),a.compare=y(function(c,m){if(Xe(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),Xe(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(c)||!a.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===m)return 0;let b=c.length,I=m.length;for(let P=0,D=Math.min(b,I);P<D;++P)if(c[P]!==m[P]){b=c[P],I=m[P];break}return b<I?-1:I<b?1:0},"compare"),a.isEncoding=y(function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),a.concat=y(function(c,m){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return a.alloc(0);let b;if(m===void 0)for(m=0,b=0;b<c.length;++b)m+=c[b].length;let I=a.allocUnsafe(m),P=0;for(b=0;b<c.length;++b){let D=c[b];if(Xe(D,Uint8Array))P+D.length>I.length?(a.isBuffer(D)||(D=a.from(D)),D.copy(I,P)):Uint8Array.prototype.set.call(I,D,P);else if(a.isBuffer(D))D.copy(I,P);else throw new TypeError('"list" argument must be an Array of Buffers');P+=D.length}return I},"concat");function S(c,m){if(a.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||Xe(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);let b=c.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&b===0)return 0;let P=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Te(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return _n(c).length;default:if(P)return I?-1:Te(c).length;m=(""+m).toLowerCase(),P=!0}}y(S,"byteLength"),a.byteLength=S;function O(c,m,b){let I=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,m>>>=0,b<=m))return"";for(c||(c="utf8");;)switch(c){case"hex":return X(this,m,b);case"utf8":case"utf-8":return L(this,m,b);case"ascii":return W(this,m,b);case"latin1":case"binary":return Z(this,m,b);case"base64":return F(this,m,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,m,b);default:if(I)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),I=!0}}y(O,"slowToString"),a.prototype._isBuffer=!0;function M(c,m,b){let I=c[m];c[m]=c[b],c[b]=I}y(M,"swap"),a.prototype.swap16=y(function(){let c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<c;m+=2)M(this,m,m+1);return this},"swap16"),a.prototype.swap32=y(function(){let c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<c;m+=4)M(this,m,m+3),M(this,m+1,m+2);return this},"swap32"),a.prototype.swap64=y(function(){let c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<c;m+=8)M(this,m,m+7),M(this,m+1,m+6),M(this,m+2,m+5),M(this,m+3,m+4);return this},"swap64"),a.prototype.toString=y(function(){let c=this.length;return c===0?"":arguments.length===0?L(this,0,c):O.apply(this,arguments)},"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=y(function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:a.compare(this,c)===0},"equals"),a.prototype.inspect=y(function(){let c="",m=n.INSPECT_MAX_BYTES;return c=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(c+=" ... "),"<Buffer "+c+">"},"inspect"),o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=y(function(c,m,b,I,P){if(Xe(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(m===void 0&&(m=0),b===void 0&&(b=c?c.length:0),I===void 0&&(I=0),P===void 0&&(P=this.length),m<0||b>c.length||I<0||P>this.length)throw new RangeError("out of range index");if(I>=P&&m>=b)return 0;if(I>=P)return-1;if(m>=b)return 1;if(m>>>=0,b>>>=0,I>>>=0,P>>>=0,this===c)return 0;let D=P-I,H=b-m,ge=Math.min(D,H),Ae=this.slice(I,P),ke=c.slice(m,b);for(let me=0;me<ge;++me)if(Ae[me]!==ke[me]){D=Ae[me],H=ke[me];break}return D<H?-1:H<D?1:0},"compare");function C(c,m,b,I,P){if(c.length===0)return-1;if(typeof b=="string"?(I=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,Mo(b)&&(b=P?0:c.length-1),b<0&&(b=c.length+b),b>=c.length){if(P)return-1;b=c.length-1}else if(b<0)if(P)b=0;else return-1;if(typeof m=="string"&&(m=a.from(m,I)),a.isBuffer(m))return m.length===0?-1:B(c,m,b,I,P);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(c,m,b):Uint8Array.prototype.lastIndexOf.call(c,m,b):B(c,[m],b,I,P);throw new TypeError("val must be string, number or Buffer")}y(C,"bidirectionalIndexOf");function B(c,m,b,I,P){let D=1,H=c.length,ge=m.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(c.length<2||m.length<2)return-1;D=2,H/=2,ge/=2,b/=2}function Ae(me,Be){return D===1?me[Be]:me.readUInt16BE(Be*D)}y(Ae,"read");let ke;if(P){let me=-1;for(ke=b;ke<H;ke++)if(Ae(c,ke)===Ae(m,me===-1?0:ke-me)){if(me===-1&&(me=ke),ke-me+1===ge)return me*D}else me!==-1&&(ke-=ke-me),me=-1}else for(b+ge>H&&(b=H-ge),ke=b;ke>=0;ke--){let me=!0;for(let Be=0;Be<ge;Be++)if(Ae(c,ke+Be)!==Ae(m,Be)){me=!1;break}if(me)return ke}return-1}y(B,"arrayIndexOf"),a.prototype.includes=y(function(c,m,b){return this.indexOf(c,m,b)!==-1},"includes"),a.prototype.indexOf=y(function(c,m,b){return C(this,c,m,b,!0)},"indexOf"),a.prototype.lastIndexOf=y(function(c,m,b){return C(this,c,m,b,!1)},"lastIndexOf");function A(c,m,b,I){b=Number(b)||0;let P=c.length-b;I?(I=Number(I),I>P&&(I=P)):I=P;let D=m.length;I>D/2&&(I=D/2);let H;for(H=0;H<I;++H){let ge=parseInt(m.substr(H*2,2),16);if(Mo(ge))return H;c[b+H]=ge}return H}y(A,"hexWrite");function k(c,m,b,I){return lo(Te(m,c.length-b),c,b,I)}y(k,"utf8Write");function T(c,m,b,I){return lo(Ms(m),c,b,I)}y(T,"asciiWrite");function _(c,m,b,I){return lo(_n(m),c,b,I)}y(_,"base64Write");function $(c,m,b,I){return lo(Ls(m,c.length-b),c,b,I)}y($,"ucs2Write"),a.prototype.write=y(function(c,m,b,I){if(m===void 0)I="utf8",b=this.length,m=0;else if(b===void 0&&typeof m=="string")I=m,b=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(b)?(b=b>>>0,I===void 0&&(I="utf8")):(I=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let P=this.length-m;if((b===void 0||b>P)&&(b=P),c.length>0&&(b<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");let D=!1;for(;;)switch(I){case"hex":return A(this,c,m,b);case"utf8":case"utf-8":return k(this,c,m,b);case"ascii":case"latin1":case"binary":return T(this,c,m,b);case"base64":return _(this,c,m,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,c,m,b);default:if(D)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),D=!0}},"write"),a.prototype.toJSON=y(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function F(c,m,b){return m===0&&b===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(m,b))}y(F,"base64Slice");function L(c,m,b){b=Math.min(c.length,b);let I=[],P=m;for(;P<b;){let D=c[P],H=null,ge=D>239?4:D>223?3:D>191?2:1;if(P+ge<=b){let Ae,ke,me,Be;switch(ge){case 1:D<128&&(H=D);break;case 2:Ae=c[P+1],(Ae&192)===128&&(Be=(D&31)<<6|Ae&63,Be>127&&(H=Be));break;case 3:Ae=c[P+1],ke=c[P+2],(Ae&192)===128&&(ke&192)===128&&(Be=(D&15)<<12|(Ae&63)<<6|ke&63,Be>2047&&(Be<55296||Be>57343)&&(H=Be));break;case 4:Ae=c[P+1],ke=c[P+2],me=c[P+3],(Ae&192)===128&&(ke&192)===128&&(me&192)===128&&(Be=(D&15)<<18|(Ae&63)<<12|(ke&63)<<6|me&63,Be>65535&&Be<1114112&&(H=Be))}}H===null?(H=65533,ge=1):H>65535&&(H-=65536,I.push(H>>>10&1023|55296),H=56320|H&1023),I.push(H),P+=ge}return q(I)}y(L,"utf8Slice");var j=4096;function q(c){let m=c.length;if(m<=j)return String.fromCharCode.apply(String,c);let b="",I=0;for(;I<m;)b+=String.fromCharCode.apply(String,c.slice(I,I+=j));return b}y(q,"decodeCodePointsArray");function W(c,m,b){let I="";b=Math.min(c.length,b);for(let P=m;P<b;++P)I+=String.fromCharCode(c[P]&127);return I}y(W,"asciiSlice");function Z(c,m,b){let I="";b=Math.min(c.length,b);for(let P=m;P<b;++P)I+=String.fromCharCode(c[P]);return I}y(Z,"latin1Slice");function X(c,m,b){let I=c.length;(!m||m<0)&&(m=0),(!b||b<0||b>I)&&(b=I);let P="";for(let D=m;D<b;++D)P+=cc[c[D]];return P}y(X,"hexSlice");function be(c,m,b){let I=c.slice(m,b),P="";for(let D=0;D<I.length-1;D+=2)P+=String.fromCharCode(I[D]+I[D+1]*256);return P}y(be,"utf16leSlice"),a.prototype.slice=y(function(c,m){let b=this.length;c=~~c,m=m===void 0?b:~~m,c<0?(c+=b,c<0&&(c=0)):c>b&&(c=b),m<0?(m+=b,m<0&&(m=0)):m>b&&(m=b),m<c&&(m=c);let I=this.subarray(c,m);return Object.setPrototypeOf(I,a.prototype),I},"slice");function de(c,m,b){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+m>b)throw new RangeError("Trying to access beyond buffer length")}y(de,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=y(function(c,m,b){c=c>>>0,m=m>>>0,b||de(c,m,this.length);let I=this[c],P=1,D=0;for(;++D<m&&(P*=256);)I+=this[c+D]*P;return I},"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=y(function(c,m,b){c=c>>>0,m=m>>>0,b||de(c,m,this.length);let I=this[c+--m],P=1;for(;m>0&&(P*=256);)I+=this[c+--m]*P;return I},"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=y(function(c,m){return c=c>>>0,m||de(c,1,this.length),this[c]},"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=y(function(c,m){return c=c>>>0,m||de(c,2,this.length),this[c]|this[c+1]<<8},"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=y(function(c,m){return c=c>>>0,m||de(c,2,this.length),this[c]<<8|this[c+1]},"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=y(function(c,m){return c=c>>>0,m||de(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=y(function(c,m){return c=c>>>0,m||de(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},"readUInt32BE"),a.prototype.readBigUInt64LE=lt(y(function(c){c=c>>>0,ne(c,"offset");let m=this[c],b=this[c+7];(m===void 0||b===void 0)&&te(c,this.length-8);let I=m+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,P=this[++c]+this[++c]*2**8+this[++c]*2**16+b*2**24;return BigInt(I)+(BigInt(P)<<BigInt(32))},"readBigUInt64LE")),a.prototype.readBigUInt64BE=lt(y(function(c){c=c>>>0,ne(c,"offset");let m=this[c],b=this[c+7];(m===void 0||b===void 0)&&te(c,this.length-8);let I=m*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],P=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+b;return(BigInt(I)<<BigInt(32))+BigInt(P)},"readBigUInt64BE")),a.prototype.readIntLE=y(function(c,m,b){c=c>>>0,m=m>>>0,b||de(c,m,this.length);let I=this[c],P=1,D=0;for(;++D<m&&(P*=256);)I+=this[c+D]*P;return P*=128,I>=P&&(I-=Math.pow(2,8*m)),I},"readIntLE"),a.prototype.readIntBE=y(function(c,m,b){c=c>>>0,m=m>>>0,b||de(c,m,this.length);let I=m,P=1,D=this[c+--I];for(;I>0&&(P*=256);)D+=this[c+--I]*P;return P*=128,D>=P&&(D-=Math.pow(2,8*m)),D},"readIntBE"),a.prototype.readInt8=y(function(c,m){return c=c>>>0,m||de(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},"readInt8"),a.prototype.readInt16LE=y(function(c,m){c=c>>>0,m||de(c,2,this.length);let b=this[c]|this[c+1]<<8;return b&32768?b|4294901760:b},"readInt16LE"),a.prototype.readInt16BE=y(function(c,m){c=c>>>0,m||de(c,2,this.length);let b=this[c+1]|this[c]<<8;return b&32768?b|4294901760:b},"readInt16BE"),a.prototype.readInt32LE=y(function(c,m){return c=c>>>0,m||de(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},"readInt32LE"),a.prototype.readInt32BE=y(function(c,m){return c=c>>>0,m||de(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},"readInt32BE"),a.prototype.readBigInt64LE=lt(y(function(c){c=c>>>0,ne(c,"offset");let m=this[c],b=this[c+7];(m===void 0||b===void 0)&&te(c,this.length-8);let I=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(b<<24);return(BigInt(I)<<BigInt(32))+BigInt(m+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)},"readBigInt64LE")),a.prototype.readBigInt64BE=lt(y(function(c){c=c>>>0,ne(c,"offset");let m=this[c],b=this[c+7];(m===void 0||b===void 0)&&te(c,this.length-8);let I=(m<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(I)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+b)},"readBigInt64BE")),a.prototype.readFloatLE=y(function(c,m){return c=c>>>0,m||de(c,4,this.length),t.read(this,c,!0,23,4)},"readFloatLE"),a.prototype.readFloatBE=y(function(c,m){return c=c>>>0,m||de(c,4,this.length),t.read(this,c,!1,23,4)},"readFloatBE"),a.prototype.readDoubleLE=y(function(c,m){return c=c>>>0,m||de(c,8,this.length),t.read(this,c,!0,52,8)},"readDoubleLE"),a.prototype.readDoubleBE=y(function(c,m){return c=c>>>0,m||de(c,8,this.length),t.read(this,c,!1,52,8)},"readDoubleBE");function he(c,m,b,I,P,D){if(!a.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>P||m<D)throw new RangeError('"value" argument is out of bounds');if(b+I>c.length)throw new RangeError("Index out of range")}y(he,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=y(function(c,m,b,I){if(c=+c,m=m>>>0,b=b>>>0,!I){let H=Math.pow(2,8*b)-1;he(this,c,m,b,H,0)}let P=1,D=0;for(this[m]=c&255;++D<b&&(P*=256);)this[m+D]=c/P&255;return m+b},"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=y(function(c,m,b,I){if(c=+c,m=m>>>0,b=b>>>0,!I){let H=Math.pow(2,8*b)-1;he(this,c,m,b,H,0)}let P=b-1,D=1;for(this[m+P]=c&255;--P>=0&&(D*=256);)this[m+P]=c/D&255;return m+b},"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,1,255,0),this[m]=c&255,m+1},"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,2,65535,0),this[m]=c&255,this[m+1]=c>>>8,m+2},"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,2,65535,0),this[m]=c>>>8,this[m+1]=c&255,m+2},"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,4,4294967295,0),this[m+3]=c>>>24,this[m+2]=c>>>16,this[m+1]=c>>>8,this[m]=c&255,m+4},"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,4,4294967295,0),this[m]=c>>>24,this[m+1]=c>>>16,this[m+2]=c>>>8,this[m+3]=c&255,m+4},"writeUInt32BE");function Ze(c,m,b,I,P){ye(m,I,P,c,b,7);let D=Number(m&BigInt(4294967295));c[b++]=D,D=D>>8,c[b++]=D,D=D>>8,c[b++]=D,D=D>>8,c[b++]=D;let H=Number(m>>BigInt(32)&BigInt(4294967295));return c[b++]=H,H=H>>8,c[b++]=H,H=H>>8,c[b++]=H,H=H>>8,c[b++]=H,b}y(Ze,"wrtBigUInt64LE");function ot(c,m,b,I,P){ye(m,I,P,c,b,7);let D=Number(m&BigInt(4294967295));c[b+7]=D,D=D>>8,c[b+6]=D,D=D>>8,c[b+5]=D,D=D>>8,c[b+4]=D;let H=Number(m>>BigInt(32)&BigInt(4294967295));return c[b+3]=H,H=H>>8,c[b+2]=H,H=H>>8,c[b+1]=H,H=H>>8,c[b]=H,b+8}y(ot,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=lt(y(function(c,m=0){return Ze(this,c,m,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=lt(y(function(c,m=0){return ot(this,c,m,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),a.prototype.writeIntLE=y(function(c,m,b,I){if(c=+c,m=m>>>0,!I){let ge=Math.pow(2,8*b-1);he(this,c,m,b,ge-1,-ge)}let P=0,D=1,H=0;for(this[m]=c&255;++P<b&&(D*=256);)c<0&&H===0&&this[m+P-1]!==0&&(H=1),this[m+P]=(c/D>>0)-H&255;return m+b},"writeIntLE"),a.prototype.writeIntBE=y(function(c,m,b,I){if(c=+c,m=m>>>0,!I){let ge=Math.pow(2,8*b-1);he(this,c,m,b,ge-1,-ge)}let P=b-1,D=1,H=0;for(this[m+P]=c&255;--P>=0&&(D*=256);)c<0&&H===0&&this[m+P+1]!==0&&(H=1),this[m+P]=(c/D>>0)-H&255;return m+b},"writeIntBE"),a.prototype.writeInt8=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,1,127,-128),c<0&&(c=255+c+1),this[m]=c&255,m+1},"writeInt8"),a.prototype.writeInt16LE=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,2,32767,-32768),this[m]=c&255,this[m+1]=c>>>8,m+2},"writeInt16LE"),a.prototype.writeInt16BE=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,2,32767,-32768),this[m]=c>>>8,this[m+1]=c&255,m+2},"writeInt16BE"),a.prototype.writeInt32LE=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,4,2147483647,-2147483648),this[m]=c&255,this[m+1]=c>>>8,this[m+2]=c>>>16,this[m+3]=c>>>24,m+4},"writeInt32LE"),a.prototype.writeInt32BE=y(function(c,m,b){return c=+c,m=m>>>0,b||he(this,c,m,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[m]=c>>>24,this[m+1]=c>>>16,this[m+2]=c>>>8,this[m+3]=c&255,m+4},"writeInt32BE"),a.prototype.writeBigInt64LE=lt(y(function(c,m=0){return Ze(this,c,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),a.prototype.writeBigInt64BE=lt(y(function(c,m=0){return ot(this,c,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function mt(c,m,b,I,P,D){if(b+I>c.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}y(mt,"checkIEEE754");function nt(c,m,b,I,P){return m=+m,b=b>>>0,P||mt(c,m,b,4),t.write(c,m,b,I,23,4),b+4}y(nt,"writeFloat"),a.prototype.writeFloatLE=y(function(c,m,b){return nt(this,c,m,!0,b)},"writeFloatLE"),a.prototype.writeFloatBE=y(function(c,m,b){return nt(this,c,m,!1,b)},"writeFloatBE");function N(c,m,b,I,P){return m=+m,b=b>>>0,P||mt(c,m,b,8),t.write(c,m,b,I,52,8),b+8}y(N,"writeDouble"),a.prototype.writeDoubleLE=y(function(c,m,b){return N(this,c,m,!0,b)},"writeDoubleLE"),a.prototype.writeDoubleBE=y(function(c,m,b){return N(this,c,m,!1,b)},"writeDoubleBE"),a.prototype.copy=y(function(c,m,b,I){if(!a.isBuffer(c))throw new TypeError("argument should be a Buffer");if(b||(b=0),!I&&I!==0&&(I=this.length),m>=c.length&&(m=c.length),m||(m=0),I>0&&I<b&&(I=b),I===b||c.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),c.length-m<I-b&&(I=c.length-m+b);let P=I-b;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(m,b,I):Uint8Array.prototype.set.call(c,this.subarray(b,I),m),P},"copy"),a.prototype.fill=y(function(c,m,b,I){if(typeof c=="string"){if(typeof m=="string"?(I=m,m=0,b=this.length):typeof b=="string"&&(I=b,b=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!a.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(c.length===1){let D=c.charCodeAt(0);(I==="utf8"&&D<128||I==="latin1")&&(c=D)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(m<0||this.length<m||this.length<b)throw new RangeError("Out of range index");if(b<=m)return this;m=m>>>0,b=b===void 0?this.length:b>>>0,c||(c=0);let P;if(typeof c=="number")for(P=m;P<b;++P)this[P]=c;else{let D=a.isBuffer(c)?c:a.from(c,I),H=D.length;if(H===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(P=0;P<b-m;++P)this[P+m]=D[P%H]}return this},"fill");var z={};function V(c,m,b){var I;z[c]=(I=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}},y(I,"NodeError"),I)}y(V,"E"),V("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),V("ERR_INVALID_ARG_TYPE",function(c,m){return`The "${c}" argument must be of type number. Received type ${typeof m}`},TypeError),V("ERR_OUT_OF_RANGE",function(c,m,b){let I=`The value of "${c}" is out of range.`,P=b;return Number.isInteger(b)&&Math.abs(b)>2**32?P=Q(String(b)):typeof b=="bigint"&&(P=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(P=Q(P)),P+="n"),I+=` It must be ${m}. Received ${P}`,I},RangeError);function Q(c){let m="",b=c.length,I=c[0]==="-"?1:0;for(;b>=I+4;b-=3)m=`_${c.slice(b-3,b)}${m}`;return`${c.slice(0,b)}${m}`}y(Q,"addNumericalSeparator");function ue(c,m,b){ne(m,"offset"),(c[m]===void 0||c[m+b]===void 0)&&te(m,c.length-(b+1))}y(ue,"checkBounds");function ye(c,m,b,I,P,D){if(c>b||c<m){let H=typeof m=="bigint"?"n":"",ge;throw D>3?m===0||m===BigInt(0)?ge=`>= 0${H} and < 2${H} ** ${(D+1)*8}${H}`:ge=`>= -(2${H} ** ${(D+1)*8-1}${H}) and < 2 ** ${(D+1)*8-1}${H}`:ge=`>= ${m}${H} and <= ${b}${H}`,new z.ERR_OUT_OF_RANGE("value",ge,c)}ue(I,P,D)}y(ye,"checkIntBI");function ne(c,m){if(typeof c!="number")throw new z.ERR_INVALID_ARG_TYPE(m,"number",c)}y(ne,"validateNumber");function te(c,m,b){throw Math.floor(c)!==c?(ne(c,b),new z.ERR_OUT_OF_RANGE(b||"offset","an integer",c)):m<0?new z.ERR_BUFFER_OUT_OF_BOUNDS:new z.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${m}`,c)}y(te,"boundsError");var we=/[^+/0-9A-Za-z-_]/g;function rt(c){if(c=c.split("=")[0],c=c.trim().replace(we,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}y(rt,"base64clean");function Te(c,m){m=m||1/0;let b,I=c.length,P=null,D=[];for(let H=0;H<I;++H){if(b=c.charCodeAt(H),b>55295&&b<57344){if(!P){if(b>56319){(m-=3)>-1&&D.push(239,191,189);continue}else if(H+1===I){(m-=3)>-1&&D.push(239,191,189);continue}P=b;continue}if(b<56320){(m-=3)>-1&&D.push(239,191,189),P=b;continue}b=(P-55296<<10|b-56320)+65536}else P&&(m-=3)>-1&&D.push(239,191,189);if(P=null,b<128){if((m-=1)<0)break;D.push(b)}else if(b<2048){if((m-=2)<0)break;D.push(b>>6|192,b&63|128)}else if(b<65536){if((m-=3)<0)break;D.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((m-=4)<0)break;D.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return D}y(Te,"utf8ToBytes");function Ms(c){let m=[];for(let b=0;b<c.length;++b)m.push(c.charCodeAt(b)&255);return m}y(Ms,"asciiToBytes");function Ls(c,m){let b,I,P,D=[];for(let H=0;H<c.length&&!((m-=2)<0);++H)b=c.charCodeAt(H),I=b>>8,P=b%256,D.push(P),D.push(I);return D}y(Ls,"utf16leToBytes");function _n(c){return e.toByteArray(rt(c))}y(_n,"base64ToBytes");function lo(c,m,b,I){let P;for(P=0;P<I&&!(P+b>=m.length||P>=c.length);++P)m[P+b]=c[P];return P}y(lo,"blitBuffer");function Xe(c,m){return c instanceof m||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===m.name}y(Xe,"isInstance");function Mo(c){return c!==c}y(Mo,"numberIsNaN");var cc=function(){let c="0123456789abcdef",m=new Array(256);for(let b=0;b<16;++b){let I=b*16;for(let P=0;P<16;++P)m[I+P]=c[b]+c[P]}return m}();function lt(c){return typeof BigInt>"u"?Rs:c}y(lt,"defineBigIntMethod");function Rs(){throw new Error("BigInt not supported")}y(Rs,"BufferBigIntNotDefined")}),cn,yr,Re,J,se,K=Ue(()=>{cn=globalThis,yr=globalThis.setImmediate??(n=>setTimeout(n,0)),Re=globalThis.crypto??{},Re.subtle??(Re.subtle={}),J=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:cd().Buffer,se=globalThis.process??{},se.env??(se.env={});try{se.nextTick(()=>{})}catch{let n=Promise.resolve();se.nextTick=n.then.bind(n)}}),Ft=ie((n,e)=>{K();var t=typeof Reflect=="object"?Reflect:null,o=t&&typeof t.apply=="function"?t.apply:y(function(C,B,A){return Function.prototype.apply.call(C,B,A)},"ReflectApply"),r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=y(function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))},"ReflectOwnKeys"):r=y(function(C){return Object.getOwnPropertyNames(C)},"ReflectOwnKeys");function s(C){console&&console.warn&&console.warn(C)}y(s,"ProcessEmitWarning");var i=Number.isNaN||y(function(C){return C!==C},"NumberIsNaN");function a(){a.init.call(this)}y(a,"EventEmitter"),e.exports=a,e.exports.once=S,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function h(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}y(h,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:y(function(){return l},"get"),set:y(function(C){if(typeof C!="number"||C<0||i(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");l=C},"set")}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=y(function(C){if(typeof C!="number"||C<0||i(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this},"setMaxListeners");function d(C){return C._maxListeners===void 0?a.defaultMaxListeners:C._maxListeners}y(d,"_getMaxListeners"),a.prototype.getMaxListeners=y(function(){return d(this)},"getMaxListeners"),a.prototype.emit=y(function(C){for(var B=[],A=1;A<arguments.length;A++)B.push(arguments[A]);var k=C==="error",T=this._events;if(T!==void 0)k=k&&T.error===void 0;else if(!k)return!1;if(k){var _;if(B.length>0&&(_=B[0]),_ instanceof Error)throw _;var $=new Error("Unhandled error."+(_?" ("+_.message+")":""));throw $.context=_,$}var F=T[C];if(F===void 0)return!1;if(typeof F=="function")o(F,this,B);else for(var L=F.length,j=w(F,L),A=0;A<L;++A)o(j[A],this,B);return!0},"emit");function p(C,B,A,k){var T,_,$;if(h(A),_=C._events,_===void 0?(_=C._events=Object.create(null),C._eventsCount=0):(_.newListener!==void 0&&(C.emit("newListener",B,A.listener?A.listener:A),_=C._events),$=_[B]),$===void 0)$=_[B]=A,++C._eventsCount;else if(typeof $=="function"?$=_[B]=k?[A,$]:[$,A]:k?$.unshift(A):$.push(A),T=d(C),T>0&&$.length>T&&!$.warned){$.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=C,F.type=B,F.count=$.length,s(F)}return C}y(p,"_addListener"),a.prototype.addListener=y(function(C,B){return p(this,C,B,!1)},"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=y(function(C,B){return p(this,C,B,!0)},"prependListener");function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}y(f,"onceWrapper");function v(C,B,A){var k={fired:!1,wrapFn:void 0,target:C,type:B,listener:A},T=f.bind(k);return T.listener=A,k.wrapFn=T,T}y(v,"_onceWrap"),a.prototype.once=y(function(C,B){return h(B),this.on(C,v(this,C,B)),this},"once"),a.prototype.prependOnceListener=y(function(C,B){return h(B),this.prependListener(C,v(this,C,B)),this},"prependOnceListener"),a.prototype.removeListener=y(function(C,B){var A,k,T,_,$;if(h(B),k=this._events,k===void 0)return this;if(A=k[C],A===void 0)return this;if(A===B||A.listener===B)--this._eventsCount===0?this._events=Object.create(null):(delete k[C],k.removeListener&&this.emit("removeListener",C,A.listener||B));else if(typeof A!="function"){for(T=-1,_=A.length-1;_>=0;_--)if(A[_]===B||A[_].listener===B){$=A[_].listener,T=_;break}if(T<0)return this;T===0?A.shift():E(A,T),A.length===1&&(k[C]=A[0]),k.removeListener!==void 0&&this.emit("removeListener",C,$||B)}return this},"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=y(function(C){var B,A,k;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[C]),this;if(arguments.length===0){var T=Object.keys(A),_;for(k=0;k<T.length;++k)_=T[k],_!=="removeListener"&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=A[C],typeof B=="function")this.removeListener(C,B);else if(B!==void 0)for(k=B.length-1;k>=0;k--)this.removeListener(C,B[k]);return this},"removeAllListeners");function u(C,B,A){var k=C._events;if(k===void 0)return[];var T=k[B];return T===void 0?[]:typeof T=="function"?A?[T.listener||T]:[T]:A?x(T):w(T,T.length)}y(u,"_listeners"),a.prototype.listeners=y(function(C){return u(this,C,!0)},"listeners"),a.prototype.rawListeners=y(function(C){return u(this,C,!1)},"rawListeners"),a.listenerCount=function(C,B){return typeof C.listenerCount=="function"?C.listenerCount(B):g.call(C,B)},a.prototype.listenerCount=g;function g(C){var B=this._events;if(B!==void 0){var A=B[C];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}y(g,"listenerCount"),a.prototype.eventNames=y(function(){return this._eventsCount>0?r(this._events):[]},"eventNames");function w(C,B){for(var A=new Array(B),k=0;k<B;++k)A[k]=C[k];return A}y(w,"arrayClone");function E(C,B){for(;B+1<C.length;B++)C[B]=C[B+1];C.pop()}y(E,"spliceOne");function x(C){for(var B=new Array(C.length),A=0;A<B.length;++A)B[A]=C[A].listener||C[A];return B}y(x,"unwrapListeners");function S(C,B){return new Promise(function(A,k){function T($){C.removeListener(B,_),k($)}y(T,"errorListener");function _(){typeof C.removeListener=="function"&&C.removeListener("error",T),A([].slice.call(arguments))}y(_,"resolver"),M(C,B,_,{once:!0}),B!=="error"&&O(C,T,{once:!0})})}y(S,"once");function O(C,B,A){typeof C.on=="function"&&M(C,"error",B,A)}y(O,"addErrorHandlerIfEventEmitter");function M(C,B,A,k){if(typeof C.on=="function")k.once?C.once(B,A):C.on(B,A);else if(typeof C.addEventListener=="function")C.addEventListener(B,y(function T(_){k.once&&C.removeEventListener(B,T),A(_)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}y(M,"eventTargetAgnosticAddListener")}),Io={};tt(Io,{default:()=>sa});var sa,un=Ue(()=>{K(),sa={}});function yo(n){let e=1779033703,t=3144134277,o=1013904242,r=2773480762,s=1359893119,i=2600822924,a=528734635,l=1541459225,h=0,d=0,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=y((x,S)=>x>>>S|x<<32-S,"rrot"),v=new Uint32Array(64),u=new Uint8Array(64),g=y(()=>{for(let T=0,_=0;T<16;T++,_+=4)v[T]=u[_]<<24|u[_+1]<<16|u[_+2]<<8|u[_+3];for(let T=16;T<64;T++){let _=f(v[T-15],7)^f(v[T-15],18)^v[T-15]>>>3,$=f(v[T-2],17)^f(v[T-2],19)^v[T-2]>>>10;v[T]=v[T-16]+_+v[T-7]+$|0}let x=e,S=t,O=o,M=r,C=s,B=i,A=a,k=l;for(let T=0;T<64;T++){let _=f(C,6)^f(C,11)^f(C,25),$=C&B^~C&A,F=k+_+$+p[T]+v[T]|0,L=f(x,2)^f(x,13)^f(x,22),j=x&S^x&O^S&O,q=L+j|0;k=A,A=B,B=C,C=M+F|0,M=O,O=S,S=x,x=F+q|0}e=e+x|0,t=t+S|0,o=o+O|0,r=r+M|0,s=s+C|0,i=i+B|0,a=a+A|0,l=l+k|0,d=0},"process"),w=y(x=>{typeof x=="string"&&(x=new TextEncoder().encode(x));for(let S=0;S<x.length;S++)u[d++]=x[S],d===64&&g();h+=x.length},"add"),E=y(()=>{if(u[d++]=128,d==64&&g(),d+8>64){for(;d<64;)u[d++]=0;g()}for(;d<58;)u[d++]=0;let x=h*8;u[d++]=x/1099511627776&255,u[d++]=x/4294967296&255,u[d++]=x>>>24,u[d++]=x>>>16&255,u[d++]=x>>>8&255,u[d++]=x&255,g();let S=new Uint8Array(32);return S[0]=e>>>24,S[1]=e>>>16&255,S[2]=e>>>8&255,S[3]=e&255,S[4]=t>>>24,S[5]=t>>>16&255,S[6]=t>>>8&255,S[7]=t&255,S[8]=o>>>24,S[9]=o>>>16&255,S[10]=o>>>8&255,S[11]=o&255,S[12]=r>>>24,S[13]=r>>>16&255,S[14]=r>>>8&255,S[15]=r&255,S[16]=s>>>24,S[17]=s>>>16&255,S[18]=s>>>8&255,S[19]=s&255,S[20]=i>>>24,S[21]=i>>>16&255,S[22]=i>>>8&255,S[23]=i&255,S[24]=a>>>24,S[25]=a>>>16&255,S[26]=a>>>8&255,S[27]=a&255,S[28]=l>>>24,S[29]=l>>>16&255,S[30]=l>>>8&255,S[31]=l&255,S},"digest");return n===void 0?{add:w,digest:E}:(w(n),E())}var ud=Ue(()=>{K(),y(yo,"sha256")}),ut,Xn,dd=Ue(()=>{K(),ut=class Qe{constructor(){ee(this,"_dataLength",0),ee(this,"_bufferLength",0),ee(this,"_state",new Int32Array(4)),ee(this,"_buffer",new ArrayBuffer(68)),ee(this,"_buffer8"),ee(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t=Qe.hexChars,o=Qe.hexOut,r,s,i,a;for(a=0;a<4;a+=1)for(s=a*8,r=e[a],i=0;i<8;i+=2)o[s+1+i]=t.charAt(r&15),r>>>=4,o[s+0+i]=t.charAt(r&15),r>>>=4;return o.join("")}static _md5cycle(e,t){let o=e[0],r=e[1],s=e[2],i=e[3];o+=(r&s|~r&i)+t[0]-680876936|0,o=(o<<7|o>>>25)+r|0,i+=(o&r|~o&s)+t[1]-389564586|0,i=(i<<12|i>>>20)+o|0,s+=(i&o|~i&r)+t[2]+606105819|0,s=(s<<17|s>>>15)+i|0,r+=(s&i|~s&o)+t[3]-1044525330|0,r=(r<<22|r>>>10)+s|0,o+=(r&s|~r&i)+t[4]-176418897|0,o=(o<<7|o>>>25)+r|0,i+=(o&r|~o&s)+t[5]+1200080426|0,i=(i<<12|i>>>20)+o|0,s+=(i&o|~i&r)+t[6]-1473231341|0,s=(s<<17|s>>>15)+i|0,r+=(s&i|~s&o)+t[7]-45705983|0,r=(r<<22|r>>>10)+s|0,o+=(r&s|~r&i)+t[8]+1770035416|0,o=(o<<7|o>>>25)+r|0,i+=(o&r|~o&s)+t[9]-1958414417|0,i=(i<<12|i>>>20)+o|0,s+=(i&o|~i&r)+t[10]-42063|0,s=(s<<17|s>>>15)+i|0,r+=(s&i|~s&o)+t[11]-1990404162|0,r=(r<<22|r>>>10)+s|0,o+=(r&s|~r&i)+t[12]+1804603682|0,o=(o<<7|o>>>25)+r|0,i+=(o&r|~o&s)+t[13]-40341101|0,i=(i<<12|i>>>20)+o|0,s+=(i&o|~i&r)+t[14]-1502002290|0,s=(s<<17|s>>>15)+i|0,r+=(s&i|~s&o)+t[15]+1236535329|0,r=(r<<22|r>>>10)+s|0,o+=(r&i|s&~i)+t[1]-165796510|0,o=(o<<5|o>>>27)+r|0,i+=(o&s|r&~s)+t[6]-1069501632|0,i=(i<<9|i>>>23)+o|0,s+=(i&r|o&~r)+t[11]+643717713|0,s=(s<<14|s>>>18)+i|0,r+=(s&o|i&~o)+t[0]-373897302|0,r=(r<<20|r>>>12)+s|0,o+=(r&i|s&~i)+t[5]-701558691|0,o=(o<<5|o>>>27)+r|0,i+=(o&s|r&~s)+t[10]+38016083|0,i=(i<<9|i>>>23)+o|0,s+=(i&r|o&~r)+t[15]-660478335|0,s=(s<<14|s>>>18)+i|0,r+=(s&o|i&~o)+t[4]-405537848|0,r=(r<<20|r>>>12)+s|0,o+=(r&i|s&~i)+t[9]+568446438|0,o=(o<<5|o>>>27)+r|0,i+=(o&s|r&~s)+t[14]-1019803690|0,i=(i<<9|i>>>23)+o|0,s+=(i&r|o&~r)+t[3]-187363961|0,s=(s<<14|s>>>18)+i|0,r+=(s&o|i&~o)+t[8]+1163531501|0,r=(r<<20|r>>>12)+s|0,o+=(r&i|s&~i)+t[13]-1444681467|0,o=(o<<5|o>>>27)+r|0,i+=(o&s|r&~s)+t[2]-51403784|0,i=(i<<9|i>>>23)+o|0,s+=(i&r|o&~r)+t[7]+1735328473|0,s=(s<<14|s>>>18)+i|0,r+=(s&o|i&~o)+t[12]-1926607734|0,r=(r<<20|r>>>12)+s|0,o+=(r^s^i)+t[5]-378558|0,o=(o<<4|o>>>28)+r|0,i+=(o^r^s)+t[8]-2022574463|0,i=(i<<11|i>>>21)+o|0,s+=(i^o^r)+t[11]+1839030562|0,s=(s<<16|s>>>16)+i|0,r+=(s^i^o)+t[14]-35309556|0,r=(r<<23|r>>>9)+s|0,o+=(r^s^i)+t[1]-1530992060|0,o=(o<<4|o>>>28)+r|0,i+=(o^r^s)+t[4]+1272893353|0,i=(i<<11|i>>>21)+o|0,s+=(i^o^r)+t[7]-155497632|0,s=(s<<16|s>>>16)+i|0,r+=(s^i^o)+t[10]-1094730640|0,r=(r<<23|r>>>9)+s|0,o+=(r^s^i)+t[13]+681279174|0,o=(o<<4|o>>>28)+r|0,i+=(o^r^s)+t[0]-358537222|0,i=(i<<11|i>>>21)+o|0,s+=(i^o^r)+t[3]-722521979|0,s=(s<<16|s>>>16)+i|0,r+=(s^i^o)+t[6]+76029189|0,r=(r<<23|r>>>9)+s|0,o+=(r^s^i)+t[9]-640364487|0,o=(o<<4|o>>>28)+r|0,i+=(o^r^s)+t[12]-421815835|0,i=(i<<11|i>>>21)+o|0,s+=(i^o^r)+t[15]+530742520|0,s=(s<<16|s>>>16)+i|0,r+=(s^i^o)+t[2]-995338651|0,r=(r<<23|r>>>9)+s|0,o+=(s^(r|~i))+t[0]-198630844|0,o=(o<<6|o>>>26)+r|0,i+=(r^(o|~s))+t[7]+1126891415|0,i=(i<<10|i>>>22)+o|0,s+=(o^(i|~r))+t[14]-1416354905|0,s=(s<<15|s>>>17)+i|0,r+=(i^(s|~o))+t[5]-57434055|0,r=(r<<21|r>>>11)+s|0,o+=(s^(r|~i))+t[12]+1700485571|0,o=(o<<6|o>>>26)+r|0,i+=(r^(o|~s))+t[3]-1894986606|0,i=(i<<10|i>>>22)+o|0,s+=(o^(i|~r))+t[10]-1051523|0,s=(s<<15|s>>>17)+i|0,r+=(i^(s|~o))+t[1]-2054922799|0,r=(r<<21|r>>>11)+s|0,o+=(s^(r|~i))+t[8]+1873313359|0,o=(o<<6|o>>>26)+r|0,i+=(r^(o|~s))+t[15]-30611744|0,i=(i<<10|i>>>22)+o|0,s+=(o^(i|~r))+t[6]-1560198380|0,s=(s<<15|s>>>17)+i|0,r+=(i^(s|~o))+t[13]+1309151649|0,r=(r<<21|r>>>11)+s|0,o+=(s^(r|~i))+t[4]-145523070|0,o=(o<<6|o>>>26)+r|0,i+=(r^(o|~s))+t[11]-1120210379|0,i=(i<<10|i>>>22)+o|0,s+=(o^(i|~r))+t[2]+718787259|0,s=(s<<15|s>>>17)+i|0,r+=(i^(s|~o))+t[9]-343485551|0,r=(r<<21|r>>>11)+s|0,e[0]=o+e[0]|0,e[1]=r+e[1]|0,e[2]=s+e[2]|0,e[3]=i+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Qe.stateIdentity),this}appendStr(e){let t=this._buffer8,o=this._buffer32,r=this._bufferLength,s,i;for(i=0;i<e.length;i+=1){if(s=e.charCodeAt(i),s<128)t[r++]=s;else if(s<2048)t[r++]=(s>>>6)+192,t[r++]=s&63|128;else if(s<55296||s>56319)t[r++]=(s>>>12)+224,t[r++]=s>>>6&63|128,t[r++]=s&63|128;else{if(s=(s-55296)*1024+(e.charCodeAt(++i)-56320)+65536,s>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[r++]=(s>>>18)+240,t[r++]=s>>>12&63|128,t[r++]=s>>>6&63|128,t[r++]=s&63|128}r>=64&&(this._dataLength+=64,Qe._md5cycle(this._state,o),r-=64,o[0]=o[16])}return this._bufferLength=r,this}appendAsciiStr(e){let t=this._buffer8,o=this._buffer32,r=this._bufferLength,s,i=0;for(;;){for(s=Math.min(e.length-i,64-r);s--;)t[r++]=e.charCodeAt(i++);if(r<64)break;this._dataLength+=64,Qe._md5cycle(this._state,o),r=0}return this._bufferLength=r,this}appendByteArray(e){let t=this._buffer8,o=this._buffer32,r=this._bufferLength,s,i=0;for(;;){for(s=Math.min(e.length-i,64-r);s--;)t[r++]=e[i++];if(r<64)break;this._dataLength+=64,Qe._md5cycle(this._state,o),r=0}return this._bufferLength=r,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,o=e.state,r=this._state,s;for(this._dataLength=e.length,this._bufferLength=e.buflen,r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],s=0;s<t.length;s+=1)this._buffer8[s]=t.charCodeAt(s)}end(e=!1){let t=this._bufferLength,o=this._buffer8,r=this._buffer32,s=(t>>2)+1;this._dataLength+=t;let i=this._dataLength*8;if(o[t]=128,o[t+1]=o[t+2]=o[t+3]=0,r.set(Qe.buffer32Identity.subarray(s),s),t>55&&(Qe._md5cycle(this._state,r),r.set(Qe.buffer32Identity)),i<=4294967295)r[14]=i;else{let a=i.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;let l=parseInt(a[2],16),h=parseInt(a[1],16)||0;r[14]=l,r[15]=h}return Qe._md5cycle(this._state,r),e?this._state:Qe._hex(this._state)}},y(ut,"Md5"),ee(ut,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),ee(ut,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),ee(ut,"hexChars","0123456789abcdef"),ee(ut,"hexOut",[]),ee(ut,"onePassHasher",new ut),Xn=ut}),wr={};tt(wr,{createHash:()=>aa,createHmac:()=>la,randomBytes:()=>ia});function ia(n){return Re.getRandomValues(J.alloc(n))}function aa(n){if(n==="sha256")return{update:y(function(e){return{digest:y(function(){return J.from(yo(e))},"digest")}},"update")};if(n==="md5")return{update:y(function(e){return{digest:y(function(){return typeof e=="string"?Xn.hashStr(e):Xn.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${n}' not supported`)}function la(n,e){if(n!=="sha256")throw new Error(`Only sha256 is supported (requested: '${n}')`);return{update:y(function(t){return{digest:y(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof t=="string"&&(t=new TextEncoder().encode(t));let o=e.length;if(o>64)e=yo(e);else if(o<64){let l=new Uint8Array(64);l.set(e),e=l}let r=new Uint8Array(64),s=new Uint8Array(64);for(let l=0;l<64;l++)r[l]=54^e[l],s[l]=92^e[l];let i=new Uint8Array(t.length+64);i.set(r,0),i.set(t,64);let a=new Uint8Array(96);return a.set(s,0),a.set(yo(i),64),J.from(yo(a))},"digest")}},"update")}}var ca=Ue(()=>{K(),ud(),dd(),y(ia,"randomBytes"),y(aa,"createHash"),y(la,"createHmac")}),ua=ie(n=>{K(),n.parse=function(r,s){return new t(r,s).parse()};var e=class da{constructor(s,i){this.source=s,this.transform=i||o,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var s=this.source[this.position++];return s==="\\"?{value:this.source[this.position++],escaped:!0}:{value:s,escaped:!1}}record(s){this.recorded.push(s)}newEntry(s){var i;(this.recorded.length>0||s)&&(i=this.recorded.join(""),i==="NULL"&&!s&&(i=null),i!==null&&(i=this.transform(i)),this.entries.push(i),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var s=this.nextCharacter();if(s.value==="=")break}}parse(s){var i,a,l;for(this.consumeDimensions();!this.isEof();)if(i=this.nextCharacter(),i.value==="{"&&!l)this.dimension++,this.dimension>1&&(a=new da(this.source.substr(this.position-1),this.transform),this.entries.push(a.parse(!0)),this.position+=a.position-2);else if(i.value==="}"&&!l){if(this.dimension--,!this.dimension&&(this.newEntry(),s))return this.entries}else i.value==='"'&&!i.escaped?(l&&this.newEntry(!0),l=!l):i.value===","&&!l?this.newEntry():this.record(i.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};y(e,"ArrayParser");var t=e;function o(r){return r}y(o,"identity")}),ha=ie((n,e)=>{K();var t=ua();e.exports={create:y(function(o,r){return{parse:y(function(){return t.parse(o,r)},"parse")}},"create")}}),hd=ie((n,e)=>{K();var t=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,o=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,r=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,s=/^-?infinity$/;e.exports=y(function(d){if(s.test(d))return Number(d.replace("i","I"));var p=t.exec(d);if(!p)return i(d)||null;var f=!!p[8],v=parseInt(p[1],10);f&&(v=l(v));var u=parseInt(p[2],10)-1,g=p[3],w=parseInt(p[4],10),E=parseInt(p[5],10),x=parseInt(p[6],10),S=p[7];S=S?1e3*parseFloat(S):0;var O,M=a(d);return M!=null?(O=new Date(Date.UTC(v,u,g,w,E,x,S)),h(v)&&O.setUTCFullYear(v),M!==0&&O.setTime(O.getTime()-M)):(O=new Date(v,u,g,w,E,x,S),h(v)&&O.setFullYear(v)),O},"parseDate");function i(d){var p=o.exec(d);if(p){var f=parseInt(p[1],10),v=!!p[4];v&&(f=l(f));var u=parseInt(p[2],10)-1,g=p[3],w=new Date(f,u,g);return h(f)&&w.setFullYear(f),w}}y(i,"getDate");function a(d){if(d.endsWith("+00"))return 0;var p=r.exec(d.split(" ")[1]);if(p){var f=p[1];if(f==="Z")return 0;var v=f==="-"?-1:1,u=parseInt(p[2],10)*3600+parseInt(p[3]||0,10)*60+parseInt(p[4]||0,10);return u*v*1e3}}y(a,"timeZoneOffset");function l(d){return-(d-1)}y(l,"bcYearToNegativeYear");function h(d){return d>=0&&d<100}y(h,"is0To99")}),pd=ie((n,e)=>{K(),e.exports=o;var t=Object.prototype.hasOwnProperty;function o(r){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var a in i)t.call(i,a)&&(r[a]=i[a])}return r}y(o,"extend")}),fd=ie((n,e)=>{K();var t=pd();e.exports=o;function o(x){if(!(this instanceof o))return new o(x);t(this,E(x))}y(o,"PostgresInterval");var r=["seconds","minutes","hours","days","months","years"];o.prototype.toPostgres=function(){var x=r.filter(this.hasOwnProperty,this);return this.milliseconds&&x.indexOf("seconds")<0&&x.push("seconds"),x.length===0?"0":x.map(function(S){var O=this[S]||0;return S==="seconds"&&this.milliseconds&&(O=(O+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),O+" "+S},this).join(" ")};var s={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},i=["years","months","days"],a=["hours","minutes","seconds"];o.prototype.toISOString=o.prototype.toISO=function(){var x=i.map(O,this).join(""),S=a.map(O,this).join("");return"P"+x+"T"+S;function O(M){var C=this[M]||0;return M==="seconds"&&this.milliseconds&&(C=(C+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),C+s[M]}};var l="([+-]?\\d+)",h=l+"\\s+years?",d=l+"\\s+mons?",p=l+"\\s+days?",f="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",v=new RegExp([h,d,p,f].map(function(x){return"("+x+")?"}).join("\\s*")),u={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},g=["hours","minutes","seconds","milliseconds"];function w(x){var S=x+"000000".slice(x.length);return parseInt(S,10)/1e3}y(w,"parseMilliseconds");function E(x){if(!x)return{};var S=v.exec(x),O=S[8]==="-";return Object.keys(u).reduce(function(M,C){var B=u[C],A=S[B];return!A||(A=C==="milliseconds"?w(A):parseInt(A,10),!A)||(O&&~g.indexOf(C)&&(A*=-1),M[C]=A),M},{})}y(E,"parse")}),gd=ie((n,e)=>{K(),e.exports=y(function(t){if(/^\\x/.test(t))return new J(t.substr(2),"hex");for(var o="",r=0;r<t.length;)if(t[r]!=="\\")o+=t[r],++r;else if(/[0-7]{3}/.test(t.substr(r+1,3)))o+=String.fromCharCode(parseInt(t.substr(r+1,3),8)),r+=4;else{for(var s=1;r+s<t.length&&t[r+s]==="\\";)s++;for(var i=0;i<Math.floor(s/2);++i)o+="\\";r+=Math.floor(s/2)*2}return new J(o,"binary")},"parseBytea")}),md=ie((n,e)=>{K();var t=ua(),o=ha(),r=hd(),s=fd(),i=gd();function a(k){return y(function(T){return T===null?T:k(T)},"nullAllowed")}y(a,"allowNull");function l(k){return k===null?k:k==="TRUE"||k==="t"||k==="true"||k==="y"||k==="yes"||k==="on"||k==="1"}y(l,"parseBool");function h(k){return k?t.parse(k,l):null}y(h,"parseBoolArray");function d(k){return parseInt(k,10)}y(d,"parseBaseTenInt");function p(k){return k?t.parse(k,a(d)):null}y(p,"parseIntegerArray");function f(k){return k?t.parse(k,a(function(T){return O(T).trim()})):null}y(f,"parseBigIntegerArray");var v=y(function(k){if(!k)return null;var T=o.create(k,function(_){return _!==null&&(_=C(_)),_});return T.parse()},"parsePointArray"),u=y(function(k){if(!k)return null;var T=o.create(k,function(_){return _!==null&&(_=parseFloat(_)),_});return T.parse()},"parseFloatArray"),g=y(function(k){if(!k)return null;var T=o.create(k);return T.parse()},"parseStringArray"),w=y(function(k){if(!k)return null;var T=o.create(k,function(_){return _!==null&&(_=r(_)),_});return T.parse()},"parseDateArray"),E=y(function(k){if(!k)return null;var T=o.create(k,function(_){return _!==null&&(_=s(_)),_});return T.parse()},"parseIntervalArray"),x=y(function(k){return k?t.parse(k,a(i)):null},"parseByteAArray"),S=y(function(k){return parseInt(k,10)},"parseInteger"),O=y(function(k){var T=String(k);return/^\d+$/.test(T)?T:k},"parseBigInteger"),M=y(function(k){return k?t.parse(k,a(JSON.parse)):null},"parseJsonArray"),C=y(function(k){return k[0]!=="("?null:(k=k.substring(1,k.length-1).split(","),{x:parseFloat(k[0]),y:parseFloat(k[1])})},"parsePoint"),B=y(function(k){if(k[0]!=="<"&&k[1]!=="(")return null;for(var T="(",_="",$=!1,F=2;F<k.length-1;F++){if($||(T+=k[F]),k[F]===")"){$=!0;continue}else if(!$)continue;k[F]!==","&&(_+=k[F])}var L=C(T);return L.radius=parseFloat(_),L},"parseCircle"),A=y(function(k){k(20,O),k(21,S),k(23,S),k(26,S),k(700,parseFloat),k(701,parseFloat),k(16,l),k(1082,r),k(1114,r),k(1184,r),k(600,C),k(651,g),k(718,B),k(1e3,h),k(1001,x),k(1005,p),k(1007,p),k(1028,p),k(1016,f),k(1017,v),k(1021,u),k(1022,u),k(1231,u),k(1014,g),k(1015,g),k(1008,g),k(1009,g),k(1040,g),k(1041,g),k(1115,w),k(1182,w),k(1185,w),k(1186,s),k(1187,E),k(17,i),k(114,JSON.parse.bind(JSON)),k(3802,JSON.parse.bind(JSON)),k(199,M),k(3807,M),k(3907,g),k(2951,g),k(791,g),k(1183,g),k(1270,g)},"init");e.exports={init:A}}),vd=ie((n,e)=>{K();var t=1e6;function o(r){var s=r.readInt32BE(0),i=r.readUInt32BE(4),a="";s<0&&(s=~s+(i===0),i=~i+1>>>0,a="-");var l="",h,d,p,f,v,u;{if(h=s%t,s=s/t>>>0,d=4294967296*h+i,i=d/t>>>0,p=""+(d-t*i),i===0&&s===0)return a+p+l;for(f="",v=6-p.length,u=0;u<v;u++)f+="0";l=f+p+l}{if(h=s%t,s=s/t>>>0,d=4294967296*h+i,i=d/t>>>0,p=""+(d-t*i),i===0&&s===0)return a+p+l;for(f="",v=6-p.length,u=0;u<v;u++)f+="0";l=f+p+l}{if(h=s%t,s=s/t>>>0,d=4294967296*h+i,i=d/t>>>0,p=""+(d-t*i),i===0&&s===0)return a+p+l;for(f="",v=6-p.length,u=0;u<v;u++)f+="0";l=f+p+l}return h=s%t,d=4294967296*h+i,p=""+d%t,a+p+l}y(o,"readInt8"),e.exports=o}),bd=ie((n,e)=>{K();var t=vd(),o=y(function(g,w,E,x,S){E=E||0,x=x||!1,S=S||function($,F,L){return $*Math.pow(2,L)+F};var O=E>>3,M=y(function($){return x?~$&255:$},"inv"),C=255,B=8-E%8;w<B&&(C=255<<8-w&255,B=w),E&&(C=C>>E%8);var A=0;E%8+w>=8&&(A=S(0,M(g[O])&C,B));for(var k=w+E>>3,T=O+1;T<k;T++)A=S(A,M(g[T]),8);var _=(w+E)%8;return _>0&&(A=S(A,M(g[k])>>8-_,_)),A},"parseBits"),r=y(function(g,w,E){var x=Math.pow(2,E-1)-1,S=o(g,1),O=o(g,E,1);if(O===0)return 0;var M=1,C=y(function(A,k,T){A===0&&(A=1);for(var _=1;_<=T;_++)M/=2,(k&1<<T-_)>0&&(A+=M);return A},"parsePrecisionBits"),B=o(g,w,E+1,!1,C);return O==Math.pow(2,E+1)-1?B===0?S===0?1/0:-1/0:NaN:(S===0?1:-1)*Math.pow(2,O-x)*B},"parseFloatFromBits"),s=y(function(g){return o(g,1)==1?-1*(o(g,15,1,!0)+1):o(g,15,1)},"parseInt16"),i=y(function(g){return o(g,1)==1?-1*(o(g,31,1,!0)+1):o(g,31,1)},"parseInt32"),a=y(function(g){return r(g,23,8)},"parseFloat32"),l=y(function(g){return r(g,52,11)},"parseFloat64"),h=y(function(g){var w=o(g,16,32);if(w==49152)return NaN;for(var E=Math.pow(1e4,o(g,16,16)),x=0,S=[],O=o(g,16),M=0;M<O;M++)x+=o(g,16,64+16*M)*E,E/=1e4;var C=Math.pow(10,o(g,16,48));return(w===0?1:-1)*Math.round(x*C)/C},"parseNumeric"),d=y(function(g,w){var E=o(w,1),x=o(w,63,1),S=new Date((E===0?1:-1)*x/1e3+9466848e5);return g||S.setTime(S.getTime()+S.getTimezoneOffset()*6e4),S.usec=x%1e3,S.getMicroSeconds=function(){return this.usec},S.setMicroSeconds=function(O){this.usec=O},S.getUTCMicroSeconds=function(){return this.usec},S},"parseDate"),p=y(function(g){for(var w=o(g,32),E=o(g,32,32),x=o(g,32,64),S=96,O=[],M=0;M<w;M++)O[M]=o(g,32,S),S+=32,S+=32;var C=y(function(A){var k=o(g,32,S);if(S+=32,k==4294967295)return null;var T;if(A==23||A==20)return T=o(g,k*8,S),S+=k*8,T;if(A==25)return T=g.toString(this.encoding,S>>3,(S+=k<<3)>>3),T;console.log("ERROR: ElementType not implemented: "+A)},"parseElement"),B=y(function(A,k){var T=[],_;if(A.length>1){var $=A.shift();for(_=0;_<$;_++)T[_]=B(A,k);A.unshift($)}else for(_=0;_<A[0];_++)T[_]=C(k);return T},"parse");return B(O,x)},"parseArray"),f=y(function(g){return g.toString("utf8")},"parseText"),v=y(function(g){return g===null?null:o(g,8)>0},"parseBool"),u=y(function(g){g(20,t),g(21,s),g(23,i),g(26,i),g(1700,h),g(700,a),g(701,l),g(16,v),g(1114,d.bind(null,!1)),g(1184,d.bind(null,!0)),g(1e3,p),g(1007,p),g(1016,p),g(1008,p),g(1009,p),g(25,f)},"init");e.exports={init:u}}),yd=ie((n,e)=>{K(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),dn=ie(n=>{K();var e=md(),t=bd(),o=ha(),r=yd();n.getTypeParser=a,n.setTypeParser=l,n.arrayParser=o,n.builtins=r;var s={text:{},binary:{}};function i(h){return String(h)}y(i,"noParse");function a(h,d){return d=d||"text",s[d]&&s[d][h]||i}y(a,"getTypeParser");function l(h,d,p){typeof d=="function"&&(p=d,d="text"),s[d][h]=p}y(l,"setTypeParser"),e.init(function(h,d){s.text[h]=d}),t.init(function(h,d){s.binary[h]=d})}),hn=ie((n,e)=>{K(),e.exports={host:"localhost",user:se.platform==="win32"?se.env.USERNAME:se.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t=dn(),o=t.getTypeParser(20,"text"),r=t.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(s){t.setTypeParser(20,"text",s?t.getTypeParser(23,"text"):o),t.setTypeParser(1016,"text",s?t.getTypeParser(1007,"text"):r)})}),pn=ie((n,e)=>{K();var t=(ca(),Pe(wr)),o=hn();function r(u){var g=u.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+g+'"'}y(r,"escapeElement");function s(u){for(var g="{",w=0;w<u.length;w++)w>0&&(g=g+","),u[w]===null||typeof u[w]>"u"?g=g+"NULL":Array.isArray(u[w])?g=g+s(u[w]):u[w]instanceof J?g+="\\\\x"+u[w].toString("hex"):g+=r(i(u[w]));return g=g+"}",g}y(s,"arrayString");var i=y(function(u,g){if(u==null)return null;if(u instanceof J)return u;if(ArrayBuffer.isView(u)){var w=J.from(u.buffer,u.byteOffset,u.byteLength);return w.length===u.byteLength?w:w.slice(u.byteOffset,u.byteOffset+u.byteLength)}return u instanceof Date?o.parseInputDatesAsUTC?d(u):h(u):Array.isArray(u)?s(u):typeof u=="object"?a(u,g):u.toString()},"prepareValue");function a(u,g){if(u&&typeof u.toPostgres=="function"){if(g=g||[],g.indexOf(u)!==-1)throw new Error('circular reference detected while preparing "'+u+'" for query');return g.push(u),i(u.toPostgres(i),g)}return JSON.stringify(u)}y(a,"prepareObject");function l(u,g){for(u=""+u;u.length<g;)u="0"+u;return u}y(l,"pad");function h(u){var g=-u.getTimezoneOffset(),w=u.getFullYear(),E=w<1;E&&(w=Math.abs(w)+1);var x=l(w,4)+"-"+l(u.getMonth()+1,2)+"-"+l(u.getDate(),2)+"T"+l(u.getHours(),2)+":"+l(u.getMinutes(),2)+":"+l(u.getSeconds(),2)+"."+l(u.getMilliseconds(),3);return g<0?(x+="-",g*=-1):x+="+",x+=l(Math.floor(g/60),2)+":"+l(g%60,2),E&&(x+=" BC"),x}y(h,"dateToString");function d(u){var g=u.getUTCFullYear(),w=g<1;w&&(g=Math.abs(g)+1);var E=l(g,4)+"-"+l(u.getUTCMonth()+1,2)+"-"+l(u.getUTCDate(),2)+"T"+l(u.getUTCHours(),2)+":"+l(u.getUTCMinutes(),2)+":"+l(u.getUTCSeconds(),2)+"."+l(u.getUTCMilliseconds(),3);return E+="+00:00",w&&(E+=" BC"),E}y(d,"dateToStringUTC");function p(u,g,w){return u=typeof u=="string"?{text:u}:u,g&&(typeof g=="function"?u.callback=g:u.values=g),w&&(u.callback=w),u}y(p,"normalizeQueryConfig");var f=y(function(u){return t.createHash("md5").update(u,"utf-8").digest("hex")},"md5"),v=y(function(u,g,w){var E=f(g+u),x=f(J.concat([J.from(E),w]));return"md5"+x},"postgresMd5PasswordHash");e.exports={prepareValue:y(function(u){return i(u)},"prepareValueWrapper"),normalizeQueryConfig:p,postgresMd5PasswordHash:v,md5:f}}),wd=ie((n,e)=>{K();var t=(ca(),Pe(wr));function o(g){if(g.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let w=t.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:w,response:"n,,n=*,r="+w,message:"SASLInitialResponse"}}y(o,"startSession");function r(g,w,E){if(g.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof E!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let x=h(E);if(x.nonce.startsWith(g.clientNonce)){if(x.nonce.length===g.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var S=J.from(x.salt,"base64"),O=u(w,S,x.iteration),M=v(O,"Client Key"),C=f(M),B="n=*,r="+g.clientNonce,A="r="+x.nonce+",s="+x.salt+",i="+x.iteration,k="c=biws,r="+x.nonce,T=B+","+A+","+k,_=v(C,T),$=p(M,_),F=$.toString("base64"),L=v(O,"Server Key"),j=v(L,T);g.message="SASLResponse",g.serverSignature=j.toString("base64"),g.response=k+",p="+F}y(r,"continueSession");function s(g,w){if(g.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:E}=d(w);if(E!==g.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}y(s,"finalizeSession");function i(g){if(typeof g!="string")throw new TypeError("SASL: text must be a string");return g.split("").map((w,E)=>g.charCodeAt(E)).every(w=>w>=33&&w<=43||w>=45&&w<=126)}y(i,"isPrintableChars");function a(g){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(g)}y(a,"isBase64");function l(g){if(typeof g!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(g.split(",").map(w=>{if(!/^.=/.test(w))throw new Error("SASL: Invalid attribute pair entry");let E=w[0],x=w.substring(2);return[E,x]}))}y(l,"parseAttributePairs");function h(g){let w=l(g),E=w.get("r");if(E){if(!i(E))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let x=w.get("s");if(x){if(!a(x))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let S=w.get("i");if(S){if(!/^[1-9][0-9]*$/.test(S))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let O=parseInt(S,10);return{nonce:E,salt:x,iteration:O}}y(h,"parseServerFirstMessage");function d(g){let w=l(g).get("v");if(w){if(!a(w))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:w}}y(d,"parseServerFinalMessage");function p(g,w){if(!J.isBuffer(g))throw new TypeError("first argument must be a Buffer");if(!J.isBuffer(w))throw new TypeError("second argument must be a Buffer");if(g.length!==w.length)throw new Error("Buffer lengths must match");if(g.length===0)throw new Error("Buffers cannot be empty");return J.from(g.map((E,x)=>g[x]^w[x]))}y(p,"xorBuffers");function f(g){return t.createHash("sha256").update(g).digest()}y(f,"sha256");function v(g,w){return t.createHmac("sha256",g).update(w).digest()}y(v,"hmacSha256");function u(g,w,E){for(var x=v(g,J.concat([w,J.from([0,0,0,1])])),S=x,O=0;O<E-1;O++)x=v(g,x),S=p(S,x);return S}y(u,"Hi"),e.exports={startSession:o,continueSession:r,finalizeSession:s}}),kr={};tt(kr,{join:()=>pa});function pa(...n){return n.join("/")}var fa=Ue(()=>{K(),y(pa,"join")}),Er={};tt(Er,{stat:()=>ga});function ga(n,e){e(new Error("No filesystem"))}var ma=Ue(()=>{K(),y(ga,"stat")}),xr={};tt(xr,{default:()=>va});var va,ba=Ue(()=>{K(),va={}}),ya={};tt(ya,{StringDecoder:()=>wa});var Mn,wa,kd=Ue(()=>{K(),Mn=class{constructor(e){ee(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},y(Mn,"StringDecoder"),wa=Mn}),Ed=ie((n,e)=>{K();var{Transform:t}=(ba(),Pe(xr)),{StringDecoder:o}=(kd(),Pe(ya)),r=Symbol("last"),s=Symbol("decoder");function i(p,f,v){let u;if(this.overflow){if(u=this[s].write(p).split(this.matcher),u.length===1)return v();u.shift(),this.overflow=!1}else this[r]+=this[s].write(p),u=this[r].split(this.matcher);this[r]=u.pop();for(let g=0;g<u.length;g++)try{l(this,this.mapper(u[g]))}catch(w){return v(w)}if(this.overflow=this[r].length>this.maxLength,this.overflow&&!this.skipOverflow){v(new Error("maximum buffer reached"));return}v()}y(i,"transform");function a(p){if(this[r]+=this[s].end(),this[r])try{l(this,this.mapper(this[r]))}catch(f){return p(f)}p()}y(a,"flush");function l(p,f){f!==void 0&&p.push(f)}y(l,"push");function h(p){return p}y(h,"noop");function d(p,f,v){switch(p=p||/\r?\n/,f=f||h,v=v||{},arguments.length){case 1:typeof p=="function"?(f=p,p=/\r?\n/):typeof p=="object"&&!(p instanceof RegExp)&&!p[Symbol.split]&&(v=p,p=/\r?\n/);break;case 2:typeof p=="function"?(v=f,f=p,p=/\r?\n/):typeof f=="object"&&(v=f,f=h)}v=Object.assign({},v),v.autoDestroy=!0,v.transform=i,v.flush=a,v.readableObjectMode=!0;let u=new t(v);return u[r]="",u[s]=new o("utf8"),u.matcher=p,u.mapper=f,u.maxLength=v.maxLength,u.skipOverflow=v.skipOverflow||!1,u.overflow=!1,u._destroy=function(g,w){this._writableState.errorEmitted=!1,w(g)},u}y(d,"split"),e.exports=d}),xd=ie((n,e)=>{K();var t=(fa(),Pe(kr)),o=(ba(),Pe(xr)).Stream,r=Ed(),s=(un(),Pe(Io)),i=5432,a=se.platform==="win32",l=se.stderr,h=56,d=7,p=61440,f=32768;function v(M){return(M&p)==f}y(v,"isRegFile");var u=["host","port","database","user","password"],g=u.length,w=u[g-1];function E(){var M=l instanceof o&&l.writable===!0;if(M){var C=Array.prototype.slice.call(arguments).concat(`
`);l.write(s.format.apply(s,C))}}y(E,"warn"),Object.defineProperty(e.exports,"isWin",{get:y(function(){return a},"get"),set:y(function(M){a=M},"set")}),e.exports.warnTo=function(M){var C=l;return l=M,C},e.exports.getFileName=function(M){var C=M||se.env,B=C.PGPASSFILE||(a?t.join(C.APPDATA||"./","postgresql","pgpass.conf"):t.join(C.HOME||"./",".pgpass"));return B},e.exports.usePgPass=function(M,C){return Object.prototype.hasOwnProperty.call(se.env,"PGPASSWORD")?!1:a?!0:(C=C||"<unkn>",v(M.mode)?M.mode&(h|d)?(E('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',C),!1):!0:(E('WARNING: password file "%s" is not a plain file',C),!1))};var x=e.exports.match=function(M,C){return u.slice(0,-1).reduce(function(B,A,k){return k==1&&Number(M[A]||i)===Number(C[A])?B&&!0:B&&(C[A]==="*"||C[A]===M[A])},!0)};e.exports.getPassword=function(M,C,B){var A,k=C.pipe(r());function T(F){var L=S(F);L&&O(L)&&x(M,L)&&(A=L[w],k.end())}y(T,"onLine");var _=y(function(){C.destroy(),B(A)},"onEnd"),$=y(function(F){C.destroy(),E("WARNING: error on reading file: %s",F),B(void 0)},"onErr");C.on("error",$),k.on("data",T).on("end",_).on("error",$)};var S=e.exports.parseLine=function(M){if(M.length<11||M.match(/^\s+#/))return null;for(var C="",B="",A=0,k=0,T=0,_={},$=!1,F=y(function(j,q,W){var Z=M.substring(q,W);Object.hasOwnProperty.call(se.env,"PGPASS_NO_DEESCAPE")||(Z=Z.replace(/\\([:\\])/g,"$1")),_[u[j]]=Z},"addToObj"),L=0;L<M.length-1;L+=1){if(C=M.charAt(L+1),B=M.charAt(L),$=A==g-1,$){F(A,k);break}L>=0&&C==":"&&B!=="\\"&&(F(A,k,L+1),k=L+2,A+=1)}return _=Object.keys(_).length===g?_:null,_},O=e.exports.isValidEntry=function(M){for(var C={0:function(_){return _.length>0},1:function(_){return _==="*"?!0:(_=Number(_),isFinite(_)&&_>0&&_<9007199254740992&&Math.floor(_)===_)},2:function(_){return _.length>0},3:function(_){return _.length>0},4:function(_){return _.length>0}},B=0;B<u.length;B+=1){var A=C[B],k=M[u[B]]||"",T=A(k);if(!T)return!1}return!0}}),Sd=ie((n,e)=>{K(),fa(),Pe(kr);var t=(ma(),Pe(Er)),o=xd();e.exports=function(r,s){var i=o.getFileName();t.stat(i,function(a,l){if(a||!o.usePgPass(l,i))return s(void 0);var h=t.createReadStream(i);o.getPassword(r,h,s)})},e.exports.warnTo=o.warnTo}),Sr=ie((n,e)=>{K();var t=dn();function o(r){this._types=r||t,this.text={},this.binary={}}y(o,"TypeOverrides"),o.prototype.getOverrides=function(r){switch(r){case"text":return this.text;case"binary":return this.binary;default:return{}}},o.prototype.setTypeParser=function(r,s,i){typeof s=="function"&&(i=s,s="text"),this.getOverrides(s)[r]=i},o.prototype.getTypeParser=function(r,s){return s=s||"text",this.getOverrides(s)[r]||this._types.getTypeParser(r,s)},e.exports=o}),ka={};tt(ka,{default:()=>Ea});var Ea,Cd=Ue(()=>{K(),Ea={}}),xa={};tt(xa,{parse:()=>Cr});function Cr(n,e=!1){let{protocol:t}=new URL(n),o="http:"+n.substring(t.length),{username:r,password:s,host:i,hostname:a,port:l,pathname:h,search:d,searchParams:p,hash:f}=new URL(o);s=decodeURIComponent(s),r=decodeURIComponent(r),h=decodeURIComponent(h);let v=r+":"+s,u=e?Object.fromEntries(p.entries()):d;return{href:n,protocol:t,auth:v,username:r,password:s,host:i,hostname:a,port:l,pathname:h,search:d,query:u,hash:f}}var Sa=Ue(()=>{K(),y(Cr,"parse")}),_d=ie((n,e)=>{K();var t=(Sa(),Pe(xa)),o=(ma(),Pe(Er));function r(s){if(s.charAt(0)==="/"){var a=s.split(" ");return{host:a[0],database:a[1]}}var i=t.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(s)?encodeURI(s).replace(/\%25(\d\d)/g,"%$1"):s,!0),a=i.query;for(var l in a)Array.isArray(a[l])&&(a[l]=a[l][a[l].length-1]);var h=(i.auth||":").split(":");if(a.user=h[0],a.password=h.splice(1).join(":"),a.port=i.port,i.protocol=="socket:")return a.host=decodeURI(i.pathname),a.database=i.query.db,a.client_encoding=i.query.encoding,a;a.host||(a.host=i.hostname);var d=i.pathname;if(!a.host&&d&&/^%2f/i.test(d)){var p=d.split("/");a.host=decodeURIComponent(p[0]),d=p.splice(1).join("/")}switch(d&&d.charAt(0)==="/"&&(d=d.slice(1)||null),a.database=d&&decodeURI(d),(a.ssl==="true"||a.ssl==="1")&&(a.ssl=!0),a.ssl==="0"&&(a.ssl=!1),(a.sslcert||a.sslkey||a.sslrootcert||a.sslmode)&&(a.ssl={}),a.sslcert&&(a.ssl.cert=o.readFileSync(a.sslcert).toString()),a.sslkey&&(a.ssl.key=o.readFileSync(a.sslkey).toString()),a.sslrootcert&&(a.ssl.ca=o.readFileSync(a.sslrootcert).toString()),a.sslmode){case"disable":{a.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{a.ssl.rejectUnauthorized=!1;break}}return a}y(r,"parse"),e.exports=r,r.parse=r}),_r=ie((n,e)=>{K();var t=(Cd(),Pe(ka)),o=hn(),r=_d().parse,s=y(function(p,f,v){return v===void 0?v=se.env["PG"+p.toUpperCase()]:v===!1||(v=se.env[v]),f[p]||v||o[p]},"val"),i=y(function(){switch(se.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return o.ssl},"readSSLConfigFromEnvironment"),a=y(function(p){return"'"+(""+p).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),l=y(function(p,f,v){var u=f[v];u!=null&&p.push(v+"="+a(u))},"add"),h=class{constructor(f){f=typeof f=="string"?r(f):f||{},f.connectionString&&(f=Object.assign({},f,r(f.connectionString))),this.user=s("user",f),this.database=s("database",f),this.database===void 0&&(this.database=this.user),this.port=parseInt(s("port",f),10),this.host=s("host",f),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:s("password",f)}),this.binary=s("binary",f),this.options=s("options",f),this.ssl=typeof f.ssl>"u"?i():f.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=s("client_encoding",f),this.replication=s("replication",f),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=s("application_name",f,"PGAPPNAME"),this.fallback_application_name=s("fallback_application_name",f,!1),this.statement_timeout=s("statement_timeout",f,!1),this.lock_timeout=s("lock_timeout",f,!1),this.idle_in_transaction_session_timeout=s("idle_in_transaction_session_timeout",f,!1),this.query_timeout=s("query_timeout",f,!1),f.connectionTimeoutMillis===void 0?this.connect_timeout=se.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(f.connectionTimeoutMillis/1e3),f.keepAlive===!1?this.keepalives=0:f.keepAlive===!0&&(this.keepalives=1),typeof f.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(f.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(f){var v=[];l(v,this,"user"),l(v,this,"password"),l(v,this,"port"),l(v,this,"application_name"),l(v,this,"fallback_application_name"),l(v,this,"connect_timeout"),l(v,this,"options");var u=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(l(v,u,"sslmode"),l(v,u,"sslca"),l(v,u,"sslkey"),l(v,u,"sslcert"),l(v,u,"sslrootcert"),this.database&&v.push("dbname="+a(this.database)),this.replication&&v.push("replication="+a(this.replication)),this.host&&v.push("host="+a(this.host)),this.isDomainSocket)return f(null,v.join(" "));this.client_encoding&&v.push("client_encoding="+a(this.client_encoding)),t.lookup(this.host,function(g,w){return g?f(g,null):(v.push("hostaddr="+a(w)),f(null,v.join(" ")))})}};y(h,"ConnectionParameters");var d=h;e.exports=d}),Td=ie((n,e)=>{K();var t=dn(),o=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,r=class{constructor(a,l){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=l,this.RowCtor=null,this.rowAsArray=a==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var l;a.text?l=o.exec(a.text):l=o.exec(a.command),l&&(this.command=l[1],l[3]?(this.oid=parseInt(l[2],10),this.rowCount=parseInt(l[3],10)):l[2]&&(this.rowCount=parseInt(l[2],10)))}_parseRowAsArray(a){for(var l=new Array(a.length),h=0,d=a.length;h<d;h++){var p=a[h];p!==null?l[h]=this._parsers[h](p):l[h]=null}return l}parseRow(a){for(var l={},h=0,d=a.length;h<d;h++){var p=a[h],f=this.fields[h].name;p!==null?l[f]=this._parsers[h](p):l[f]=null}return l}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=new Array(a.length));for(var l=0;l<a.length;l++){var h=a[l];this._types?this._parsers[l]=this._types.getTypeParser(h.dataTypeID,h.format||"text"):this._parsers[l]=t.getTypeParser(h.dataTypeID,h.format||"text")}}};y(r,"Result");var s=r;e.exports=s}),Bd=ie((n,e)=>{K();var{EventEmitter:t}=Ft(),o=Td(),r=pn(),s=class extends t{constructor(l,h,d){super(),l=r.normalizeQueryConfig(l,h,d),this.text=l.text,this.values=l.values,this.rows=l.rows,this.types=l.types,this.name=l.name,this.binary=l.binary,this.portal=l.portal||"",this.callback=l.callback,this._rowMode=l.rowMode,se.domain&&l.callback&&(this.callback=se.domain.bind(l.callback)),this._result=new o(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new o(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(l){this._checkForMultirow(),this._result.addFields(l.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(l){let h;if(!this._canceledDueToError){try{h=this._result.parseRow(l.fields)}catch(d){this._canceledDueToError=d;return}this.emit("row",h,this._result),this._accumulateRows&&this._result.addRow(h)}}handleCommandComplete(l,h){this._checkForMultirow(),this._result.addCommandComplete(l),this.rows&&h.sync()}handleEmptyQuery(l){this.rows&&l.sync()}handleError(l,h){if(this._canceledDueToError&&(l=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(l);this.emit("error",l)}handleReadyForQuery(l){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,l);if(this.callback)try{this.callback(null,this._results)}catch(h){se.nextTick(()=>{throw h})}this.emit("end",this._results)}submit(l){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let h=l.parsedStatements[this.name];return this.text&&h&&this.text!==h?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(l):l.query(this.text),null)}hasBeenParsed(l){return this.name&&l.parsedStatements[this.name]}handlePortalSuspended(l){this._getRows(l,this.rows)}_getRows(l,h){l.execute({portal:this.portal,rows:h}),h?l.flush():l.sync()}prepare(l){this.isPreparedStatement=!0,this.hasBeenParsed(l)||l.parse({text:this.text,name:this.name,types:this.types});try{l.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:r.prepareValue})}catch(h){this.handleError(h,l);return}l.describe({type:"P",name:this.portal||""}),this._getRows(l,this.rows)}handleCopyInResponse(l){l.sendCopyFail("No source stream defined")}handleCopyData(l,h){}};y(s,"Query");var i=s;e.exports=i}),Ca={};tt(Ca,{Socket:()=>fn,isIP:()=>_a});function _a(n){return 0}var ni,Ln,ho,fn,Tr=Ue(()=>{K(),ni=ro(Ft(),1),y(_a,"isIP"),Ln=/^[^.]+\./,ho=class Y extends ni.EventEmitter{constructor(){super(...arguments),ee(this,"opts",{}),ee(this,"connecting",!1),ee(this,"pending",!0),ee(this,"writable",!0),ee(this,"encrypted",!1),ee(this,"authorized",!1),ee(this,"destroyed",!1),ee(this,"ws",null),ee(this,"writeBuffer"),ee(this,"tlsState",0),ee(this,"tlsRead"),ee(this,"tlsWrite")}static get poolQueryViaFetch(){return Y.opts.poolQueryViaFetch??Y.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){Y.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return Y.opts.fetchEndpoint??Y.defaults.fetchEndpoint}static set fetchEndpoint(e){Y.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return Y.opts.fetchFunction??Y.defaults.fetchFunction}static set fetchFunction(e){Y.opts.fetchFunction=e}static get webSocketConstructor(){return Y.opts.webSocketConstructor??Y.defaults.webSocketConstructor}static set webSocketConstructor(e){Y.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??Y.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return Y.opts.wsProxy??Y.defaults.wsProxy}static set wsProxy(e){Y.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??Y.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return Y.opts.coalesceWrites??Y.defaults.coalesceWrites}static set coalesceWrites(e){Y.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??Y.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return Y.opts.useSecureWebSocket??Y.defaults.useSecureWebSocket}static set useSecureWebSocket(e){Y.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??Y.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return Y.opts.forceDisablePgSSL??Y.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){Y.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??Y.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return Y.opts.disableSNI??Y.defaults.disableSNI}static set disableSNI(e){Y.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??Y.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return Y.opts.pipelineConnect??Y.defaults.pipelineConnect}static set pipelineConnect(e){Y.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??Y.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return Y.opts.subtls??Y.defaults.subtls}static set subtls(e){Y.opts.subtls=e}get subtls(){return this.opts.subtls??Y.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return Y.opts.pipelineTLS??Y.defaults.pipelineTLS}static set pipelineTLS(e){Y.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??Y.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return Y.opts.rootCerts??Y.defaults.rootCerts}static set rootCerts(e){Y.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??Y.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let o=this.wsProxy;if(o===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof o=="function"?o(e,t):`${o}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,t,o){this.connecting=!0,o&&this.once("connect",o);let r=y(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),s=y((a,l=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",h=>{this.emit("error",h),this.emit("close")}),a.addEventListener("message",h=>{if(this.tlsState===0){let d=J.from(h.data);this.emit("data",d)}}),a.addEventListener("close",()=>{this.emit("close")}),l?r():a.addEventListener("open",r)},"configureWebSocket"),i;try{i=this.wsProxyAddrForHost(t,typeof e=="string"?parseInt(e,10):e)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+i;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(a),s(this.ws);else try{this.ws=new WebSocket(a),s(this.ws)}catch{this.ws=new __unstable_WebSocket(a),s(this.ws)}}catch(a){let l=(this.useSecureWebSocket?"https:":"http:")+"//"+i;fetch(l,{headers:{Upgrade:"websocket"}}).then(h=>{if(this.ws=h.webSocket,this.ws==null)throw a;this.ws.accept(),s(this.ws,!0)}).catch(h=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${h.message}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=this.subtls.TrustedCert.fromPEM(this.rootCerts),o=new this.subtls.WebSocketReadQueue(this.ws),r=o.read.bind(o),s=this.rawWrite.bind(this),[i,a]=await this.subtls.startTls(e,t,r,s,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=i,this.tlsWrite=a,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let t=J.from(e);this.emit("data",t)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}}write(e,t="utf8",o=r=>{}){return e.length===0?(o(),!0):(typeof e=="string"&&(e=J.from(e,t)),this.tlsState===0?(this.rawWrite(e),o()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,t,o)}):(this.tlsWrite(e),o()),!0)}end(e=J.alloc(0),t="utf8",o=()=>{}){return this.write(e,t,()=>{this.ws.close(),o()}),this}destroy(){return this.destroyed=!0,this.end()}},y(ho,"Socket"),ee(ho,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:y((n,e,t)=>{let o;return t!=null&&t.jwtAuth?o=n.replace(Ln,"apiauth."):o=n.replace(Ln,"api."),"https://"+o+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:y(n=>n+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),ee(ho,"opts",{}),fn=ho}),Ta=ie(n=>{K(),Object.defineProperty(n,"__esModule",{value:!0}),n.NoticeMessage=n.DataRowMessage=n.CommandCompleteMessage=n.ReadyForQueryMessage=n.NotificationResponseMessage=n.BackendKeyDataMessage=n.AuthenticationMD5Password=n.ParameterStatusMessage=n.ParameterDescriptionMessage=n.RowDescriptionMessage=n.Field=n.CopyResponse=n.CopyDataMessage=n.DatabaseError=n.copyDone=n.emptyQuery=n.replicationStart=n.portalSuspended=n.noData=n.closeComplete=n.bindComplete=n.parseComplete=void 0,n.parseComplete={name:"parseComplete",length:5},n.bindComplete={name:"bindComplete",length:5},n.closeComplete={name:"closeComplete",length:5},n.noData={name:"noData",length:5},n.portalSuspended={name:"portalSuspended",length:5},n.replicationStart={name:"replicationStart",length:4},n.emptyQuery={name:"emptyQuery",length:4},n.copyDone={name:"copyDone",length:4};var e=class extends Error{constructor(L,j,q){super(L),this.length=j,this.name=q}};y(e,"DatabaseError");var t=e;n.DatabaseError=t;var o=class{constructor(L,j){this.length=L,this.chunk=j,this.name="copyData"}};y(o,"CopyDataMessage");var r=o;n.CopyDataMessage=r;var s=class{constructor(L,j,q,W){this.length=L,this.name=j,this.binary=q,this.columnTypes=new Array(W)}};y(s,"CopyResponse");var i=s;n.CopyResponse=i;var a=class{constructor(L,j,q,W,Z,X,be){this.name=L,this.tableID=j,this.columnID=q,this.dataTypeID=W,this.dataTypeSize=Z,this.dataTypeModifier=X,this.format=be}};y(a,"Field");var l=a;n.Field=l;var h=class{constructor(L,j){this.length=L,this.fieldCount=j,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};y(h,"RowDescriptionMessage");var d=h;n.RowDescriptionMessage=d;var p=class{constructor(L,j){this.length=L,this.parameterCount=j,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};y(p,"ParameterDescriptionMessage");var f=p;n.ParameterDescriptionMessage=f;var v=class{constructor(L,j,q){this.length=L,this.parameterName=j,this.parameterValue=q,this.name="parameterStatus"}};y(v,"ParameterStatusMessage");var u=v;n.ParameterStatusMessage=u;var g=class{constructor(L,j){this.length=L,this.salt=j,this.name="authenticationMD5Password"}};y(g,"AuthenticationMD5Password");var w=g;n.AuthenticationMD5Password=w;var E=class{constructor(L,j,q){this.length=L,this.processID=j,this.secretKey=q,this.name="backendKeyData"}};y(E,"BackendKeyDataMessage");var x=E;n.BackendKeyDataMessage=x;var S=class{constructor(L,j,q,W){this.length=L,this.processId=j,this.channel=q,this.payload=W,this.name="notification"}};y(S,"NotificationResponseMessage");var O=S;n.NotificationResponseMessage=O;var M=class{constructor(L,j){this.length=L,this.status=j,this.name="readyForQuery"}};y(M,"ReadyForQueryMessage");var C=M;n.ReadyForQueryMessage=C;var B=class{constructor(L,j){this.length=L,this.text=j,this.name="commandComplete"}};y(B,"CommandCompleteMessage");var A=B;n.CommandCompleteMessage=A;var k=class{constructor(L,j){this.length=L,this.fields=j,this.name="dataRow",this.fieldCount=j.length}};y(k,"DataRowMessage");var T=k;n.DataRowMessage=T;var _=class{constructor(L,j){this.length=L,this.message=j,this.name="notice"}};y(_,"NoticeMessage");var $=_;n.NoticeMessage=$}),Id=ie(n=>{K(),Object.defineProperty(n,"__esModule",{value:!0}),n.Writer=void 0;var e=class{constructor(r=256){this.size=r,this.offset=5,this.headerPosition=0,this.buffer=J.allocUnsafe(r)}ensure(r){var s=this.buffer.length-this.offset;if(s<r){var i=this.buffer,a=i.length+(i.length>>1)+r;this.buffer=J.allocUnsafe(a),i.copy(this.buffer)}}addInt32(r){return this.ensure(4),this.buffer[this.offset++]=r>>>24&255,this.buffer[this.offset++]=r>>>16&255,this.buffer[this.offset++]=r>>>8&255,this.buffer[this.offset++]=r>>>0&255,this}addInt16(r){return this.ensure(2),this.buffer[this.offset++]=r>>>8&255,this.buffer[this.offset++]=r>>>0&255,this}addCString(r){if(!r)this.ensure(1);else{var s=J.byteLength(r);this.ensure(s+1),this.buffer.write(r,this.offset,"utf-8"),this.offset+=s}return this.buffer[this.offset++]=0,this}addString(r=""){var s=J.byteLength(r);return this.ensure(s),this.buffer.write(r,this.offset),this.offset+=s,this}add(r){return this.ensure(r.length),r.copy(this.buffer,this.offset),this.offset+=r.length,this}join(r){if(r){this.buffer[this.headerPosition]=r;let s=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(s,this.headerPosition+1)}return this.buffer.slice(r?0:5,this.offset)}flush(r){var s=this.join(r);return this.offset=5,this.headerPosition=0,this.buffer=J.allocUnsafe(this.size),s}};y(e,"Writer");var t=e;n.Writer=t}),Ad=ie(n=>{K(),Object.defineProperty(n,"__esModule",{value:!0}),n.serialize=void 0;var e=Id(),t=new e.Writer,o=y(L=>{t.addInt16(3).addInt16(0);for(let W of Object.keys(L))t.addCString(W).addCString(L[W]);t.addCString("client_encoding").addCString("UTF8");var j=t.addCString("").flush(),q=j.length+4;return new e.Writer().addInt32(q).add(j).flush()},"startup"),r=y(()=>{let L=J.allocUnsafe(8);return L.writeInt32BE(8,0),L.writeInt32BE(80877103,4),L},"requestSsl"),s=y(L=>t.addCString(L).flush(112),"password"),i=y(function(L,j){return t.addCString(L).addInt32(J.byteLength(j)).addString(j),t.flush(112)},"sendSASLInitialResponseMessage"),a=y(function(L){return t.addString(L).flush(112)},"sendSCRAMClientFinalMessage"),l=y(L=>t.addCString(L).flush(81),"query"),h=[],d=y(L=>{let j=L.name||"";j.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",j,j.length),console.error("This can cause conflicts and silent errors executing queries"));let q=L.types||h;for(var W=q.length,Z=t.addCString(j).addCString(L.text).addInt16(W),X=0;X<W;X++)Z.addInt32(q[X]);return t.flush(80)},"parse"),p=new e.Writer,f=y(function(L,j){for(let q=0;q<L.length;q++){let W=j?j(L[q],q):L[q];W==null?(t.addInt16(0),p.addInt32(-1)):W instanceof J?(t.addInt16(1),p.addInt32(W.length),p.add(W)):(t.addInt16(0),p.addInt32(J.byteLength(W)),p.addString(W))}},"writeValues"),v=y((L={})=>{let j=L.portal||"",q=L.statement||"",W=L.binary||!1,Z=L.values||h,X=Z.length;return t.addCString(j).addCString(q),t.addInt16(X),f(Z,L.valueMapper),t.addInt16(X),t.add(p.flush()),t.addInt16(W?1:0),t.flush(66)},"bind"),u=J.from([69,0,0,0,9,0,0,0,0,0]),g=y(L=>{if(!L||!L.portal&&!L.rows)return u;let j=L.portal||"",q=L.rows||0,W=J.byteLength(j),Z=4+W+1+4,X=J.allocUnsafe(1+Z);return X[0]=69,X.writeInt32BE(Z,1),X.write(j,5,"utf-8"),X[W+5]=0,X.writeUInt32BE(q,X.length-4),X},"execute"),w=y((L,j)=>{let q=J.allocUnsafe(16);return q.writeInt32BE(16,0),q.writeInt16BE(1234,4),q.writeInt16BE(5678,6),q.writeInt32BE(L,8),q.writeInt32BE(j,12),q},"cancel"),E=y((L,j)=>{let q=4+J.byteLength(j)+1,W=J.allocUnsafe(1+q);return W[0]=L,W.writeInt32BE(q,1),W.write(j,5,"utf-8"),W[q]=0,W},"cstringMessage"),x=t.addCString("P").flush(68),S=t.addCString("S").flush(68),O=y(L=>L.name?E(68,`${L.type}${L.name||""}`):L.type==="P"?x:S,"describe"),M=y(L=>{let j=`${L.type}${L.name||""}`;return E(67,j)},"close"),C=y(L=>t.add(L).flush(100),"copyData"),B=y(L=>E(102,L),"copyFail"),A=y(L=>J.from([L,0,0,0,4]),"codeOnlyBuffer"),k=A(72),T=A(83),_=A(88),$=A(99),F={startup:o,password:s,requestSsl:r,sendSASLInitialResponseMessage:i,sendSCRAMClientFinalMessage:a,query:l,parse:d,bind:v,execute:g,describe:O,close:M,flush:y(()=>k,"flush"),sync:y(()=>T,"sync"),end:y(()=>_,"end"),copyData:C,copyDone:y(()=>$,"copyDone"),copyFail:B,cancel:w};n.serialize=F}),Od=ie(n=>{K(),Object.defineProperty(n,"__esModule",{value:!0}),n.BufferReader=void 0;var e=J.allocUnsafe(0),t=class{constructor(s=0){this.offset=s,this.buffer=e,this.encoding="utf-8"}setBuffer(s,i){this.offset=s,this.buffer=i}int16(){let s=this.buffer.readInt16BE(this.offset);return this.offset+=2,s}byte(){let s=this.buffer[this.offset];return this.offset++,s}int32(){let s=this.buffer.readInt32BE(this.offset);return this.offset+=4,s}string(s){let i=this.buffer.toString(this.encoding,this.offset,this.offset+s);return this.offset+=s,i}cstring(){let s=this.offset,i=s;for(;this.buffer[i++]!==0;);return this.offset=i,this.buffer.toString(this.encoding,s,i-1)}bytes(s){let i=this.buffer.slice(this.offset,this.offset+s);return this.offset+=s,i}};y(t,"BufferReader");var o=t;n.BufferReader=o}),Pd=ie(n=>{K(),Object.defineProperty(n,"__esModule",{value:!0}),n.Parser=void 0;var e=Ta(),t=Od(),o=1,r=4,s=o+r,i=J.allocUnsafe(0),a=class{constructor(d){if(this.buffer=i,this.bufferLength=0,this.bufferOffset=0,this.reader=new t.BufferReader,(d==null?void 0:d.mode)==="binary")throw new Error("Binary mode not supported yet");this.mode=(d==null?void 0:d.mode)||"text"}parse(d,p){this.mergeBuffer(d);let f=this.bufferOffset+this.bufferLength,v=this.bufferOffset;for(;v+s<=f;){let u=this.buffer[v],g=this.buffer.readUInt32BE(v+o),w=o+g;if(w+v<=f){let E=this.handlePacket(v+s,u,g,this.buffer);p(E),v+=w}else break}v===f?(this.buffer=i,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=f-v,this.bufferOffset=v)}mergeBuffer(d){if(this.bufferLength>0){let p=this.bufferLength+d.byteLength;if(p+this.bufferOffset>this.buffer.byteLength){let f;if(p<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)f=this.buffer;else{let v=this.buffer.byteLength*2;for(;p>=v;)v*=2;f=J.allocUnsafe(v)}this.buffer.copy(f,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=f,this.bufferOffset=0}d.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=p}else this.buffer=d,this.bufferOffset=0,this.bufferLength=d.byteLength}handlePacket(d,p,f,v){switch(p){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(d,f,v);case 67:return this.parseCommandCompleteMessage(d,f,v);case 90:return this.parseReadyForQueryMessage(d,f,v);case 65:return this.parseNotificationMessage(d,f,v);case 82:return this.parseAuthenticationResponse(d,f,v);case 83:return this.parseParameterStatusMessage(d,f,v);case 75:return this.parseBackendKeyData(d,f,v);case 69:return this.parseErrorMessage(d,f,v,"error");case 78:return this.parseErrorMessage(d,f,v,"notice");case 84:return this.parseRowDescriptionMessage(d,f,v);case 116:return this.parseParameterDescriptionMessage(d,f,v);case 71:return this.parseCopyInMessage(d,f,v);case 72:return this.parseCopyOutMessage(d,f,v);case 100:return this.parseCopyData(d,f,v);default:return new e.DatabaseError("received invalid response: "+p.toString(16),f,"error")}}parseReadyForQueryMessage(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.string(1);return new e.ReadyForQueryMessage(p,v)}parseCommandCompleteMessage(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.cstring();return new e.CommandCompleteMessage(p,v)}parseCopyData(d,p,f){let v=f.slice(d,d+(p-4));return new e.CopyDataMessage(p,v)}parseCopyInMessage(d,p,f){return this.parseCopyMessage(d,p,f,"copyInResponse")}parseCopyOutMessage(d,p,f){return this.parseCopyMessage(d,p,f,"copyOutResponse")}parseCopyMessage(d,p,f,v){this.reader.setBuffer(d,f);let u=this.reader.byte()!==0,g=this.reader.int16(),w=new e.CopyResponse(p,v,u,g);for(let E=0;E<g;E++)w.columnTypes[E]=this.reader.int16();return w}parseNotificationMessage(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.int32(),u=this.reader.cstring(),g=this.reader.cstring();return new e.NotificationResponseMessage(p,v,u,g)}parseRowDescriptionMessage(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.int16(),u=new e.RowDescriptionMessage(p,v);for(let g=0;g<v;g++)u.fields[g]=this.parseField();return u}parseField(){let d=this.reader.cstring(),p=this.reader.int32(),f=this.reader.int16(),v=this.reader.int32(),u=this.reader.int16(),g=this.reader.int32(),w=this.reader.int16()===0?"text":"binary";return new e.Field(d,p,f,v,u,g,w)}parseParameterDescriptionMessage(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.int16(),u=new e.ParameterDescriptionMessage(p,v);for(let g=0;g<v;g++)u.dataTypeIDs[g]=this.reader.int32();return u}parseDataRowMessage(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.int16(),u=new Array(v);for(let g=0;g<v;g++){let w=this.reader.int32();u[g]=w===-1?null:this.reader.string(w)}return new e.DataRowMessage(p,u)}parseParameterStatusMessage(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.cstring(),u=this.reader.cstring();return new e.ParameterStatusMessage(p,v,u)}parseBackendKeyData(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.int32(),u=this.reader.int32();return new e.BackendKeyDataMessage(p,v,u)}parseAuthenticationResponse(d,p,f){this.reader.setBuffer(d,f);let v=this.reader.int32(),u={name:"authenticationOk",length:p};switch(v){case 0:break;case 3:u.length===8&&(u.name="authenticationCleartextPassword");break;case 5:if(u.length===12){u.name="authenticationMD5Password";let w=this.reader.bytes(4);return new e.AuthenticationMD5Password(p,w)}break;case 10:u.name="authenticationSASL",u.mechanisms=[];let g;do g=this.reader.cstring(),g&&u.mechanisms.push(g);while(g);break;case 11:u.name="authenticationSASLContinue",u.data=this.reader.string(p-8);break;case 12:u.name="authenticationSASLFinal",u.data=this.reader.string(p-8);break;default:throw new Error("Unknown authenticationOk message type "+v)}return u}parseErrorMessage(d,p,f,v){this.reader.setBuffer(d,f);let u={},g=this.reader.string(1);for(;g!=="\0";)u[g]=this.reader.cstring(),g=this.reader.string(1);let w=u.M,E=v==="notice"?new e.NoticeMessage(p,w):new e.DatabaseError(w,p,v);return E.severity=u.S,E.code=u.C,E.detail=u.D,E.hint=u.H,E.position=u.P,E.internalPosition=u.p,E.internalQuery=u.q,E.where=u.W,E.schema=u.s,E.table=u.t,E.column=u.c,E.dataType=u.d,E.constraint=u.n,E.file=u.F,E.line=u.L,E.routine=u.R,E}};y(a,"Parser");var l=a;n.Parser=l}),Ba=ie(n=>{K(),Object.defineProperty(n,"__esModule",{value:!0}),n.DatabaseError=n.serialize=n.parse=void 0;var e=Ta();Object.defineProperty(n,"DatabaseError",{enumerable:!0,get:y(function(){return e.DatabaseError},"get")});var t=Ad();Object.defineProperty(n,"serialize",{enumerable:!0,get:y(function(){return t.serialize},"get")});var o=Pd();function r(s,i){let a=new o.Parser;return s.on("data",l=>a.parse(l,i)),new Promise(l=>s.on("end",()=>l()))}y(r,"parse"),n.parse=r}),Ia={};tt(Ia,{connect:()=>Aa});function Aa({socket:n,servername:e}){return n.startTls(e),n}var Md=Ue(()=>{K(),y(Aa,"connect")}),Oa=ie((n,e)=>{K();var t=(Tr(),Pe(Ca)),o=Ft().EventEmitter,{parse:r,serialize:s}=Ba(),i=s.flush(),a=s.sync(),l=s.end(),h=class extends o{constructor(f){super(),f=f||{},this.stream=f.stream||new t.Socket,this._keepAlive=f.keepAlive,this._keepAliveInitialDelayMillis=f.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=f.ssl||!1,this._ending=!1,this._emitMessage=!1;var v=this;this.on("newListener",function(u){u==="message"&&(v._emitMessage=!0)})}connect(f,v){var u=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(f,v),this.stream.once("connect",function(){u._keepAlive&&u.stream.setKeepAlive(!0,u._keepAliveInitialDelayMillis),u.emit("connect")});let g=y(function(w){u._ending&&(w.code==="ECONNRESET"||w.code==="EPIPE")||u.emit("error",w)},"reportStreamError");if(this.stream.on("error",g),this.stream.on("close",function(){u.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(w){var E=w.toString("utf8");switch(E){case"S":break;case"N":return u.stream.end(),u.emit("error",new Error("The server does not support SSL connections"));default:return u.stream.end(),u.emit("error",new Error("There was an error establishing an SSL connection"))}var x=(Md(),Pe(Ia));let S={socket:u.stream};u.ssl!==!0&&(Object.assign(S,u.ssl),"key"in u.ssl&&(S.key=u.ssl.key)),t.isIP(v)===0&&(S.servername=v);try{u.stream=x.connect(S)}catch(O){return u.emit("error",O)}u.attachListeners(u.stream),u.stream.on("error",g),u.emit("sslconnect")})}attachListeners(f){f.on("end",()=>{this.emit("end")}),r(f,v=>{var u=v.name==="error"?"errorMessage":v.name;this._emitMessage&&this.emit("message",v),this.emit(u,v)})}requestSsl(){this.stream.write(s.requestSsl())}startup(f){this.stream.write(s.startup(f))}cancel(f,v){this._send(s.cancel(f,v))}password(f){this._send(s.password(f))}sendSASLInitialResponseMessage(f,v){this._send(s.sendSASLInitialResponseMessage(f,v))}sendSCRAMClientFinalMessage(f){this._send(s.sendSCRAMClientFinalMessage(f))}_send(f){return this.stream.writable?this.stream.write(f):!1}query(f){this._send(s.query(f))}parse(f){this._send(s.parse(f))}bind(f){this._send(s.bind(f))}execute(f){this._send(s.execute(f))}flush(){this.stream.writable&&this.stream.write(i)}sync(){this._ending=!0,this._send(i),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(l,()=>{this.stream.end()})}close(f){this._send(s.close(f))}describe(f){this._send(s.describe(f))}sendCopyFromChunk(f){this._send(s.copyData(f))}endCopyFrom(){this._send(s.copyDone())}sendCopyFail(f){this._send(s.copyFail(f))}};y(h,"Connection");var d=h;e.exports=d}),Ld=ie((n,e)=>{K();var t=Ft().EventEmitter;un(),Pe(Io);var o=pn(),r=wd(),s=Sd(),i=Sr(),a=_r(),l=Bd(),h=hn(),d=Oa(),p=class extends t{constructor(u){super(),this.connectionParameters=new a(u),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var g=u||{};this._Promise=g.Promise||cn.Promise,this._types=new i(g.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=g.connection||new d({stream:g.stream,ssl:this.connectionParameters.ssl,keepAlive:g.keepAlive||!1,keepAliveInitialDelayMillis:g.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=g.binary||h.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=g.connectionTimeoutMillis||0}_errorAllQueries(u){let g=y(w=>{se.nextTick(()=>{w.handleError(u,this.connection)})},"enqueueError");this.activeQuery&&(g(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(g),this.queryQueue.length=0}_connect(u){var g=this,w=this.connection;if(this._connectionCallback=u,this._connecting||this._connected){let E=new Error("Client has already been connected. You cannot reuse a client.");se.nextTick(()=>{u(E)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{w._ending=!0,w.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?w.connect(this.host+"/.s.PGSQL."+this.port):w.connect(this.port,this.host),w.on("connect",function(){g.ssl?w.requestSsl():w.startup(g.getStartupConf())}),w.on("sslconnect",function(){w.startup(g.getStartupConf())}),this._attachListeners(w),w.once("end",()=>{let E=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(E),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(E):this._handleErrorEvent(E):this._connectionError||this._handleErrorEvent(E)),se.nextTick(()=>{this.emit("end")})})}connect(u){if(u){this._connect(u);return}return new this._Promise((g,w)=>{this._connect(E=>{E?w(E):g()})})}_attachListeners(u){u.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),u.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),u.on("authenticationSASL",this._handleAuthSASL.bind(this)),u.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),u.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),u.on("backendKeyData",this._handleBackendKeyData.bind(this)),u.on("error",this._handleErrorEvent.bind(this)),u.on("errorMessage",this._handleErrorMessage.bind(this)),u.on("readyForQuery",this._handleReadyForQuery.bind(this)),u.on("notice",this._handleNotice.bind(this)),u.on("rowDescription",this._handleRowDescription.bind(this)),u.on("dataRow",this._handleDataRow.bind(this)),u.on("portalSuspended",this._handlePortalSuspended.bind(this)),u.on("emptyQuery",this._handleEmptyQuery.bind(this)),u.on("commandComplete",this._handleCommandComplete.bind(this)),u.on("parseComplete",this._handleParseComplete.bind(this)),u.on("copyInResponse",this._handleCopyInResponse.bind(this)),u.on("copyData",this._handleCopyData.bind(this)),u.on("notification",this._handleNotification.bind(this))}_checkPgPass(u){let g=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(w=>{if(w!==void 0){if(typeof w!="string"){g.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=w}else this.connectionParameters.password=this.password=null;u()}).catch(w=>{g.emit("error",w)}):this.password!==null?u():s(this.connectionParameters,w=>{w!==void 0&&(this.connectionParameters.password=this.password=w),u()})}_handleAuthCleartextPassword(u){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(u){this._checkPgPass(()=>{let g=o.postgresMd5PasswordHash(this.user,this.password,u.salt);this.connection.password(g)})}_handleAuthSASL(u){this._checkPgPass(()=>{this.saslSession=r.startSession(u.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(u){r.continueSession(this.saslSession,this.password,u.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(u){r.finalizeSession(this.saslSession,u.data),this.saslSession=null}_handleBackendKeyData(u){this.processID=u.processID,this.secretKey=u.secretKey}_handleReadyForQuery(u){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:g}=this;this.activeQuery=null,this.readyForQuery=!0,g&&g.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(u){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(u);this.emit("error",u)}}_handleErrorEvent(u){if(this._connecting)return this._handleErrorWhileConnecting(u);this._queryable=!1,this._errorAllQueries(u),this.emit("error",u)}_handleErrorMessage(u){if(this._connecting)return this._handleErrorWhileConnecting(u);let g=this.activeQuery;if(!g){this._handleErrorEvent(u);return}this.activeQuery=null,g.handleError(u,this.connection)}_handleRowDescription(u){this.activeQuery.handleRowDescription(u)}_handleDataRow(u){this.activeQuery.handleDataRow(u)}_handlePortalSuspended(u){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(u){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(u){this.activeQuery.handleCommandComplete(u,this.connection)}_handleParseComplete(u){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(u){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(u){this.activeQuery.handleCopyData(u,this.connection)}_handleNotification(u){this.emit("notification",u)}_handleNotice(u){this.emit("notice",u)}getStartupConf(){var u=this.connectionParameters,g={user:u.user,database:u.database},w=u.application_name||u.fallback_application_name;return w&&(g.application_name=w),u.replication&&(g.replication=""+u.replication),u.statement_timeout&&(g.statement_timeout=String(parseInt(u.statement_timeout,10))),u.lock_timeout&&(g.lock_timeout=String(parseInt(u.lock_timeout,10))),u.idle_in_transaction_session_timeout&&(g.idle_in_transaction_session_timeout=String(parseInt(u.idle_in_transaction_session_timeout,10))),u.options&&(g.options=u.options),g}cancel(u,g){if(u.activeQuery===g){var w=this.connection;this.host&&this.host.indexOf("/")===0?w.connect(this.host+"/.s.PGSQL."+this.port):w.connect(this.port,this.host),w.on("connect",function(){w.cancel(u.processID,u.secretKey)})}else u.queryQueue.indexOf(g)!==-1&&u.queryQueue.splice(u.queryQueue.indexOf(g),1)}setTypeParser(u,g,w){return this._types.setTypeParser(u,g,w)}getTypeParser(u,g){return this._types.getTypeParser(u,g)}escapeIdentifier(u){return'"'+u.replace(/"/g,'""')+'"'}escapeLiteral(u){for(var g=!1,w="'",E=0;E<u.length;E++){var x=u[E];x==="'"?w+=x+x:x==="\\"?(w+=x+x,g=!0):w+=x}return w+="'",g===!0&&(w=" E"+w),w}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let u=this.activeQuery.submit(this.connection);u&&se.nextTick(()=>{this.activeQuery.handleError(u,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(u,g,w){var E,x,S,O,M;if(u==null)throw new TypeError("Client was passed a null or undefined query");return typeof u.submit=="function"?(S=u.query_timeout||this.connectionParameters.query_timeout,x=E=u,typeof g=="function"&&(E.callback=E.callback||g)):(S=this.connectionParameters.query_timeout,E=new l(u,g,w),E.callback||(x=new this._Promise((C,B)=>{E.callback=(A,k)=>A?B(A):C(k)}))),S&&(M=E.callback,O=setTimeout(()=>{var C=new Error("Query read timeout");se.nextTick(()=>{E.handleError(C,this.connection)}),M(C),E.callback=()=>{};var B=this.queryQueue.indexOf(E);B>-1&&this.queryQueue.splice(B,1),this._pulseQueryQueue()},S),E.callback=(C,B)=>{clearTimeout(O),M(C,B)}),this.binary&&!E.binary&&(E.binary=!0),E._result&&!E._result._types&&(E._result._types=this._types),this._queryable?this._ending?(se.nextTick(()=>{E.handleError(new Error("Client was closed and is not queryable"),this.connection)}),x):(this.queryQueue.push(E),this._pulseQueryQueue(),x):(se.nextTick(()=>{E.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),x)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(u){if(this._ending=!0,!this.connection._connecting)if(u)u();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),u)this.connection.once("end",u);else return new this._Promise(g=>{this.connection.once("end",g)})}};y(p,"Client");var f=p;f.Query=l,e.exports=f}),Rd=ie((n,e)=>{K();var t=Ft().EventEmitter,o=y(function(){},"NOOP"),r=y((u,g)=>{let w=u.findIndex(g);return w===-1?void 0:u.splice(w,1)[0]},"removeWhere"),s=class{constructor(g,w,E){this.client=g,this.idleListener=w,this.timeoutId=E}};y(s,"IdleItem");var i=s,a=class{constructor(g){this.callback=g}};y(a,"PendingItem");var l=a;function h(){throw new Error("Release called on client which has already been released to the pool.")}y(h,"throwOnDoubleRelease");function d(u,g){if(g)return{callback:g,result:void 0};let w,E,x=y(function(O,M){O?w(O):E(M)},"cb"),S=new u(function(O,M){E=O,w=M}).catch(O=>{throw Error.captureStackTrace(O),O});return{callback:x,result:S}}y(d,"promisify");function p(u,g){return y(function w(E){E.client=g,g.removeListener("error",w),g.on("error",()=>{u.log("additional client error after disconnection due to error",E)}),u._remove(g),u.emit("error",E,g)},"idleListener")}y(p,"makeIdleListener");var f=class extends t{constructor(g,w){super(),this.options=Object.assign({},g),g!=null&&"password"in g&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:g.password}),g!=null&&g.ssl&&g.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||w||Br().Client,this.Promise=this.options.Promise||cn.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(w=>{this._remove(w.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let g=this._pendingQueue.shift();if(this._idle.length){let w=this._idle.pop();clearTimeout(w.timeoutId);let E=w.client;E.ref&&E.ref();let x=w.idleListener;return this._acquireClient(E,g,x,!1)}if(!this._isFull())return this.newClient(g);throw new Error("unexpected condition")}_remove(g){let w=r(this._idle,E=>E.client===g);w!==void 0&&clearTimeout(w.timeoutId),this._clients=this._clients.filter(E=>E!==g),g.end(),this.emit("remove",g)}connect(g){if(this.ending){let x=new Error("Cannot use a pool after calling end on the pool");return g?g(x):this.Promise.reject(x)}let w=d(this.Promise,g),E=w.result;if(this._isFull()||this._idle.length){if(this._idle.length&&se.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new l(w.callback)),E;let x=y((M,C,B)=>{clearTimeout(O),w.callback(M,C,B)},"queueCallback"),S=new l(x),O=setTimeout(()=>{r(this._pendingQueue,M=>M.callback===x),S.timedOut=!0,w.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(S),E}return this.newClient(new l(w.callback)),E}newClient(g){let w=new this.Client(this.options);this._clients.push(w);let E=p(this,w);this.log("checking client timeout");let x,S=!1;this.options.connectionTimeoutMillis&&(x=setTimeout(()=>{this.log("ending client due to timeout"),S=!0,w.connection?w.connection.stream.destroy():w.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),w.connect(O=>{if(x&&clearTimeout(x),w.on("error",E),O)this.log("client failed to connect",O),this._clients=this._clients.filter(M=>M!==w),S&&(O.message="Connection terminated due to connection timeout"),this._pulseQueue(),g.timedOut||g.callback(O,void 0,o);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let M=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(w),this._idle.findIndex(C=>C.client===w)!==-1&&this._acquireClient(w,new l((C,B,A)=>A()),E,!1)},this.options.maxLifetimeSeconds*1e3);M.unref(),w.once("end",()=>clearTimeout(M))}return this._acquireClient(w,g,E,!0)}})}_acquireClient(g,w,E,x){x&&this.emit("connect",g),this.emit("acquire",g),g.release=this._releaseOnce(g,E),g.removeListener("error",E),w.timedOut?x&&this.options.verify?this.options.verify(g,g.release):g.release():x&&this.options.verify?this.options.verify(g,S=>{if(S)return g.release(S),w.callback(S,void 0,o);w.callback(void 0,g,g.release)}):w.callback(void 0,g,g.release)}_releaseOnce(g,w){let E=!1;return x=>{E&&h(),E=!0,this._release(g,w,x)}}_release(g,w,E){if(g.on("error",w),g._poolUseCount=(g._poolUseCount||0)+1,this.emit("release",E,g),E||this.ending||!g._queryable||g._ending||g._poolUseCount>=this.options.maxUses){g._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(g),this._pulseQueue();return}if(this._expired.has(g)){this.log("remove expired client"),this._expired.delete(g),this._remove(g),this._pulseQueue();return}let x;this.options.idleTimeoutMillis&&(x=setTimeout(()=>{this.log("remove idle client"),this._remove(g)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&x.unref()),this.options.allowExitOnIdle&&g.unref(),this._idle.push(new i(g,w,x)),this._pulseQueue()}query(g,w,E){if(typeof g=="function"){let S=d(this.Promise,g);return yr(function(){return S.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),S.result}typeof w=="function"&&(E=w,w=void 0);let x=d(this.Promise,E);return E=x.callback,this.connect((S,O)=>{if(S)return E(S);let M=!1,C=y(B=>{M||(M=!0,O.release(B),E(B))},"onError");O.once("error",C),this.log("dispatching query");try{O.query(g,w,(B,A)=>{if(this.log("query dispatched"),O.removeListener("error",C),!M)return M=!0,O.release(B),B?E(B):E(void 0,A)})}catch(B){return O.release(B),E(B)}}),x.result}end(g){if(this.log("ending"),this.ending){let E=new Error("Called end on pool more than once");return g?g(E):this.Promise.reject(E)}this.ending=!0;let w=d(this.Promise,g);return this._endCallback=w.callback,this._pulseQueue(),w.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((g,w)=>g+(this._expired.has(w)?1:0),0)}get totalCount(){return this._clients.length}};y(f,"Pool");var v=f;e.exports=v}),Pa={};tt(Pa,{default:()=>Ma});var Ma,Nd=Ue(()=>{K(),Ma={}}),Dd=ie((n,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),$d=ie((n,e)=>{K();var t=Ft().EventEmitter,o=(un(),Pe(Io)),r=pn(),s=e.exports=function(a,l,h){t.call(this),a=r.normalizeQueryConfig(a,l,h),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode=a.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",(function(d){d==="row"&&(this._emitRowEvents=!0)}).bind(this))};o.inherits(s,t);var i={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};s.prototype.handleError=function(a){var l=this.native.pq.resultErrorFields();if(l)for(var h in l){var d=i[h]||h;a[d]=l[h]}this.callback?this.callback(a):this.emit("error",a),this.state="error"},s.prototype.then=function(a,l){return this._getPromise().then(a,l)},s.prototype.catch=function(a){return this._getPromise().catch(a)},s.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise((function(a,l){this._once("end",a),this._once("error",l)}).bind(this)),this._promise)},s.prototype.submit=function(a){this.state="running";var l=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var h=y(function(f,v,u){if(a.native.arrayMode=!1,yr(function(){l.emit("_done")}),f)return l.handleError(f);l._emitRowEvents&&(u.length>1?v.forEach((g,w)=>{g.forEach(E=>{l.emit("row",E,u[w])})}):v.forEach(function(g){l.emit("row",g,u)})),l.state="end",l.emit("end",u),l.callback&&l.callback(null,u)},"after");if(se.domain&&(h=se.domain.bind(h)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var d=(this.values||[]).map(r.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let f=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return h(f)}return a.native.execute(this.name,d,h)}return a.native.prepare(this.name,this.text,d.length,function(f){return f?h(f):(a.namedQueries[l.name]=l.text,l.native.execute(l.name,d,h))})}else if(this.values){if(!Array.isArray(this.values)){let f=new Error("Query values must be an array");return h(f)}var p=this.values.map(r.prepareValue);a.native.query(this.text,p,h)}else a.native.query(this.text,h)}}),jd=ie((n,e)=>{K();var t=(Nd(),Pe(Pa)),o=Sr();Dd();var r=Ft().EventEmitter,s=(un(),Pe(Io)),i=_r(),a=$d(),l=e.exports=function(h){r.call(this),h=h||{},this._Promise=h.Promise||cn.Promise,this._types=new o(h.types),this.native=new t({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var d=this.connectionParameters=new i(h);this.user=d.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:d.password}),this.database=d.database,this.host=d.host,this.port=d.port,this.namedQueries={}};l.Query=a,s.inherits(l,r),l.prototype._errorAllQueries=function(h){let d=y(p=>{se.nextTick(()=>{p.native=this.native,p.handleError(h)})},"enqueueError");this._hasActiveQuery()&&(d(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(d),this._queryQueue.length=0},l.prototype._connect=function(h){var d=this;if(this._connecting){se.nextTick(()=>h(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(p,f){if(p)return h(p);d.native.connect(f,function(v){if(v)return d.native.end(),h(v);d._connected=!0,d.native.on("error",function(u){d._queryable=!1,d._errorAllQueries(u),d.emit("error",u)}),d.native.on("notification",function(u){d.emit("notification",{channel:u.relname,payload:u.extra})}),d.emit("connect"),d._pulseQueryQueue(!0),h()})})},l.prototype.connect=function(h){if(h){this._connect(h);return}return new this._Promise((d,p)=>{this._connect(f=>{f?p(f):d()})})},l.prototype.query=function(h,d,p){var f,v,u,g,w;if(h==null)throw new TypeError("Client was passed a null or undefined query");if(typeof h.submit=="function")u=h.query_timeout||this.connectionParameters.query_timeout,v=f=h,typeof d=="function"&&(h.callback=d);else if(u=this.connectionParameters.query_timeout,f=new a(h,d,p),!f.callback){let E,x;v=new this._Promise((S,O)=>{E=S,x=O}),f.callback=(S,O)=>S?x(S):E(O)}return u&&(w=f.callback,g=setTimeout(()=>{var E=new Error("Query read timeout");se.nextTick(()=>{f.handleError(E,this.connection)}),w(E),f.callback=()=>{};var x=this._queryQueue.indexOf(f);x>-1&&this._queryQueue.splice(x,1),this._pulseQueryQueue()},u),f.callback=(E,x)=>{clearTimeout(g),w(E,x)}),this._queryable?this._ending?(f.native=this.native,se.nextTick(()=>{f.handleError(new Error("Client was closed and is not queryable"))}),v):(this._queryQueue.push(f),this._pulseQueryQueue(),v):(f.native=this.native,se.nextTick(()=>{f.handleError(new Error("Client has encountered a connection error and is not queryable"))}),v)},l.prototype.end=function(h){var d=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,h));var p;return h||(p=new this._Promise(function(f,v){h=y(u=>u?v(u):f(),"cb")})),this.native.end(function(){d._errorAllQueries(new Error("Connection terminated")),se.nextTick(()=>{d.emit("end"),h&&h()})}),p},l.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},l.prototype._pulseQueryQueue=function(h){if(this._connected&&!this._hasActiveQuery()){var d=this._queryQueue.shift();if(!d){h||this.emit("drain");return}this._activeQuery=d,d.submit(this);var p=this;d.once("_done",function(){p._pulseQueryQueue()})}},l.prototype.cancel=function(h){this._activeQuery===h?this.native.cancel(function(){}):this._queryQueue.indexOf(h)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(h),1)},l.prototype.ref=function(){},l.prototype.unref=function(){},l.prototype.setTypeParser=function(h,d,p){return this._types.setTypeParser(h,d,p)},l.prototype.getTypeParser=function(h,d){return this._types.getTypeParser(h,d)}}),ri=ie((n,e)=>{K(),e.exports=jd()}),Br=ie((n,e)=>{K();var t=Ld(),o=hn(),r=Oa(),s=Rd(),{DatabaseError:i}=Ba(),a=y(h=>{var d;return d=class extends s{constructor(p){super(p,h)}},y(d,"BoundPool"),d},"poolFactory"),l=y(function(h){this.defaults=o,this.Client=h,this.Query=this.Client.Query,this.Pool=a(this.Client),this._pools=[],this.Connection=r,this.types=dn(),this.DatabaseError=i},"PG");typeof se.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new l(ri()):(e.exports=new l(t),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var h=null;try{h=new l(ri())}catch(d){if(d.code!=="MODULE_NOT_FOUND")throw d}return Object.defineProperty(e.exports,"native",{value:h}),h}}))});K();var La=ro(Br());Tr();K();Tr();Sa();var Fd=ro(pn()),Ud=ro(Sr());function Ra(n){return n instanceof J?"\\x"+n.toString("hex"):n}y(Ra,"encodeBuffersAsBytea");var Na=class Da extends Error{constructor(e){super(e),ee(this,"name","NeonDbError"),ee(this,"severity"),ee(this,"code"),ee(this,"detail"),ee(this,"hint"),ee(this,"position"),ee(this,"internalPosition"),ee(this,"internalQuery"),ee(this,"where"),ee(this,"schema"),ee(this,"table"),ee(this,"column"),ee(this,"dataType"),ee(this,"constraint"),ee(this,"file"),ee(this,"line"),ee(this,"routine"),ee(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Da)}};y(Na,"NeonDbError");var Yt=Na,si="transaction() expects an array of queries, or a function returning an array of queries",Hd=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function gn(n,{arrayMode:e,fullResults:t,fetchOptions:o,isolationLevel:r,readOnly:s,deferrable:i,queryCallback:a,resultCallback:l,authToken:h}={}){if(!n)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let d;try{d=Cr(n)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(n))}let{protocol:p,username:f,hostname:v,port:u,pathname:g}=d;if(p!=="postgres:"&&p!=="postgresql:"||!f||!v||!g)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function w(x,...S){let O,M;if(typeof x=="string")O=x,M=S[1],S=S[0]??[];else{O="";for(let B=0;B<x.length;B++)O+=x[B],B<S.length&&(O+="$"+(B+1))}S=S.map(B=>Ra((0,Fd.prepareValue)(B)));let C={query:O,params:S};return a&&a(C),$a(E,C,M)}y(w,"resolve"),w.transaction=async(x,S)=>{if(typeof x=="function"&&(x=x(w)),!Array.isArray(x))throw new Error(si);x.forEach(C=>{if(C[Symbol.toStringTag]!=="NeonQueryPromise")throw new Error(si)});let O=x.map(C=>C.parameterizedQuery),M=x.map(C=>C.opts??{});return E(O,M,S)};async function E(x,S,O){let{fetchEndpoint:M,fetchFunction:C}=fn,B=Array.isArray(x)?{queries:x}:x,A=o??{},k=e??!1,T=t??!1,_=r,$=s,F=i;O!==void 0&&(O.fetchOptions!==void 0&&(A={...A,...O.fetchOptions}),O.arrayMode!==void 0&&(k=O.arrayMode),O.fullResults!==void 0&&(T=O.fullResults),O.isolationLevel!==void 0&&(_=O.isolationLevel),O.readOnly!==void 0&&($=O.readOnly),O.deferrable!==void 0&&(F=O.deferrable)),S!==void 0&&!Array.isArray(S)&&S.fetchOptions!==void 0&&(A={...A,...S.fetchOptions});let L=h;!Array.isArray(S)&&(S==null?void 0:S.authToken)!==void 0&&(L=S.authToken);let j=typeof M=="function"?M(v,u,{jwtAuth:L!==void 0}):M,q={"Neon-Connection-String":n,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},W=await ja(L);W&&(q.Authorization=`Bearer ${W}`),Array.isArray(x)&&(_!==void 0&&(q["Neon-Batch-Isolation-Level"]=_),$!==void 0&&(q["Neon-Batch-Read-Only"]=String($)),F!==void 0&&(q["Neon-Batch-Deferrable"]=String(F)));let Z;try{Z=await(C??fetch)(j,{method:"POST",body:JSON.stringify(B),headers:q,...A})}catch(X){let be=new Yt(`Error connecting to database: ${X.message}`);throw be.sourceError=X,be}if(Z.ok){let X=await Z.json();if(Array.isArray(x)){let be=X.results;if(!Array.isArray(be))throw new Yt("Neon internal error: unexpected result format");return be.map((de,he)=>{let Ze=S[he]??{},ot=Ze.arrayMode??k,mt=Ze.fullResults??T;return Jn(de,{arrayMode:ot,fullResults:mt,parameterizedQuery:x[he],resultCallback:l,types:Ze.types})})}else{let be=S??{},de=be.arrayMode??k,he=be.fullResults??T;return Jn(X,{arrayMode:de,fullResults:he,parameterizedQuery:x,resultCallback:l,types:be.types})}}else{let{status:X}=Z;if(X===400){let be=await Z.json(),de=new Yt(be.message);for(let he of Hd)de[he]=be[he]??void 0;throw de}else{let be=await Z.text();throw new Yt(`Server error (HTTP status ${X}): ${be}`)}}}return y(E,"execute"),w}y(gn,"neon");function $a(n,e,t){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:e,opts:t,then:y((o,r)=>n(e,t).then(o,r),"then"),catch:y(o=>n(e,t).catch(o),"catch"),finally:y(o=>n(e,t).finally(o),"finally")}}y($a,"createNeonQueryPromise");function Jn(n,{arrayMode:e,fullResults:t,parameterizedQuery:o,resultCallback:r,types:s}){let i=new Ud.default(s),a=n.fields.map(d=>d.name),l=n.fields.map(d=>i.getTypeParser(d.dataTypeID)),h=e===!0?n.rows.map(d=>d.map((p,f)=>p===null?null:l[f](p))):n.rows.map(d=>Object.fromEntries(d.map((p,f)=>[a[f],p===null?null:l[f](p)])));return r&&r(o,n,h,{arrayMode:e,fullResults:t}),t?(n.viaNeonFetch=!0,n.rowAsArray=e,n.rows=h,n._parsers=l,n._types=i,n):h}y(Jn,"processQueryResult");async function ja(n){if(typeof n=="string")return n;if(typeof n=="function")try{return await Promise.resolve(n())}catch(e){let t=new Yt("Error getting auth token.");throw e instanceof Error&&(t=new Yt(`Error getting auth token: ${e.message}`)),t}}y(ja,"getAuthToken");var zd=ro(_r()),so=ro(Br()),Fa=class extends La.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){var h,d;let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let o=((h=this.config)==null?void 0:h.host)!==void 0||((d=this.config)==null?void 0:d.connectionString)!==void 0||se.env.PGHOST!==void 0,r=se.env.USER??se.env.USERNAME;if(!o&&this.host==="localhost"&&this.user===r&&this.database===r&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${r}, db: ${r}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let s=super.connect(e),i=t.pipelineTLS&&this.ssl,a=t.pipelineConnect==="password";if(!i&&!t.pipelineConnect)return s;let l=this.connection;if(i&&l.on("connect",()=>l.stream.emit("data","S")),a){l.removeAllListeners("authenticationCleartextPassword"),l.removeAllListeners("readyForQuery"),l.once("readyForQuery",()=>l.on("readyForQuery",this._handleReadyForQuery.bind(this)));let p=this.ssl?"sslconnect":"connect";l.on(p,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return s}async _handleAuthSASLContinue(e){let t=this.saslSession,o=this.password,r=e.data;if(t.message!=="SASLInitialResponse"||typeof o!="string"||typeof r!="string")throw new Error("SASL: protocol error");let s=Object.fromEntries(r.split(",").map(W=>{if(!/^.=/.test(W))throw new Error("SASL: Invalid attribute pair entry");let Z=W[0],X=W.substring(2);return[Z,X]})),i=s.r,a=s.s,l=s.i;if(!i||!/^[!-+--~]+$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!a||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!l||!/^[1-9][0-9]*$/.test(l))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!i.startsWith(t.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(i.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let h=parseInt(l,10),d=J.from(a,"base64"),p=new TextEncoder,f=p.encode(o),v=await Re.subtle.importKey("raw",f,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),u=new Uint8Array(await Re.subtle.sign("HMAC",v,J.concat([d,J.from([0,0,0,1])]))),g=u;for(var w=0;w<h-1;w++)u=new Uint8Array(await Re.subtle.sign("HMAC",v,u)),g=J.from(g.map((W,Z)=>g[Z]^u[Z]));let E=g,x=await Re.subtle.importKey("raw",E,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),S=new Uint8Array(await Re.subtle.sign("HMAC",x,p.encode("Client Key"))),O=await Re.subtle.digest("SHA-256",S),M="n=*,r="+t.clientNonce,C="r="+i+",s="+a+",i="+h,B="c=biws,r="+i,A=M+","+C+","+B,k=await Re.subtle.importKey("raw",O,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var T=new Uint8Array(await Re.subtle.sign("HMAC",k,p.encode(A))),_=J.from(S.map((W,Z)=>S[Z]^T[Z])),$=_.toString("base64");let F=await Re.subtle.importKey("raw",E,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),L=await Re.subtle.sign("HMAC",F,p.encode("Server Key")),j=await Re.subtle.importKey("raw",L,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var q=J.from(await Re.subtle.sign("HMAC",j,p.encode(A)));t.message="SASLResponse",t.serverSignature=q.toString("base64"),t.response=B+",p="+$,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};y(Fa,"NeonClient");var Vd=Fa;function Ua(n,e){if(e)return{callback:e,result:void 0};let t,o,r=y(function(i,a){i?t(i):o(a)},"cb"),s=new n(function(i,a){o=i,t=a});return{callback:r,result:s}}y(Ua,"promisify");var qd=class extends La.Pool{constructor(){super(...arguments),ee(this,"Client",Vd),ee(this,"hasFetchUnsupportedListeners",!1)}on(e,t){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,o){var s;if(!fn.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,t,o);typeof t=="function"&&(o=t,t=void 0);let r=Ua(this.Promise,o);o=r.callback;try{let i=new zd.default(this.options),a=encodeURIComponent,l=encodeURI,h=`postgresql://${a(i.user)}:${a(i.password)}@${a(i.host)}/${l(i.database)}`,d=typeof e=="string"?e:e.text,p=t??e.values??[];gn(h,{fullResults:!0,arrayMode:e.rowMode==="array"})(d,p,{types:e.types??((s=this.options)==null?void 0:s.types)}).then(f=>o(void 0,f)).catch(f=>o(f))}catch(i){o(i)}return r.result}};y(qd,"NeonPool");so.ClientBase;so.Connection;so.DatabaseError;so.Query;so.defaults;so.types;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/class Qd{constructor(){this.sql=gn("postgresql://neondb_owner:npg_EsOW9R1whuGy@ep-raspy-tree-a8xdn8ec-pooler.eastus2.azure.neon.tech/neondb?sslmode=require")}async loadAllNotes(){try{return await this.sql("select id,title,hold,TO_CHAR(updated_at, 'YYYY/MM/DD HH:mm:ss') AS updated_at from notes order by hold DESC, updated_at ASC;")}catch(e){throw e}}async findNoteById(e){try{return(await this.sql("select * from notes where id = $1;",[e]))[0]}catch(t){throw t}}async saveNewNote(e,t){try{return(await this.sql("INSERT INTO notes (title,updated_at) values ($1,$2) RETURNING *",[e,t]))[0]}catch(o){throw o}}async updateNote(e,t,o){try{return await this.sql("UPDATE notes SET content = $1,updated_at = $2 where id = $3",[t,o,e]),{status:200,updated_at:o}}catch(r){throw r}}async updateNoteTitle(e,t,o){try{return await this.sql("UPDATE notes SET title = $1,updated_at = $2 where id = $3",[t,o,e]),{status:200,updated_at:o}}catch(r){throw r}}async updateNoteHoldState(e,t,o){try{return await this.sql("UPDATE notes SET hold = $1,updated_at = $2 where id = $3",[t,o,e]),{status:200}}catch(r){throw r}}async deleteNoteById(e){try{return await this.sql("DELETE FROM notes where id = $1 ",[e]),{status:200}}catch(t){reject(t)}}}class Wd{getCurrentTime(){return new Date().toISOString().slice(0,19).replace("T"," ")}getDate(){return this.getCurrentTime().split(" ")[0]}}const Ut=new Qd,Gd=new Wd,mn=Gd.getCurrentTime();async function Kd(){return await Ut.loadAllNotes()}async function Yd(n){return await Ut.findNoteById(n)}async function Zd(n){return await Ut.saveNewNote(n,mn)}async function Xd(n,e){return await Ut.updateNote(n,e,mn)}async function Jd(n,e){return await Ut.updateNoteTitle(n,e,mn)}async function eh(n,e){return await Ut.updateNoteHoldState(n,e,mn)}async function th(n){return await Ut.deleteNoteById(n)}const oh=()=>{},nh=()=>{},rh="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='20px'%20height='20px'%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3egithub%20[%23c0c0c0]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-140.000000,%20-7559.000000)'%20fill='%23c0c0c0'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M94,7399%20C99.523,7399%20104,7403.59%20104,7409.253%20C104,7413.782%20101.138,7417.624%2097.167,7418.981%20C96.66,7419.082%2096.48,7418.762%2096.48,7418.489%20C96.48,7418.151%2096.492,7417.047%2096.492,7415.675%20C96.492,7414.719%2096.172,7414.095%2095.813,7413.777%20C98.04,7413.523%20100.38,7412.656%20100.38,7408.718%20C100.38,7407.598%2099.992,7406.684%2099.35,7405.966%20C99.454,7405.707%2099.797,7404.664%2099.252,7403.252%20C99.252,7403.252%2098.414,7402.977%2096.505,7404.303%20C95.706,7404.076%2094.85,7403.962%2094,7403.958%20C93.15,7403.962%2092.295,7404.076%2091.497,7404.303%20C89.586,7402.977%2088.746,7403.252%2088.746,7403.252%20C88.203,7404.664%2088.546,7405.707%2088.649,7405.966%20C88.01,7406.684%2087.619,7407.598%2087.619,7408.718%20C87.619,7412.646%2089.954,7413.526%2092.175,7413.785%20C91.889,7414.041%2091.63,7414.493%2091.54,7415.156%20C90.97,7415.418%2089.522,7415.871%2088.63,7414.304%20C88.63,7414.304%2088.101,7413.319%2087.097,7413.247%20C87.097,7413.247%2086.122,7413.234%2087.029,7413.87%20C87.029,7413.87%2087.684,7414.185%2088.139,7415.37%20C88.139,7415.37%2088.726,7417.2%2091.508,7416.58%20C91.513,7417.437%2091.522,7418.245%2091.522,7418.489%20C91.522,7418.76%2091.338,7419.077%2090.839,7418.982%20C86.865,7417.627%2084,7413.783%2084,7409.253%20C84,7403.59%2088.478,7399%2094,7399'%20id='github-[%23c0c0c0]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",sh="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23c0c0c0'%20height='20px'%20width='20px'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='-143%20145%20512%20512'%20xml:space='preserve'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M113,145c-141.4,0-256,114.6-256,256s114.6,256,256,256s256-114.6,256-256S254.4,145,113,145z%20M41.4,508.1H-8.5V348.4h49.9%20V508.1z%20M15.1,328.4h-0.4c-18.1,0-29.8-12.2-29.8-27.7c0-15.8,12.1-27.7,30.5-27.7c18.4,0,29.7,11.9,30.1,27.7%20C45.6,316.1,33.9,328.4,15.1,328.4z%20M241,508.1h-56.6v-82.6c0-21.6-8.8-36.4-28.3-36.4c-14.9,0-23.2,10-27,19.6%20c-1.4,3.4-1.2,8.2-1.2,13.1v86.3H71.8c0,0,0.7-146.4,0-159.7h56.1v25.1c3.3-11,21.2-26.6,49.8-26.6c35.5,0,63.3,23,63.3,72.4V508.1z%20'/%3e%3c/g%3e%3c/svg%3e",ih={__name:"NavComponent",setup(n,{expose:e}){e();const t={NavButtonComponent:Vu,get links(){return ed},get BookOpenIcon(){return qu},get sendGitHubBrowser(){return oh},get sendLinkdeInBrowser(){return nh}};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}},ah={class:"col-span-2 h-full w-full flex flex-col border-r border-gray-500 relative"},lh={class:"flex flex-col"},ch={id:"navSocialMediaLinks",class:"absolute bottom-0 right-1/2 w-auto"};function uh(n,e,t,o,r,s){return oe(),ae("div",ah,[e[4]||(e[4]=U("div",{class:"flex flex-row mb-6 items-end border-b rounded-md border-slate-800 shadow-lg p-4 shadow-slate-600 mx-auto"},[U("h5",{class:"font-sans text-xl antialiased font-semibold text-blue-gray-900"}," MemoWave ")],-1)),U("nav",lh,[(oe(!0),ae(hr,null,Ri(o.links,i=>(oe(),Jt(o.NavButtonComponent,{route:i},null,8,["route"]))),256))]),U("div",ch,[U("button",{class:"mx-1 hover:-translate-y-0.5 transition-transform",onClick:e[0]||(e[0]=i=>o.sendGitHubBrowser())},e[2]||(e[2]=[U("img",{src:rh,alt:""},null,-1)])),U("button",{class:"mx-1 hover:-translate-y-0.5 transition-transform",onClick:e[1]||(e[1]=i=>o.sendLinkdeInBrowser())},e[3]||(e[3]=[U("img",{src:sh,alt:""},null,-1)]))])])}const dh=Fe(ih,[["render",uh],["__file","/home/marcos/DEV/vue-notes-app/src/components/shared/NavComponent.vue"]]);function Ro(n,e,t){return Array.isArray(n)?(n.length=Math.max(n.length,e),n.splice(e,1,t),t):(n[e]=t,t)}function Rn(n,e){if(Array.isArray(n)){n.splice(e,1);return}delete n[e]}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let er;const Co=n=>er=n,Ha=Symbol("pinia");function Nt(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var it;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(it||(it={}));const Mt=typeof window<"u",ii=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null};function hh(n,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function Ir(n,e,t){const o=new XMLHttpRequest;o.open("GET",n),o.responseType="blob",o.onload=function(){qa(o.response,e,t)},o.onerror=function(){console.error("could not download file")},o.send()}function za(n){const e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function $o(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{const t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}const jo=typeof navigator=="object"?navigator:{userAgent:""},Va=/Macintosh/.test(jo.userAgent)&&/AppleWebKit/.test(jo.userAgent)&&!/Safari/.test(jo.userAgent),qa=Mt?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!Va?ph:"msSaveOrOpenBlob"in jo?fh:gh:()=>{};function ph(n,e="download",t){const o=document.createElement("a");o.download=e,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?za(o.href)?Ir(n,e,t):(o.target="_blank",$o(o)):$o(o)):(o.href=URL.createObjectURL(n),setTimeout(function(){URL.revokeObjectURL(o.href)},4e4),setTimeout(function(){$o(o)},0))}function fh(n,e="download",t){if(typeof n=="string")if(za(n))Ir(n,e,t);else{const o=document.createElement("a");o.href=n,o.target="_blank",setTimeout(function(){$o(o)})}else navigator.msSaveOrOpenBlob(hh(n,t),e)}function gh(n,e,t,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof n=="string")return Ir(n,e,t);const r=n.type==="application/octet-stream",s=/constructor/i.test(String(ii.HTMLElement))||"safari"in ii,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||r&&s||Va)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let l=a.result;if(typeof l!="string")throw o=null,new Error("Wrong reader.result type");l=i?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=l:location.assign(l),o=null},a.readAsDataURL(n)}else{const a=URL.createObjectURL(n);o?o.location.assign(a):location.href=a,o=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function Oe(n,e){const t="🍍 "+n;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(t,e):e==="error"?console.error(t):e==="warn"?console.warn(t):console.log(t)}function Ar(n){return"_a"in n&&"install"in n}function Qa(){if(!("clipboard"in navigator))return Oe("Your browser doesn't support the Clipboard API","error"),!0}function Wa(n){return n instanceof Error&&n.message.toLowerCase().includes("document is not focused")?(Oe('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function mh(n){if(!Qa())try{await navigator.clipboard.writeText(JSON.stringify(n.state.value)),Oe("Global state copied to clipboard.")}catch(e){if(Wa(e))return;Oe("Failed to serialize the state. Check the console for more details.","error"),console.error(e)}}async function vh(n){if(!Qa())try{Ga(n,JSON.parse(await navigator.clipboard.readText())),Oe("Global state pasted from clipboard.")}catch(e){if(Wa(e))return;Oe("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(e)}}async function bh(n){try{qa(new Blob([JSON.stringify(n.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(e){Oe("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}let dt;function yh(){dt||(dt=document.createElement("input"),dt.type="file",dt.accept=".json");function n(){return new Promise((e,t)=>{dt.onchange=async()=>{const o=dt.files;if(!o)return e(null);const r=o.item(0);return e(r?{text:await r.text(),file:r}:null)},dt.oncancel=()=>e(null),dt.onerror=t,dt.click()})}return n}async function wh(n){try{const t=await yh()();if(!t)return;const{text:o,file:r}=t;Ga(n,JSON.parse(o)),Oe(`Global state imported from "${r.name}".`)}catch(e){Oe("Failed to import the state from JSON. Check the console for more details.","error"),console.error(e)}}function Ga(n,e){for(const t in e){const o=n.state.value[t];o?Object.assign(o,e[t]):n.state.value[t]=e[t]}}function Je(n){return{_custom:{display:n}}}const Ka="🍍 Pinia (root)",Fo="_root";function kh(n){return Ar(n)?{id:Fo,label:Ka}:{id:n.$id,label:n.$id}}function Eh(n){if(Ar(n)){const t=Array.from(n._s.keys()),o=n._s;return{state:t.map(s=>({editable:!0,key:s,value:n.state.value[s]})),getters:t.filter(s=>o.get(s)._getters).map(s=>{const i=o.get(s);return{editable:!1,key:s,value:i._getters.reduce((a,l)=>(a[l]=i[l],a),{})}})}}const e={state:Object.keys(n.$state).map(t=>({editable:!0,key:t,value:n.$state[t]}))};return n._getters&&n._getters.length&&(e.getters=n._getters.map(t=>({editable:!1,key:t,value:n[t]}))),n._customProperties.size&&(e.customProperties=Array.from(n._customProperties).map(t=>({editable:!0,key:t,value:n[t]}))),e}function xh(n){return n?Array.isArray(n)?n.reduce((e,t)=>(e.keys.push(t.key),e.operations.push(t.type),e.oldValue[t.key]=t.oldValue,e.newValue[t.key]=t.newValue,e),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Je(n.type),key:Je(n.key),oldValue:n.oldValue,newValue:n.newValue}:{}}function Sh(n){switch(n){case it.direct:return"mutation";case it.patchFunction:return"$patch";case it.patchObject:return"$patch";default:return"unknown"}}let Zt=!0;const Uo=[],Tt="pinia:mutations",Ne="pinia",{assign:Ch}=Object,Yo=n=>"🍍 "+n;function _h(n,e){gr({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Uo,app:n},t=>{typeof t.now!="function"&&Oe("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),t.addTimelineLayer({id:Tt,label:"Pinia 🍍",color:15064968}),t.addInspector({id:Ne,label:"Pinia 🍍",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{mh(e)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await vh(e),t.sendInspectorTree(Ne),t.sendInspectorState(Ne)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{bh(e)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await wh(e),t.sendInspectorTree(Ne),t.sendInspectorState(Ne)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:o=>{const r=e._s.get(o);r?typeof r.$reset!="function"?Oe(`Cannot reset "${o}" store because it doesn't have a "$reset" method implemented.`,"warn"):(r.$reset(),Oe(`Store "${o}" reset.`)):Oe(`Cannot reset "${o}" store because it wasn't found.`,"warn")}}]}),t.on.inspectComponent((o,r)=>{const s=o.componentInstance&&o.componentInstance.proxy;if(s&&s._pStores){const i=o.componentInstance.proxy._pStores;Object.values(i).forEach(a=>{o.instanceData.state.push({type:Yo(a.$id),key:"state",editable:!0,value:a._isOptionsAPI?{_custom:{value:ko(a.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>a.$reset()}]}}:Object.keys(a.$state).reduce((l,h)=>(l[h]=a.$state[h],l),{})}),a._getters&&a._getters.length&&o.instanceData.state.push({type:Yo(a.$id),key:"getters",editable:!1,value:a._getters.reduce((l,h)=>{try{l[h]=a[h]}catch(d){l[h]=d}return l},{})})})}}),t.on.getInspectorTree(o=>{if(o.app===n&&o.inspectorId===Ne){let r=[e];r=r.concat(Array.from(e._s.values())),o.rootNodes=(o.filter?r.filter(s=>"$id"in s?s.$id.toLowerCase().includes(o.filter.toLowerCase()):Ka.toLowerCase().includes(o.filter.toLowerCase())):r).map(kh)}}),globalThis.$pinia=e,t.on.getInspectorState(o=>{if(o.app===n&&o.inspectorId===Ne){const r=o.nodeId===Fo?e:e._s.get(o.nodeId);if(!r)return;r&&(o.nodeId!==Fo&&(globalThis.$store=ko(r)),o.state=Eh(r))}}),t.on.editInspectorState((o,r)=>{if(o.app===n&&o.inspectorId===Ne){const s=o.nodeId===Fo?e:e._s.get(o.nodeId);if(!s)return Oe(`store "${o.nodeId}" not found`,"error");const{path:i}=o;Ar(s)?i.unshift("state"):(i.length!==1||!s._customProperties.has(i[0])||i[0]in s.$state)&&i.unshift("$state"),Zt=!1,o.set(s,i,o.state.value),Zt=!0}}),t.on.editComponentState(o=>{if(o.type.startsWith("🍍")){const r=o.type.replace(/^🍍\s*/,""),s=e._s.get(r);if(!s)return Oe(`store "${r}" not found`,"error");const{path:i}=o;if(i[0]!=="state")return Oe(`Invalid path for store "${r}":
${i}
Only state can be modified.`);i[0]="$state",Zt=!1,o.set(s,i,o.state.value),Zt=!0}})})}function Th(n,e){Uo.includes(Yo(e.$id))||Uo.push(Yo(e.$id)),gr({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Uo,app:n,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},t=>{const o=typeof t.now=="function"?t.now.bind(t):Date.now;e.$onAction(({after:i,onError:a,name:l,args:h})=>{const d=Ya++;t.addTimelineEvent({layerId:Tt,event:{time:o(),title:"🛫 "+l,subtitle:"start",data:{store:Je(e.$id),action:Je(l),args:h},groupId:d}}),i(p=>{yt=void 0,t.addTimelineEvent({layerId:Tt,event:{time:o(),title:"🛬 "+l,subtitle:"end",data:{store:Je(e.$id),action:Je(l),args:h,result:p},groupId:d}})}),a(p=>{yt=void 0,t.addTimelineEvent({layerId:Tt,event:{time:o(),logType:"error",title:"💥 "+l,subtitle:"end",data:{store:Je(e.$id),action:Je(l),args:h,error:p},groupId:d}})})},!0),e._customProperties.forEach(i=>{an(()=>Bt(e[i]),(a,l)=>{t.notifyComponentUpdate(),t.sendInspectorState(Ne),Zt&&t.addTimelineEvent({layerId:Tt,event:{time:o(),title:"Change",subtitle:i,data:{newValue:a,oldValue:l},groupId:yt}})},{deep:!0})}),e.$subscribe(({events:i,type:a},l)=>{if(t.notifyComponentUpdate(),t.sendInspectorState(Ne),!Zt)return;const h={time:o(),title:Sh(a),data:Ch({store:Je(e.$id)},xh(i)),groupId:yt};a===it.patchFunction?h.subtitle="⤵️":a===it.patchObject?h.subtitle="🧩":i&&!Array.isArray(i)&&(h.subtitle=i.type),i&&(h.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:i}}),t.addTimelineEvent({layerId:Tt,event:h})},{detached:!0,flush:"sync"});const r=e._hotUpdate;e._hotUpdate=It(i=>{r(i),t.addTimelineEvent({layerId:Tt,event:{time:o(),title:"🔥 "+e.$id,subtitle:"HMR update",data:{store:Je(e.$id),info:Je("HMR update")}}}),t.notifyComponentUpdate(),t.sendInspectorTree(Ne),t.sendInspectorState(Ne)});const{$dispose:s}=e;e.$dispose=()=>{s(),t.notifyComponentUpdate(),t.sendInspectorTree(Ne),t.sendInspectorState(Ne),t.getSettings().logStoreChanges&&Oe(`Disposed "${e.$id}" store 🗑`)},t.notifyComponentUpdate(),t.sendInspectorTree(Ne),t.sendInspectorState(Ne),t.getSettings().logStoreChanges&&Oe(`"${e.$id}" store installed 🆕`)})}let Ya=0,yt;function ai(n,e,t){const o=e.reduce((r,s)=>(r[s]=ko(n)[s],r),{});for(const r in o)n[r]=function(){const s=Ya,i=t?new Proxy(n,{get(...l){return yt=s,Reflect.get(...l)},set(...l){return yt=s,Reflect.set(...l)}}):n;yt=s;const a=o[r].apply(i,arguments);return yt=void 0,a}}function Bh({app:n,store:e,options:t}){if(!e.$id.startsWith("__hot:")){if(e._isOptionsAPI=!!t.state,!e._p._testing){ai(e,Object.keys(t.actions),e._isOptionsAPI);const o=e._hotUpdate;ko(e)._hotUpdate=function(r){o.apply(this,arguments),ai(e,Object.keys(r._hmrPayload.actions),!!e._isOptionsAPI)}}Th(n,e)}}function Ih(){const n=Ni(!0),e=n.run(()=>fe({}));let t=[],o=[];const r=It({install(s){Co(r),r._a=s,s.provide(Ha,r),s.config.globalProperties.$pinia=r,Mt&&_h(s,r),o.forEach(i=>t.push(i)),o=[]},use(s){return this._a?t.push(s):o.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return Mt&&typeof Proxy<"u"&&r.use(Bh),r}function Za(n,e){for(const t in e){const o=e[t];if(!(t in n))continue;const r=n[t];Nt(r)&&Nt(o)&&!Eo(o)&&!pr(o)?n[t]=Za(r,o):n[t]=o}return n}const Ah=()=>{};function li(n,e,t,o=Ah){n.push(e);const r=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),o())};return!t&&fc()&&gc(r),r}function qt(n,...e){n.slice().forEach(t=>{t(...e)})}const Oh=n=>n(),ci=Symbol(),Nn=Symbol();function tr(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,o)=>n.set(o,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const o=e[t],r=n[t];Nt(r)&&Nt(o)&&n.hasOwnProperty(t)&&!Eo(o)&&!pr(o)?n[t]=tr(r,o):n[t]=o}return n}const Ph=Symbol("pinia:skipHydration");function Mh(n){return!Nt(n)||!n.hasOwnProperty(Ph)}const{assign:We}=Object;function ui(n){return!!(Eo(n)&&n.effect)}function di(n,e,t,o){const{state:r,actions:s,getters:i}=e,a=t.state.value[n];let l;function h(){!a&&!o&&(t.state.value[n]=r?r():{});const d=o?Ns(fe(r?r():{}).value):Ns(t.state.value[n]);return We(d,s,Object.keys(i||{}).reduce((p,f)=>(f in d&&console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${f}" in store "${n}".`),p[f]=It(Ge(()=>{Co(t);const v=t._s.get(n);return i[f].call(v,v)})),p),{}))}return l=or(n,h,e,t,o,!0),l}function or(n,e,t={},o,r,s){let i;const a=We({actions:{}},t);if(!o._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=T=>{h?v=T:h==!1&&!B._hotUpdating&&(Array.isArray(v)?v.push(T):console.error("🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let h,d,p=[],f=[],v;const u=o.state.value[n];!s&&!u&&!r&&(o.state.value[n]={});const g=fe({});let w;function E(T){let _;h=d=!1,v=[],typeof T=="function"?(T(o.state.value[n]),_={type:it.patchFunction,storeId:n,events:v}):(tr(o.state.value[n],T),_={type:it.patchObject,payload:T,storeId:n,events:v});const $=w=Symbol();qn().then(()=>{w===$&&(h=!0)}),d=!0,qt(p,_,o.state.value[n])}const x=s?function(){const{state:_}=t,$=_?_():{};this.$patch(F=>{We(F,$)})}:()=>{throw new Error(`🍍: Store "${n}" is built using the setup syntax and does not implement $reset().`)};function S(){i.stop(),p=[],f=[],o._s.delete(n)}const O=(T,_="")=>{if(ci in T)return T[Nn]=_,T;const $=function(){Co(o);const F=Array.from(arguments),L=[],j=[];function q(X){L.push(X)}function W(X){j.push(X)}qt(f,{args:F,name:$[Nn],store:B,after:q,onError:W});let Z;try{Z=T.apply(this&&this.$id===n?this:B,F)}catch(X){throw qt(j,X),X}return Z instanceof Promise?Z.then(X=>(qt(L,X),X)).catch(X=>(qt(j,X),Promise.reject(X))):(qt(L,Z),Z)};return $[ci]=!0,$[Nn]=_,$},M=It({actions:{},getters:{},state:[],hotState:g}),C={_p:o,$id:n,$onAction:li.bind(null,f),$patch:E,$reset:x,$subscribe(T,_={}){const $=li(p,T,_.detached,()=>F()),F=i.run(()=>an(()=>o.state.value[n],L=>{(_.flush==="sync"?d:h)&&T({storeId:n,type:it.direct,events:v},L)},We({},l,_)));return $},$dispose:S},B=wt(We({_hmrPayload:M,_customProperties:It(new Set)},C));o._s.set(n,B);const k=(o._a&&o._a.runWithContext||Oh)(()=>o._e.run(()=>(i=Ni()).run(()=>e({action:O}))));for(const T in k){const _=k[T];if(Eo(_)&&!ui(_)||pr(_))r?Ro(g.value,T,Bn(k,T)):s||(u&&Mh(_)&&(Eo(_)?_.value=u[T]:tr(_,u[T])),o.state.value[n][T]=_),M.state.push(T);else if(typeof _=="function"){const $=r?_:O(_,T);k[T]=$,M.actions[T]=_,a.actions[T]=_}else ui(_)&&(M.getters[T]=s?t.getters[T]:_,Mt&&(k._getters||(k._getters=It([]))).push(T))}if(We(B,k),We(ko(B),k),Object.defineProperty(B,"$state",{get:()=>r?g.value:o.state.value[n],set:T=>{if(r)throw new Error("cannot set hotState");E(_=>{We(_,T)})}}),B._hotUpdate=It(T=>{B._hotUpdating=!0,T._hmrPayload.state.forEach(_=>{if(_ in B.$state){const $=T.$state[_],F=B.$state[_];typeof $=="object"&&Nt($)&&Nt(F)?Za($,F):T.$state[_]=F}Ro(B,_,Bn(T.$state,_))}),Object.keys(B.$state).forEach(_=>{_ in T.$state||Rn(B,_)}),h=!1,d=!1,o.state.value[n]=Bn(T._hmrPayload,"hotState"),d=!0,qn().then(()=>{h=!0});for(const _ in T._hmrPayload.actions){const $=T[_];Ro(B,_,O($,_))}for(const _ in T._hmrPayload.getters){const $=T._hmrPayload.getters[_],F=s?Ge(()=>(Co(o),$.call(B,B))):$;Ro(B,_,F)}Object.keys(B._hmrPayload.getters).forEach(_=>{_ in T._hmrPayload.getters||Rn(B,_)}),Object.keys(B._hmrPayload.actions).forEach(_=>{_ in T._hmrPayload.actions||Rn(B,_)}),B._hmrPayload=T._hmrPayload,B._getters=T._getters,B._hotUpdating=!1}),Mt){const T={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(_=>{Object.defineProperty(B,_,We({value:B[_]},T))})}return o._p.forEach(T=>{if(Mt){const _=i.run(()=>T({store:B,app:o._a,pinia:o,options:a}));Object.keys(_||{}).forEach($=>B._customProperties.add($)),We(B,_)}else We(B,i.run(()=>T({store:B,app:o._a,pinia:o,options:a})))}),B.$state&&typeof B.$state=="object"&&typeof B.$state.constructor=="function"&&!B.$state.constructor.toString().includes("[native code]")&&console.warn(`[🍍]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${B.$id}".`),u&&s&&t.hydrate&&t.hydrate(B.$state,u),h=!0,d=!0,B}/*! #__NO_SIDE_EFFECTS__ */function Lh(n,e,t){let o,r;const s=typeof e=="function";o=n,r=s?t:e;function i(a,l){const h=pc();if(a=a||(h?kt(Ha,null):null),a&&Co(a),!er)throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?
See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.
This will fail in production.`);a=er,a._s.has(o)||(s?or(o,e,r,a):di(o,r,a),i._pinia=a);const d=a._s.get(o);if(l){const p="__hot:"+o,f=s?or(p,e,r,a,!0):di(p,We({},r),a,!0);l._hotUpdate(f),delete a.state.value[p],a._s.delete(p)}if(Mt){const p=dr();if(p&&p.proxy&&!l){const f=p.proxy,v="_pStores"in f?f._pStores:f._pStores={};v[o]=d}}return d}return i.$id=o,i}const Ie=Lh("config",{state:()=>({folderLocation:"",toastMessage:{text:"",type:"",show:!1},user:{name:""}}),getters:{getUserLogin(n){return n.user},getToastMessageContent(n){return n.toastMessage}},actions:{setUserLogin(n){this.user.name=n.name},showMessage(n,e){this.toastMessage.text=n,this.toastMessage.type=e,this.toastMessage.show=!0,setTimeout(()=>{this.toastMessage.text="",this.toastMessage.type="",this.toastMessage.show=!1},3e3)}}}),Rh={__name:"ToastMessageCompontent",setup(n,{expose:e}){e();const t=Ie(),o=wt({showMessage:!1,messageToast:"",type:""});t.$subscribe((s,i)=>{o.messageToast=i.toastMessage.text,o.showMessage=i.toastMessage.show,o.type=i.toastMessage.type});const r={store:t,data:o,reactive:wt,get globalState(){return Ie}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Nh={key:0,class:"text-green-700 inline-block text-lg mr-4"},Dh={key:1,class:"text-green-700 inline-block text-lg mr-4"},$h={key:2,class:"text-green-700 inline-block text-lg mr-4"},jh={key:3,class:"text-red-700 inline-block text-lg mr-4"},Fh={class:"text-slate-200 font-semibold"};function Uh(n,e,t,o,r,s){return oe(),ae("div",{id:"toast",class:Rt(["absolute z-10 flex flex-row p-3 items-center border-black bg-slate-600 opacity-0 w-72 h-11 right-4 rounded-lg -translate-y-4 duration-500",{"transition-all translate-y-4 duration-500 opacity-90 shadow-slate-500 shadow-lg border border-slate-500":o.data.showMessage}])},[U("div",null,[o.data.type=="create"?(oe(),ae("p",Nh," 😊 ")):Kt("",!0),o.data.type=="update"?(oe(),ae("p",Dh," 😏 ")):Kt("",!0),o.data.type=="delete"?(oe(),ae("p",$h," 😈 ")):Kt("",!0),o.data.type=="error"?(oe(),ae("p",jh," 😔 ")):Kt("",!0)]),U("p",Fh,Et(o.data.messageToast),1)],2)}const Hh=Fe(Rh,[["render",Uh],["__file","/home/marcos/DEV/vue-notes-app/src/components/shared/ToastMessageCompontent.vue"]]),zh={__name:"App",setup(n,{expose:e}){e();const t={get RouterView(){return Yi},NavComponent:dh,ToastMessageCompontent:Hh};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}},Vh={class:"grid grid-cols-12 h-svh text-gray-300 font-sans font-thin relative"},qh={class:"col-span-10 h-full p-4"},Qh={key:1,class:"col-span-12 h-full"};function Wh(n,e,t,o,r,s){return oe(),ae("div",Vh,[Ce(o.ToastMessageCompontent),!n.$route.path.includes("login")&&!n.$route.path.includes("signup")?(oe(),ae(hr,{key:0},[Ce(o.NavComponent),U("main",qh,[Ce(o.RouterView,null,{default:Gt(({Component:i})=>[Ce(Ds,{name:"fade"},{default:Gt(()=>[(oe(),Jt($s(i)))]),_:2},1024)]),_:1})])],64)):(oe(),ae("main",Qh,[Ce(o.RouterView,null,{default:Gt(({Component:i})=>[Ce(Ds,{name:"fade"},{default:Gt(()=>[(oe(),Jt($s(i)))]),_:2},1024)]),_:1})]))])}const Gh=Fe(zh,[["render",Wh],["__file","/home/marcos/DEV/vue-notes-app/src/App.vue"]]),Kh={};function Yh(n,e){return oe(),ae("div",null,e[0]||(e[0]=[U("h1",null,"About page!",-1)]))}const Zh=Fe(Kh,[["render",Yh],["__file","/home/marcos/DEV/vue-notes-app/src/components/AboutView.vue"]]);function Or(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{"fill-rule":"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z","clip-rule":"evenodd"})])}function Pr(n,e){return oe(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[U("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const hi=async()=>{try{return await Kd()}catch(n){throw Error(n)}},pi=async n=>await Yd(n),fi=async n=>{try{const e=await Zd(n);return e.id?Ie().showMessage("Que fluyan las ideas!!","create"):Ie().showMessage("mmm.. algo salio mal...","error"),e}catch(e){throw Error(e)}},gi=async(n,e)=>{const t=await Xd(n,e);return t.status==200?Ie().showMessage("Todo guardado!!","update"):Ie().showMessage("Error al actualizar nota","error"),t},mi=async(n,e)=>{const t=await Jd(n,e);return t.status==200?Ie().showMessage("Todo guardado!!","update"):Ie().showMessage("Error al actualizar nota","error"),t},vi=async(n,e)=>{const t=await eh(n,e);return t.status!=200&&Ie().showMessage("Error al actualizar nota","error"),t},bi=async n=>{const e=await th(n);return e.status==200?Ie().showMessage("Ya no sera un problema...","delete"):Ie().showMessage("Error al eliminar nota","error"),e},Xh={__name:"InputDialogComponent",props:{show:Boolean,name:String,action:{type:Function,async default(n){const e=await fi(n);jt.push(`/editor/${e.id}`)}}},setup(n,{expose:e,emit:t}){e();const o=fe(""),r=fe(null),s=t,i=n;Ve(()=>{document.addEventListener("mousedown",h)}),xt(()=>{document.removeEventListener("mousedown",h)});function a(){s("hidde")}function l(){i.action(o.value)}const h=p=>{r.value&&!r.value.contains(p.target)&&a()},d={fileName:o,menuWrapper:r,emit:s,props:i,hidde:a,savefile:l,handleClickOutside:h,get CheckIcon(){return Or},get XCircleIcon(){return Pr},onMounted:Ve,onUnmounted:xt,ref:fe,get createNoteAction(){return fi},get router(){return jt}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Jh={class:"flex flex-row justify-between"};function ep(n,e,t,o,r,s){return oe(),ae("div",{ref:"menuWrapper",class:Rt(["absolute w-6/12 transition-all opacity-0 -translate-y-20 duration-700 bg-slate-600 p-2 rounded-md",{"transition-all translate-y-0 duration-700 opacity-100":o.props.show}])},[e[4]||(e[4]=U("h2",{class:"mb-2 font-semibold"},"Un titulo para la nota?",-1)),U("div",Jh,[Ot(U("input",{onKeyup:e[0]||(e[0]=fr(i=>o.savefile(),["enter"])),class:"bg-slate-800 w-5/6 pl-2 placeholder:text-slate-500 rounded",type:"text",placeholder:"Titulo","onUpdate:modelValue":e[1]||(e[1]=i=>o.fileName=i)},null,544),[[Pt,o.fileName]]),U("button",{onClick:e[2]||(e[2]=i=>o.savefile())},[Ce(o.CheckIcon,{class:"size-6 hover:text-slate-400 transition-colors"})]),U("button",{onClick:e[3]||(e[3]=i=>o.hidde())},[Ce(o.XCircleIcon,{class:"size-6 text-red-400 hover:text-red-600 transition-colors"})])])],2)}const tp=Fe(Xh,[["render",ep],["__file","/home/marcos/DEV/vue-notes-app/src/components/shared/InputDialogComponent.vue"]]),op={__name:"DropDownComponent",props:{id:Number,name:String},setup(n,{expose:e,emit:t}){e();const o=fe(!1),r=fe(null),s=t,i=n;Ve(()=>{document.addEventListener("mousedown",h)}),xt(()=>{document.removeEventListener("mousedown",h)});function a(f){o.value=f}function l(){s("showConfirmDialog",{show:!0,name:i.name,id:i.id})}const h=f=>{r.value&&!r.value.contains(f.target)&&a(!1)};function d(f){s("rename",{id:f})}const p={hidde:o,menuWrapper:r,emit:s,props:i,toggleHiddeSelf:a,toggleHiddeConfirm:l,handleClickOutside:h,renameNote:d,get EllipsisVerticalIcon(){return Ku},get EllipsisHorizontalCircleIcon(){return Gu},get PencilIcon(){return Zu},get TrashIcon(){return Ju},onMounted:Ve,onUnmounted:xt,ref:fe};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},np={class:"relative",ref:"menuWrapper"},rp={class:"flex items-baseline cursor-pointer text-white hover:text-blue-500",title:"Editar nombre"},sp={class:"flex items-baseline cursor-pointer hover:text-red-500",title:"Eliminar"};function ip(n,e,t,o,r,s){return oe(),ae("div",np,[U("button",{onClick:e[0]||(e[0]=i=>o.toggleHiddeSelf(!0)),title:"Opciones"},[o.hidde?(oe(),Jt(o.EllipsisVerticalIcon,{key:0,class:"size-5 cursor-pointer"})):(oe(),Jt(o.EllipsisHorizontalCircleIcon,{key:1,class:"size-5 cursor-pointer"}))]),o.hidde?(oe(),ae("div",{key:0,id:"dialog",onKeyup:e[3]||(e[3]=fr(i=>o.toggleHiddeSelf(!1),["esc"])),class:"absolute z-10 w-auto bg-sky-950 -translate-x-10 p-3 transition-all rounded"},[U("ul",null,[U("li",rp,[U("button",{onClick:e[1]||(e[1]=i=>o.renameNote(o.props.id))},[Ce(o.PencilIcon,{class:"size-4 inline-block mr-2"})])]),U("li",sp,[U("button",{onClick:e[2]||(e[2]=i=>o.toggleHiddeConfirm(!0))},[Ce(o.TrashIcon,{class:"size-4 inline-block mr-2"})])])])],32)):Kt("",!0)],512)}const ap=Fe(op,[["render",ip],["__file","/home/marcos/DEV/vue-notes-app/src/components/shared/DropDownComponent.vue"]]),lp={__name:"ConfirmDialogComponent",props:{show:Boolean,name:String},setup(n,{expose:e,emit:t}){e();const o=t,r=fe(null),s=n;Ve(()=>{document.addEventListener("pointerdown",i)}),xt(()=>{document.removeEventListener("pointerdown",i)});const i=d=>{r.value&&!r.value.contains(d.target)&&a()};function a(){o("hidde")}function l(){o("delete")}const h={emit:o,menuWrapper:r,props:s,handleClickOutside:i,hidde:a,deleteNote:l,get CheckIcon(){return Or},get XCircleIcon(){return Pr},onMounted:Ve,onUnmounted:xt,ref:fe};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},cp={class:"mb-2 font-semibold text-center"},up={class:"flex flex-row justify-center"};function dp(n,e,t,o,r,s){return oe(),ae("div",{ref:"menuWrapper",class:Rt(["absolute z-50 w-1/5 left-1/2 transition-all opacity-0 -translate-y-20 duration-700 bg-slate-600 p-2 rounded-md",{"transition-all translate-y-0 duration-700 opacity-100":o.props.show}])},[U("h2",cp,[e[2]||(e[2]=xo("Seguro deseas eliminar ")),U("b",null,Et(o.props.name),1),e[3]||(e[3]=xo("?"))]),U("div",up,[U("button",{onClick:e[0]||(e[0]=i=>o.deleteNote())},[Ce(o.CheckIcon,{class:"size-6 mr-4 hover:text-slate-400 transition-colors"})]),U("button",{onClick:e[1]||(e[1]=i=>o.hidde())},[Ce(o.XCircleIcon,{class:"size-6 text-red-400 hover:text-red-600 transition-colors"})])])],2)}const hp=Fe(lp,[["render",dp],["__file","/home/marcos/DEV/vue-notes-app/src/components/shared/ConfirmDialogComponent.vue"]]),pp={__name:"InputDialogRenameComponent",props:{show:Boolean,id:Number,action:{type:Function,async default(n,e){await mi(e,n)}}},setup(n,{expose:e,emit:t}){e();const o=fe(""),r=fe(null),s=t,i=n;Ve(()=>{document.addEventListener("mousedown",d)}),xt(()=>{document.removeEventListener("mousedown",d)});function a(){s("hidde")}function l(){s("renamed")}function h(){i.action(o.value,i.id),l(),a()}const d=f=>{r.value&&!r.value.contains(f.target)&&a()},p={fileName:o,menuWrapper:r,emit:s,props:i,hidde:a,renamed:l,savefile:h,handleClickOutside:d,get CheckIcon(){return Or},get XCircleIcon(){return Pr},onMounted:Ve,onUnmounted:xt,ref:fe,get updateNoteTitleAction(){return mi}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},fp={class:"flex flex-row justify-between"};function gp(n,e,t,o,r,s){return oe(),ae("div",{ref:"menuWrapper",class:Rt(["absolute w-6/12 transition-all opacity-0 -translate-y-20 duration-700 bg-slate-600 p-2 rounded-md",{"transition-all translate-y-0 duration-700 opacity-100":o.props.show}])},[e[4]||(e[4]=U("h2",{class:"mb-2 font-semibold"},"Ingresa el nuevo nombre",-1)),U("div",fp,[Ot(U("input",{onKeyup:e[0]||(e[0]=fr(i=>o.savefile(),["enter"])),class:"bg-slate-800 w-5/6 pl-2 placeholder:text-slate-500 rounded",type:"text",placeholder:"Titulo","onUpdate:modelValue":e[1]||(e[1]=i=>o.fileName=i)},null,544),[[Pt,o.fileName]]),U("button",{onClick:e[2]||(e[2]=i=>o.savefile())},[Ce(o.CheckIcon,{class:"size-6 hover:text-slate-400 transition-colors"})]),U("button",{onClick:e[3]||(e[3]=i=>o.hidde())},[Ce(o.XCircleIcon,{class:"size-6 text-red-400 hover:text-red-600 transition-colors"})])])],2)}const mp=Fe(pp,[["render",gp],["__file","/home/marcos/DEV/vue-notes-app/src/components/shared/InputDialogRenameComponent.vue"]]),vp="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%208.37688C22%208.78086%2021.6668%209.10836%2021.2557%209.10836H16.2937C15.8826%209.10836%2015.5494%208.78086%2015.5494%208.37688C15.5494%207.97289%2015.8826%207.64539%2016.2937%207.64539H21.2557C21.6668%207.64539%2022%207.97289%2022%208.37688Z'%20fill='%23c0c0c0'%3e%3c/path%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012.7658C22%2013.1698%2021.6668%2013.4973%2021.2557%2013.4973H17.2861C16.875%2013.4973%2016.5418%2013.1698%2016.5418%2012.7658C16.5418%2012.3618%2016.875%2012.0343%2017.2861%2012.0343H21.2557C21.6668%2012.0343%2022%2012.3618%2022%2012.7658Z'%20fill='%23c0c0c0'%3e%3c/path%3e%3cpath%20d='M12.5872%208.23781L12.9508%208.59515C14.4693%2010.0875%2015.2285%2010.8336%2015.2278%2011.6425C15.2276%2011.9068%2015.1728%2012.1682%2015.0666%2012.411C14.7417%2013.1542%2013.7441%2013.5444%2011.7489%2014.3248L11.6045%2014.3813C11.0389%2014.6025%2010.7561%2014.7132%2010.5279%2014.8908C10.3548%2015.0256%2010.2058%2015.1878%2010.0871%2015.3708C9.93056%2015.6119%209.84745%2015.8997%209.68123%2016.4753C9.42348%2017.3678%209.2946%2017.8141%209.01976%2018.0121C8.81551%2018.1593%208.56173%2018.2242%208.3104%2018.1934C7.97221%2018.1521%207.63845%2017.8241%206.97092%2017.168L5.94386%2016.1586L3.2706%2018.7858C2.97993%2019.0714%202.50867%2019.0714%202.218%2018.7858C1.92733%2018.5001%201.92733%2018.0369%202.218%2017.7513L4.88125%2015.1143L3.86422%2014.1148C3.1967%2013.4588%202.86293%2013.1307%202.82084%2012.7984C2.78956%2012.5514%202.85556%2012.302%203.00532%2012.1012C3.20683%2011.8311%203.66091%2011.7045%204.56907%2011.4511C5.15473%2011.2878%205.44756%2011.2061%205.69297%2011.0523C5.87915%2010.9356%206.0442%2010.7891%206.18133%2010.619C6.36209%2010.3948%206.47465%2010.1168%206.69977%209.56094L6.75724%209.41903C7.55132%207.45818%207.94835%206.47775%208.70458%206.15843C8.95161%206.05411%209.21763%206.00021%209.4865%206C10.3096%205.99934%2011.0688%206.7455%2012.5872%208.23781Z'%20fill='%23c0c0c0'%3e%3c/path%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2017.1547C22%2017.5587%2021.6668%2017.8862%2021.2557%2017.8862H12.3241C11.9131%2017.8862%2011.5798%2017.5587%2011.5798%2017.1547C11.5798%2016.7507%2011.9131%2016.4232%2012.3241%2016.4232H21.2557C21.6668%2016.4232%2022%2016.7507%2022%2017.1547Z'%20fill='%23c0c0c0'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",bp="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20d='M13.6315%208.22382C15.1616%209.7539%2015.9266%2010.5189%2015.926%2011.3483C15.9257%2011.6192%2015.8705%2011.8873%2015.7635%2012.1362C15.4361%2012.8982%2014.4309%2013.2983%2012.4204%2014.0985L12.2749%2014.1564C11.7049%2014.3832%2011.4199%2014.4967%2011.19%2014.6788C11.0156%2014.817%2010.8655%2014.9833%2010.7458%2015.1709C10.5881%2015.4182%2010.5044%2015.7133%2010.3369%2016.3034C10.0771%2017.2185%209.94727%2017.6761%209.67033%2017.8791C9.46451%2018.03%209.20879%2018.0966%208.95553%2018.065C8.61475%2018.0226%208.27843%2017.6863%207.60579%2017.0137L4.47529%2013.8832C3.80265%2013.2105%203.46633%2012.8742%203.42392%2012.5334C3.3924%2012.2802%203.4589%2012.0244%203.60981%2011.8186C3.81287%2011.5417%204.27042%2011.4118%205.18554%2011.1521C5.77568%2010.9846%206.07076%2010.9009%206.31804%2010.7431C6.50565%2010.6235%206.67197%2010.4733%206.81015%2010.2989C6.9923%2010.069%207.10572%209.78403%207.33256%209.21406L7.39047%209.06855C8.19063%207.05807%208.59071%206.05283%209.35273%205.72542C9.60165%205.61847%209.86971%205.56321%2010.1406%205.56299C10.5028%205.5627%2010.8526%205.70839%2011.2593%206.00002'%20stroke='%23c0c0c0'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3c/path%3e%3cpath%20d='M3.34679%2018.142L6.04053%2015.4482'%20stroke='%23c0c0c0'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3c/path%3e%3cpath%20d='M22%208H17'%20stroke='%23c0c0c0'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3c/path%3e%3cpath%20d='M22%2012.5H18'%20stroke='%23c0c0c0'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3c/path%3e%3cpath%20d='M22%2017H21M13%2017H17'%20stroke='%23c0c0c0'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3c/path%3e%3c/g%3e%3c/svg%3e",yp={__name:"NotesView",props:{id:Number,name:String},setup(n,{expose:e,emit:t}){e();const o=t,r=wt({showInput:!1,showRename:{show:!1,id:null},delete:{showDialog:!1,name:null,id:null}}),s=n,i=fe([]);let a=null;function l(O){jt.push(`/editor/${O}`)}js(()=>{a=Ie()}),Ve(async()=>{h()});async function h(){const O=await hi();i.value=O}function d(){r.showInput=!1}function p(){r.showRename.show=!1}async function f(){r.showInput=!r.showInput}async function v(O,M){vi(O,M).then(C=>{C.status==200&&setTimeout(async()=>{await h()},500)})}function u(O){r.showRename.show=!0,r.showRename.id=O}function g(O){r.delete.showDialog=O.show,r.delete.name=O.name,r.delete.id=O.id}async function w(O){(await bi(O)).status==200&&setTimeout(async()=>{x(),await h()},500),g(!0)}function E(){h()}function x(){o("deleted")}const S={emit:o,localState:r,props:s,notes:i,get store(){return a},set store(O){a=O},openNote:l,getAllNotes:h,handleHide:d,handleHideRename:p,createNote:f,updateHoldNote:v,showInputRenameNotes:u,toggleHiddeConfirm:g,deleteNote:w,updateList:E,successDelete:x,get PlusCircleIcon(){return Xu},InputDialogComponent:tp,DropDownComponent:ap,ConfirmDialogComponent:hp,get loadNotesAction(){return hi},get updateNoteHoldState(){return vi},get deleteNoteAction(){return bi},get router(){return jt},onBeforeMount:js,onMounted:Ve,reactive:wt,ref:fe,get globalState(){return Ie},InputDialogRenameComponent:mp};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}},wp={class:"flex flex-row justify-between items-baseline mb-24"},kp={key:0},Ep={key:1,class:"my-4 px-2 py-10 w-full max-h-90 overflow-scroll overflow-x-hidden bg-slate-900 rounded-2xl shadow-inner shadow-slate-950"},xp={class:"w-full table table-auto tabl"},Sp={class:""},Cp=["onClick"],_p=["onClick"],Tp={class:"w-8/12"},Bp=["onClick"],Ip={class:"text-slate-600 mr-2"};function Ap(n,e,t,o,r,s){return oe(),ae("div",null,[Ce(o.InputDialogComponent,{show:o.localState.showInput,onHidde:o.handleHide},null,8,["show"]),Ce(o.InputDialogRenameComponent,{show:o.localState.showRename.show,id:o.localState.showRename.id,onHidde:o.handleHideRename,onRenamed:e[0]||(e[0]=i=>o.updateList())},null,8,["show","id"]),Ce(o.ConfirmDialogComponent,{name:o.localState.delete.name,show:o.localState.delete.showDialog,onHidde:e[1]||(e[1]=i=>o.toggleHiddeConfirm(!1)),onDelete:e[2]||(e[2]=i=>o.deleteNote(o.localState.delete.id))},null,8,["name","show"]),U("div",wp,[e[7]||(e[7]=U("h1",{class:"float-left text-4xl"},"Notas almacenadas en tu equipo",-1)),U("button",{onClick:e[3]||(e[3]=i=>o.createNote()),title:"Crear nueva nota"},[Ce(o.PlusCircleIcon,{class:"size-5 mx-1 inline-block rounded animate-pulse hover:animate-none text-slate-50 hover:text-slate-400 transition-all"})])]),o.notes.length==0?(oe(),ae("div",kp,e[8]||(e[8]=[U("p",{class:"text-slate-400 text-lg"},"Wooow cuanto vacío...🍃",-1)]))):(oe(),ae("div",Ep,[U("table",xp,[e[9]||(e[9]=U("thead",null,[U("tr",null,[U("th"),U("th"),U("th"),U("th")])],-1)),U("tbody",Sp,[(oe(!0),ae(hr,null,Ri(o.notes,(i,a)=>(oe(),ae("tr",{key:i.title,class:"hover:bg-slate-800"},[U("td",null,[i.hold==1?(oe(),ae("img",{key:0,onClick:l=>o.updateHoldNote(i.id,!i.hold),src:vp,class:"size-6 cursor-pointer",alt:"",title:"No fijar"},null,8,Cp)):(oe(),ae("img",{key:1,onClick:l=>o.updateHoldNote(i.id,!i.hold),src:bp,class:"size-5 cursor-pointer opacity-0 hover:opacity-80 transition-opacity",alt:"",title:"Fijar"},null,8,_p))]),U("td",Tp,[U("button",{onClick:l=>o.openNote(i.id),class:"text-slate-500 font-semibold hover:text-slate-200 cursor-pointer"},Et(i.title),9,Bp)]),U("td",null,[U("p",Ip,Et(i.updated_at),1)]),U("td",null,[Ce(o.DropDownComponent,{id:i.id,name:i.title,onDeleted:e[4]||(e[4]=l=>o.getAllNotes()),onRename:e[5]||(e[5]=l=>o.showInputRenameNotes(l.id)),onShowConfirmDialog:e[6]||(e[6]=l=>o.toggleHiddeConfirm(l))},null,8,["id","name"])])]))),128))])])]))])}const Op=Fe(yp,[["render",Ap],["__file","/home/marcos/DEV/vue-notes-app/src/components/notes/NotesView.vue"]]);(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Pp(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var r=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(t,o,r.get?r:{enumerable:!0,get:function(){return n[o]}})}),t}function Dn(){}Object.assign(Dn,{default:Dn,register:Dn,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(n){const e=(this.document||this.ownerDocument).querySelectorAll(n);let t=e.length;for(;--t>=0&&e.item(t)!==this;);return t>-1});Element.prototype.closest||(Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(n){const e=document.createDocumentFragment();Array.isArray(n)||(n=[n]),n.forEach(t=>{const o=t instanceof Node;e.appendChild(o?t:document.createTextNode(t))}),this.insertBefore(e,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(n){n=arguments.length===0?!0:!!n;const e=this.parentNode,t=window.getComputedStyle(e,null),o=parseInt(t.getPropertyValue("border-top-width")),r=parseInt(t.getPropertyValue("border-left-width")),s=this.offsetTop-e.offsetTop<e.scrollTop,i=this.offsetTop-e.offsetTop+this.clientHeight-o>e.scrollTop+e.clientHeight,a=this.offsetLeft-e.offsetLeft<e.scrollLeft,l=this.offsetLeft-e.offsetLeft+this.clientWidth-r>e.scrollLeft+e.clientWidth,h=s&&!i;(s||i)&&n&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-o+this.clientHeight/2),(a||l)&&n&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-r+this.clientWidth/2),(s||i||a||l)&&!n&&this.scrollIntoView(h)});window.requestIdleCallback=window.requestIdleCallback||function(n){const e=Date.now();return setTimeout(function(){n({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(n){clearTimeout(n)};let Mp=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var Xa=(n=>(n.VERBOSE="VERBOSE",n.INFO="INFO",n.WARN="WARN",n.ERROR="ERROR",n))(Xa||{});const re={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46},Lp={LEFT:0};function Ao(n,e,t="log",o,r="color: inherit"){if(!("console"in window)||!window.console[t])return;const s=["info","log","warn","error"].includes(t),i=[];switch(Ao.logLevel){case"ERROR":if(t!=="error")return;break;case"WARN":if(!["error","warn"].includes(t))return;break;case"INFO":if(!s||n)return;break}o&&i.push(o);const a="Editor.js 2.31.0-rc.7";n&&(s?(i.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,r),e=`%c${a}%c ${e}`):e=`( ${a} )${e}`);try{s?o?console[t](`${e} %o`,...i):console[t](e,...i):console[t](e)}catch{}}Ao.logLevel="VERBOSE";function Rp(n){Ao.logLevel=n}const pe=Ao.bind(window,!1),Ke=Ao.bind(window,!0);function Dt(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function xe(n){return Dt(n)==="function"||Dt(n)==="asyncfunction"}function Le(n){return Dt(n)==="object"}function gt(n){return Dt(n)==="string"}function Np(n){return Dt(n)==="boolean"}function yi(n){return Dt(n)==="number"}function wi(n){return Dt(n)==="undefined"}function Ye(n){return n?Object.keys(n).length===0&&n.constructor===Object:!0}function Ja(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}async function Dp(n,e=()=>{},t=()=>{}){async function o(r,s,i){try{await r.function(r.data),await s(wi(r.data)?{}:r.data)}catch{i(wi(r.data)?{}:r.data)}}return n.reduce(async(r,s)=>(await r,o(s,e,t)),Promise.resolve())}function el(n){return Array.prototype.slice.call(n)}function Zo(n,e){return function(){const t=this,o=arguments;window.setTimeout(()=>n.apply(t,o),e)}}function $p(n){return n.name.split(".").pop()}function jp(n){return/^[-\w]+\/([-+\w]+|\*)$/.test(n)}function ki(n,e,t){let o;return(...r)=>{const s=this,i=()=>{o=null,n.apply(s,r)};window.clearTimeout(o),o=window.setTimeout(i,e)}}function nr(n,e,t=void 0){let o,r,s,i=null,a=0;t||(t={});const l=function(){a=t.leading===!1?0:Date.now(),i=null,s=n.apply(o,r),i||(o=r=null)};return function(){const h=Date.now();!a&&t.leading===!1&&(a=h);const d=e-(h-a);return o=this,r=arguments,d<=0||d>e?(i&&(clearTimeout(i),i=null),a=h,s=n.apply(o,r),i||(o=r=null)):!i&&t.trailing!==!1&&(i=setTimeout(l,d)),s}}function Fp(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e&&(n[e]=!0),n}function Xo(n){return n[0].toUpperCase()+n.slice(1)}function rr(n,...e){if(!e.length)return n;const t=e.shift();if(Le(n)&&Le(t))for(const o in t)Le(t[o])?(n[o]||Object.assign(n,{[o]:{}}),rr(n[o],t[o])):Object.assign(n,{[o]:t[o]});return rr(n,...e)}function Mr(n){const e=Fp();return n=n.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e.mac?n=n.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function Up(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function Hp(){return Mp(10)}function zp(n){window.open(n,"_blank")}function Vp(n=""){return`${n}${Math.floor(Math.random()*1e8).toString(16)}`}function sr(n,e,t){const o=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;n&&Ke(o,"warn")}function io(n,e,t){const o=t.value?"value":"get",r=t[o],s=`#${e}Cache`;if(t[o]=function(...i){return this[s]===void 0&&(this[s]=r.apply(this,...i)),this[s]},o==="get"&&t.set){const i=t.set;t.set=function(a){delete n[s],i.apply(this,a)}}return t}const tl=650;function ao(){return window.matchMedia(`(max-width: ${tl}px)`).matches}const ir=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function qp(n,e){const t=Array.isArray(n)||Le(n),o=Array.isArray(e)||Le(e);return t||o?JSON.stringify(n)===JSON.stringify(e):n===e}class R{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,o={}){const r=document.createElement(e);if(Array.isArray(t)){const s=t.filter(i=>i!==void 0);r.classList.add(...s)}else t&&r.classList.add(t);for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s]);return r}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach(o=>e.appendChild(o)):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach(o=>e.prepend(o))):e.prepend(t)}static swap(e,t){const o=document.createElement("div"),r=e.parentNode;r.insertBefore(o,e),r.insertBefore(e,t),r.insertBefore(t,o),r.removeChild(o)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return el(e.querySelectorAll(R.allInputsSelector)).reduce((t,o)=>R.isNativeInput(o)||R.containsOnlyInlineElements(o)?[...t,o]:[...t,...R.getDeepestBlockElements(o)],[])}static getDeepestNode(e,t=!1){const o=t?"lastChild":"firstChild",r=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[o]){let s=e[o];if(R.isSingleTag(s)&&!R.isNativeInput(s)&&!R.isLineBreakTag(s))if(s[r])s=s[r];else if(s.parentNode[r])s=s.parentNode[r];else return s.parentNode;return this.getDeepestNode(s,t)}return e}static isElement(e){return yi(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return yi(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const t=["INPUT","TEXTAREA"];return e&&e.tagName?t.includes(e.tagName):!1}static canSetCaret(e){let t=!0;if(R.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=R.isContentEditable(e);return t}static isNodeEmpty(e,t){let o;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?o=e.value:o=e.textContent.replace("​",""),t&&(o=o.replace(new RegExp(t,"g"),"")),o.length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e,t){const o=[e];for(;o.length>0;)if(e=o.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&o.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=R.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return R.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;gt(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const o=r=>!R.blockElements.includes(r.tagName.toLowerCase())&&Array.from(r.children).every(o);return Array.from(t.children).every(o)}static getDeepestBlockElements(e){return R.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((t,o)=>[...t,...R.getDeepestBlockElements(o)],[])}static getHolder(e){return gt(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,s=t.top+r,i=t.left+o;return{top:s,left:i,bottom:s+t.height,right:i+t.width}}}function Qp(n){return!/[^\t\n\r ]/.test(n)}function Wp(n){const e=window.getComputedStyle(n),t=parseFloat(e.fontSize),o=parseFloat(e.lineHeight)||t*1.2,r=parseFloat(e.paddingTop),s=parseFloat(e.borderTopWidth),i=parseFloat(e.marginTop),a=t*.8,l=(o-t)/2;return i+s+r+l+a}function ol(n){n.dataset.empty=R.isEmpty(n)?"true":"false"}const Gp={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},Kp={Text:"",Link:"",Bold:"",Italic:""},Yp={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},Zp={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},nl={ui:Gp,toolNames:Kp,tools:Yp,blockTunes:Zp},rl=class Qt{static ui(e,t){return Qt._t(e,t)}static t(e,t){return Qt._t(e,t)}static setDictionary(e){Qt.currentDictionary=e}static _t(e,t){const o=Qt.getNamespace(e);return!o||!o[t]?t:o[t]}static getNamespace(e){return e.split(".").reduce((t,o)=>!t||!Object.keys(t).length?{}:t[o],Qt.currentDictionary)}};rl.currentDictionary=nl;let je=rl;class sl extends Error{}class Oo{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const o=r=>{const s=t(r),i=this.subscribers[e].indexOf(o);return i!==-1&&this.subscribers[e].splice(i,1),s};this.subscribers[e].push(o)}emit(e,t){Ye(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((o,r)=>{const s=r(o);return s!==void 0?s:o},t)}off(e,t){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let o=0;o<this.subscribers[e].length;o++)if(this.subscribers[e][o]===t){delete this.subscribers[e][o];break}}destroy(){this.subscribers={}}}function ht(n){Object.setPrototypeOf(this,{get id(){return n.id},get name(){return n.name},get config(){return n.config},get holder(){return n.holder},get isEmpty(){return n.isEmpty},get selected(){return n.selected},set stretched(e){n.stretched=e},get stretched(){return n.stretched},get focusable(){return n.focusable},call(e,t){return n.call(e,t)},save(){return n.save()},validate(e){return n.validate(e)},dispatchChange(){n.dispatchChange()},getActiveToolboxEntry(){return n.getActiveToolboxEntry()}})}class Po{constructor(){this.allListeners=[]}on(e,t,o,r=!1){const s=Vp("l"),i={id:s,element:e,eventType:t,handler:o,options:r};if(!this.findOne(e,t,o))return this.allListeners.push(i),e.addEventListener(t,o,r),s}off(e,t,o,r){const s=this.findAll(e,t,o);s.forEach((i,a)=>{const l=this.allListeners.indexOf(s[a]);l>-1&&(this.allListeners.splice(l,1),i.element.removeEventListener(i.eventType,i.handler,i.options))})}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,o){const r=this.findAll(e,t,o);return r.length>0?r[0]:null}findAll(e,t,o){let r;const s=e?this.findByEventTarget(e):[];return e&&t&&o?r=s.filter(i=>i.eventType===t&&i.handler===o):e&&t?r=s.filter(i=>i.eventType===t):r=s,r}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(t=>{if(t.element===e)return t})}findByType(e){return this.allListeners.filter(t=>{if(t.eventType===e)return t})}findByHandler(e){return this.allListeners.filter(t=>{if(t.handler===e)return t})}findById(e){return this.allListeners.find(t=>t.id===e)}}class ce{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new Po,this.readOnlyMutableListeners={on:(o,r,s,i=!1)=>{this.mutableListenerIds.push(this.listeners.on(o,r,s,i))},clearAll:()=>{for(const o of this.mutableListenerIds)this.listeners.offById(o);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===ce)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}}class G{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?R.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(G.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let o=null;return t&&t instanceof Element&&(o=t.closest(`.${G.CSS.editorZone}`)),o?o.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let o=null;return t&&t instanceof Element&&(o=t.closest(`.${G.CSS.editorZone}`)),o?o.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!G.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,t,o={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,t=e.createRange(),o.x=t.boundingLeft,o.y=t.boundingTop,o.width=t.boundingWidth,o.height=t.boundingHeight,o;if(!window.getSelection)return pe("Method window.getSelection is not supported","warn"),o;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return pe("Method SelectionUtils.rangeCount is not supported","warn"),o;if(e.rangeCount===0)return o;if(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect&&(o=t.getBoundingClientRect()),o.x===0&&o.y===0){const r=document.createElement("span");if(r.getBoundingClientRect){r.appendChild(document.createTextNode("​")),t.insertNode(r),o=r.getBoundingClientRect();const s=r.parentNode;s.removeChild(r),s.normalize()}}return o}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const o=document.createRange(),r=window.getSelection();return R.isNativeInput(e)?R.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(o.setStart(e,t),o.setEnd(e,t),r.removeAllRanges(),r.addRange(o),o.getBoundingClientRect())}static isRangeInsideContainer(e){const t=G.range;return t===null?!1:e.contains(t.startContainer)}static addFakeCursor(){const e=G.range;if(e===null)return;const t=R.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return R.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const t=R.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=G.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,o=10){const r=window.getSelection();let s=null;return!r||!r.anchorNode||!r.focusNode?null:([r.anchorNode,r.focusNode].forEach(i=>{let a=o;for(;a>0&&i.parentNode&&!(i.tagName===e&&(s=i,t&&i.classList&&!i.classList.contains(t)&&(s=null),s));)i=i.parentNode,a--}),s)}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const o=document.createRange();o.selectNodeContents(e),t.addRange(o)}}function Xp(n,e){const{type:t,target:o,addedNodes:r,removedNodes:s}=n;return n.type==="attributes"&&n.attributeName==="data-empty"?!1:!!(e.contains(o)||t==="childList"&&(Array.from(r).some(i=>i===e)||Array.from(s).some(i=>i===e)))}const ar="redactor dom changed",il="block changed",al="fake cursor is about to be toggled",ll="fake cursor have been set",To="editor mobile layout toggled";function lr(n,e){if(!n.conversionConfig)return!1;const t=n.conversionConfig[e];return xe(t)||gt(t)}function Jo(n,e){return lr(n.tool,e)}function cl(n,e){return Object.entries(n).some(([t,o])=>e[t]&&qp(e[t],o))}async function ul(n,e){const t=(await n.save()).data,o=e.find(r=>r.name===n.name);return o!==void 0&&!lr(o,"export")?[]:e.reduce((r,s)=>{if(!lr(s,"import")||s.toolbox===void 0)return r;const i=s.toolbox.filter(a=>{if(Ye(a)||a.icon===void 0)return!1;if(a.data!==void 0){if(cl(a.data,t))return!1}else if(s.name===n.name)return!1;return!0});return r.push({...s,toolbox:i}),r},[])}function Ei(n,e){return n.mergeable?n.name===e.name?!0:Jo(e,"export")&&Jo(n,"import"):!1}function Jp(n,e){const t=e==null?void 0:e.export;return xe(t)?t(n):gt(t)?n[t]:(t!==void 0&&pe("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function xi(n,e,t){const o=e==null?void 0:e.import;return xe(o)?o(n,t):gt(o)?{[o]:n}:(o!==void 0&&pe("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var Ee=(n=>(n.Default="default",n.Separator="separator",n.Html="html",n))(Ee||{}),ft=(n=>(n.APPEND_CALLBACK="appendCallback",n.RENDERED="rendered",n.MOVED="moved",n.UPDATED="updated",n.REMOVED="removed",n.ON_PASTE="onPaste",n))(ft||{});class Me extends Oo{constructor({id:e=Hp(),data:t,tool:o,readOnly:r,tunesData:s},i){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(a=void 0)=>{const l=a===void 0,h=a instanceof InputEvent;!l&&!h&&this.detectToolRootChange(a);let d;l||h?d=!0:d=!(a.length>0&&a.every(p=>{const{addedNodes:f,removedNodes:v,target:u}=p;return[...Array.from(f),...Array.from(v),u].some(g=>(R.isElement(g)||(g=g.parentElement),g&&g.closest('[data-mutation-free="true"]')!==null))})),d&&(this.dropInputsCache(),this.updateCurrentInput(),this.toggleInputsEmptyMark(),this.call("updated"),this.emit("didMutated",this))},this.name=o.name,this.id=e,this.settings=o.settings,this.config=o.settings.config||{},this.editorEventBus=i||null,this.blockAPI=new ht(this),this.tool=o,this.toolInstance=o.create(t,this.blockAPI,r),this.tunes=o.tunes,this.composeTunes(s),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents(),this.toggleInputsEmptyMark()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=R.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex(o=>o===e||o.contains(e));t!==-1&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!Ye(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return xe(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const e=R.isEmpty(this.pluginsContent,"/"),t=!this.hasMedia;return e&&t}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set selected(e){var t,o;this.holder.classList.toggle(Me.CSS.selected,e);const r=e===!0&&G.isRangeInsideContainer(this.holder),s=e===!1&&G.isFakeCursorInsideContainer(this.holder);(r||s)&&((t=this.editorEventBus)==null||t.emit(al,{state:e}),r?G.addFakeCursor():G.removeFakeCursor(this.holder),(o=this.editorEventBus)==null||o.emit(ll,{state:e}))}get selected(){return this.holder.classList.contains(Me.CSS.selected)}set stretched(e){this.holder.classList.toggle(Me.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(Me.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(Me.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(xe(this.toolInstance[e])){e==="appendCallback"&&pe("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(o){pe(`Error during '${e}' call: ${o.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([s,i])=>{if(xe(i.save))try{t[s]=i.save()}catch(a){pe(`Tune ${i.constructor.name} save method throws an Error %o`,"warn",a)}});const o=window.performance.now();let r;return Promise.resolve(e).then(s=>(r=window.performance.now(),{id:this.id,tool:this.name,data:s,tunes:t,time:r-o})).catch(s=>{pe(`Saving process for ${this.name} tool failed due to the ${s}`,"log","red")})}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=[],t=[],o=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[];return R.isElement(o)?e.push({type:Ee.Html,element:o}):Array.isArray(o)?e.push(...o):e.push(o),[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(r=>r.render()).forEach(r=>{R.isElement(r)?t.push({type:Ee.Html,element:r}):Array.isArray(r)?t.push(...r):t.push(r)}),{toolTunes:e,commonTunes:t}}updateCurrentInput(){this.currentInput=R.isNativeInput(document.activeElement)||!G.anchorNode?document.activeElement:G.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),xe(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data,o=e;return o==null?void 0:o.find(r=>cl(r.data,t))}async exportDataAsString(){const e=await this.data;return Jp(e,this.tool.conversionConfig)}compose(){const e=R.make("div",Me.CSS.wrapper),t=R.make("div",Me.CSS.content),o=this.toolInstance.render();e.setAttribute("data-cy","block-wrapper"),e.dataset.id=this.id,this.toolRenderedElement=o,t.appendChild(this.toolRenderedElement);let r=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(s=>{if(xe(s.wrap))try{r=s.wrap(r)}catch(i){pe(`Tune ${s.constructor.name} wrap method throws an Error %o`,"warn",i)}}),e.appendChild(r),e}composeTunes(e){Array.from(this.tunes.values()).forEach(t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))}),Object.entries(e).forEach(([t,o])=>{this.tunesInstances.has(t)||(this.unavailableTunesData[t]=o)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),R.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),R.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=t=>{const{mutations:o}=t;o.some(r=>Xp(r,this.toolRenderedElement))&&this.didMutated(o)},(e=this.editorEventBus)==null||e.on(ar,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(ar,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(t=>{if(Array.from(t.removedNodes).includes(this.toolRenderedElement)){const o=t.addedNodes[t.addedNodes.length-1];this.toolRenderedElement=o}})}dropInputsCache(){this.cachedInputs=[]}toggleInputsEmptyMark(){this.inputs.forEach(ol)}}class ef extends ce{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},o={},r,s,i,a)=>{const l=this.Editor.BlockManager.insert({id:a,tool:e,data:t,index:r,needToFocus:s,replace:i});return new ht(l)},this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new Me({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t,o)=>{const{BlockManager:r}=this.Editor,s=r.getBlockById(e);if(s===void 0)throw new Error(`Block with id "${e}" not found`);const i=await r.update(s,t,o);return new ht(i)},this.convert=async(e,t,o)=>{var r,s;const{BlockManager:i,Tools:a}=this.Editor,l=i.getBlockById(e);if(!l)throw new Error(`Block with id "${e}" not found`);const h=a.blockTools.get(l.name),d=a.blockTools.get(t);if(!d)throw new Error(`Block Tool with type "${t}" not found`);const p=((r=h==null?void 0:h.conversionConfig)==null?void 0:r.export)!==void 0,f=((s=d.conversionConfig)==null?void 0:s.import)!==void 0;if(p&&f){const v=await i.convert(l,t,o);return new ht(v)}else{const v=[p?!1:Xo(l.name),f?!1:Xo(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${l.name}" to "${t}" is not possible. ${v} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const o=e.map(({id:r,type:s,data:i})=>this.Editor.BlockManager.composeBlock({id:r,tool:s||this.config.defaultBlock,data:i}));return this.Editor.BlockManager.insertMany(o,t),o.map(r=>new ht(r))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),getBlockByElement:e=>this.getBlockByElement(e),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(!t){Ke("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(t)}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(t===void 0){Ke("There is no block at index `"+e+"`","warn");return}return new ht(t)}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return t===void 0?(Ke("There is no block with id `"+e+"`","warn"),null):new ht(t)}getBlockByElement(e){const t=this.Editor.BlockManager.getBlock(e);if(t===void 0){Ke("There is no block corresponding to element `"+e+"`","warn");return}return new ht(t)}swap(e,t){pe("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(t){Ke(t,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){sr(!0,"blocks.stretchBlock()","BlockAPI");const o=this.Editor.BlockManager.getBlockByIndex(e);o&&(o.stretched=t)}insertNewBlock(){pe("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}function tf(n,e){return typeof n=="number"?e.BlockManager.getBlockByIndex(n):typeof n=="string"?e.BlockManager.getBlockById(n):e.BlockManager.getBlockById(n.id)}class of extends ce{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0):!1,this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,o=0)=>{const r=tf(e,this.Editor);return r===void 0?!1:(this.Editor.Caret.setToBlock(r,t,o),!0)},this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class nf extends ce{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}}class Lr extends ce{static getNamespace(e,t){return t?`blockTunes.${e}`:`tools.${e}`}get methods(){return{t:()=>{Ke("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e,t){return Object.assign(this.methods,{t:o=>je.t(Lr.getNamespace(e,t),o)})}}class rf extends ce{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,tools:this.Editor.ToolsAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e,t){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e,t)})}}class sf extends ce{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class af extends ce{get methods(){return{on:(e,t,o,r)=>this.on(e,t,o,r),off:(e,t,o,r)=>this.off(e,t,o,r),offById:e=>this.offById(e)}}on(e,t,o,r){return this.listeners.on(e,t,o,r)}off(e,t,o,r){this.listeners.off(e,t,o,r)}offById(e){this.listeners.offById(e)}}var dl={exports:{}};(function(n,e){(function(t,o){n.exports=o()})(window,function(){return function(t){var o={};function r(s){if(o[s])return o[s].exports;var i=o[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=o,r.d=function(s,i,a){r.o(s,i)||Object.defineProperty(s,i,{enumerable:!0,get:a})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,i){if(1&i&&(s=r(s)),8&i||4&i&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&i&&typeof s!="string")for(var l in s)r.d(a,l,(function(h){return s[h]}).bind(null,l));return a},r.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(i,"a",i),i},r.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},r.p="/",r(r.s=0)}([function(t,o,r){r(1),t.exports=function(){var s=r(6),i="cdx-notify--bounce-in",a=null;return{show:function(l){if(l.message){(function(){if(a)return!0;a=s.getWrapper(),document.body.appendChild(a)})();var h=null,d=l.time||8e3;switch(l.type){case"confirm":h=s.confirm(l);break;case"prompt":h=s.prompt(l);break;default:h=s.alert(l),window.setTimeout(function(){h.remove()},d)}a.appendChild(h),h.classList.add(i)}}}}()},function(t,o,r){var s=r(2);typeof s=="string"&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(4)(s,i),s.locals&&(t.exports=s.locals)},function(t,o,r){(t.exports=r(3)(!1)).push([t.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(t,o){t.exports=function(r){var s=[];return s.toString=function(){return this.map(function(i){var a=function(l,h){var d=l[1]||"",p=l[3];if(!p)return d;if(h&&typeof btoa=="function"){var f=(u=p,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(u))))+" */"),v=p.sources.map(function(g){return"/*# sourceURL="+p.sourceRoot+g+" */"});return[d].concat(v).concat([f]).join(`
`)}var u;return[d].join(`
`)}(i,r);return i[2]?"@media "+i[2]+"{"+a+"}":a}).join("")},s.i=function(i,a){typeof i=="string"&&(i=[[null,i,""]]);for(var l={},h=0;h<this.length;h++){var d=this[h][0];typeof d=="number"&&(l[d]=!0)}for(h=0;h<i.length;h++){var p=i[h];typeof p[0]=="number"&&l[p[0]]||(a&&!p[2]?p[2]=a:a&&(p[2]="("+p[2]+") and ("+a+")"),s.push(p))}},s}},function(t,o,r){var s,i,a={},l=(s=function(){return window&&document&&document.all&&!window.atob},function(){return i===void 0&&(i=s.apply(this,arguments)),i}),h=function(A){var k={};return function(T){if(typeof T=="function")return T();if(k[T]===void 0){var _=(function($){return document.querySelector($)}).call(this,T);if(window.HTMLIFrameElement&&_ instanceof window.HTMLIFrameElement)try{_=_.contentDocument.head}catch{_=null}k[T]=_}return k[T]}}(),d=null,p=0,f=[],v=r(5);function u(A,k){for(var T=0;T<A.length;T++){var _=A[T],$=a[_.id];if($){$.refs++;for(var F=0;F<$.parts.length;F++)$.parts[F](_.parts[F]);for(;F<_.parts.length;F++)$.parts.push(O(_.parts[F],k))}else{var L=[];for(F=0;F<_.parts.length;F++)L.push(O(_.parts[F],k));a[_.id]={id:_.id,refs:1,parts:L}}}}function g(A,k){for(var T=[],_={},$=0;$<A.length;$++){var F=A[$],L=k.base?F[0]+k.base:F[0],j={css:F[1],media:F[2],sourceMap:F[3]};_[L]?_[L].parts.push(j):T.push(_[L]={id:L,parts:[j]})}return T}function w(A,k){var T=h(A.insertInto);if(!T)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var _=f[f.length-1];if(A.insertAt==="top")_?_.nextSibling?T.insertBefore(k,_.nextSibling):T.appendChild(k):T.insertBefore(k,T.firstChild),f.push(k);else if(A.insertAt==="bottom")T.appendChild(k);else{if(typeof A.insertAt!="object"||!A.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var $=h(A.insertInto+" "+A.insertAt.before);T.insertBefore(k,$)}}function E(A){if(A.parentNode===null)return!1;A.parentNode.removeChild(A);var k=f.indexOf(A);k>=0&&f.splice(k,1)}function x(A){var k=document.createElement("style");return A.attrs.type===void 0&&(A.attrs.type="text/css"),S(k,A.attrs),w(A,k),k}function S(A,k){Object.keys(k).forEach(function(T){A.setAttribute(T,k[T])})}function O(A,k){var T,_,$,F;if(k.transform&&A.css){if(!(F=k.transform(A.css)))return function(){};A.css=F}if(k.singleton){var L=p++;T=d||(d=x(k)),_=B.bind(null,T,L,!1),$=B.bind(null,T,L,!0)}else A.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(T=function(j){var q=document.createElement("link");return j.attrs.type===void 0&&(j.attrs.type="text/css"),j.attrs.rel="stylesheet",S(q,j.attrs),w(j,q),q}(k),_=(function(j,q,W){var Z=W.css,X=W.sourceMap,be=q.convertToAbsoluteUrls===void 0&&X;(q.convertToAbsoluteUrls||be)&&(Z=v(Z)),X&&(Z+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(X))))+" */");var de=new Blob([Z],{type:"text/css"}),he=j.href;j.href=URL.createObjectURL(de),he&&URL.revokeObjectURL(he)}).bind(null,T,k),$=function(){E(T),T.href&&URL.revokeObjectURL(T.href)}):(T=x(k),_=(function(j,q){var W=q.css,Z=q.media;if(Z&&j.setAttribute("media",Z),j.styleSheet)j.styleSheet.cssText=W;else{for(;j.firstChild;)j.removeChild(j.firstChild);j.appendChild(document.createTextNode(W))}}).bind(null,T),$=function(){E(T)});return _(A),function(j){if(j){if(j.css===A.css&&j.media===A.media&&j.sourceMap===A.sourceMap)return;_(A=j)}else $()}}t.exports=function(A,k){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(k=k||{}).attrs=typeof k.attrs=="object"?k.attrs:{},k.singleton||typeof k.singleton=="boolean"||(k.singleton=l()),k.insertInto||(k.insertInto="head"),k.insertAt||(k.insertAt="bottom");var T=g(A,k);return u(T,k),function(_){for(var $=[],F=0;F<T.length;F++){var L=T[F];(j=a[L.id]).refs--,$.push(j)}for(_&&u(g(_,k),k),F=0;F<$.length;F++){var j;if((j=$[F]).refs===0){for(var q=0;q<j.parts.length;q++)j.parts[q]();delete a[j.id]}}}};var M,C=(M=[],function(A,k){return M[A]=k,M.filter(Boolean).join(`
`)});function B(A,k,T,_){var $=T?"":_.css;if(A.styleSheet)A.styleSheet.cssText=C(k,$);else{var F=document.createTextNode($),L=A.childNodes;L[k]&&A.removeChild(L[k]),L.length?A.insertBefore(F,L[k]):A.appendChild(F)}}},function(t,o){t.exports=function(r){var s=typeof window<"u"&&window.location;if(!s)throw new Error("fixUrls requires window.location");if(!r||typeof r!="string")return r;var i=s.protocol+"//"+s.host,a=i+s.pathname.replace(/\/[^\/]*$/,"/");return r.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(l,h){var d,p=h.trim().replace(/^"(.*)"$/,function(f,v){return v}).replace(/^'(.*)'$/,function(f,v){return v});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(p)?l:(d=p.indexOf("//")===0?p:p.indexOf("/")===0?i+p:a+p.replace(/^\.\//,""),"url("+JSON.stringify(d)+")")})}},function(t,o,r){var s,i,a,l,h,d,p,f,v;t.exports=(s="cdx-notifies",i="cdx-notify",a="cdx-notify__cross",l="cdx-notify__button--confirm",h="cdx-notify__button--cancel",d="cdx-notify__input",p="cdx-notify__button",f="cdx-notify__btns-wrapper",{alert:v=function(u){var g=document.createElement("DIV"),w=document.createElement("DIV"),E=u.message,x=u.style;return g.classList.add(i),x&&g.classList.add(i+"--"+x),g.innerHTML=E,w.classList.add(a),w.addEventListener("click",g.remove.bind(g)),g.appendChild(w),g},confirm:function(u){var g=v(u),w=document.createElement("div"),E=document.createElement("button"),x=document.createElement("button"),S=g.querySelector("."+a),O=u.cancelHandler,M=u.okHandler;return w.classList.add(f),E.innerHTML=u.okText||"Confirm",x.innerHTML=u.cancelText||"Cancel",E.classList.add(p),x.classList.add(p),E.classList.add(l),x.classList.add(h),O&&typeof O=="function"&&(x.addEventListener("click",O),S.addEventListener("click",O)),M&&typeof M=="function"&&E.addEventListener("click",M),E.addEventListener("click",g.remove.bind(g)),x.addEventListener("click",g.remove.bind(g)),w.appendChild(E),w.appendChild(x),g.appendChild(w),g},prompt:function(u){var g=v(u),w=document.createElement("div"),E=document.createElement("button"),x=document.createElement("input"),S=g.querySelector("."+a),O=u.cancelHandler,M=u.okHandler;return w.classList.add(f),E.innerHTML=u.okText||"Ok",E.classList.add(p),E.classList.add(l),x.classList.add(d),u.placeholder&&x.setAttribute("placeholder",u.placeholder),u.default&&(x.value=u.default),u.inputType&&(x.type=u.inputType),O&&typeof O=="function"&&S.addEventListener("click",O),M&&typeof M=="function"&&E.addEventListener("click",function(){M(x.value)}),E.addEventListener("click",g.remove.bind(g)),w.appendChild(x),w.appendChild(E),g.appendChild(w),g},getWrapper:function(){var u=document.createElement("DIV");return u.classList.add(s),u}})}])})})(dl);var lf=dl.exports;const cf=vn(lf);class uf{show(e){cf.show(e)}}class df extends ce{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new uf}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class hf extends ce{get methods(){const e=()=>this.isEnabled;return{toggle:t=>this.toggle(t),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var hl={exports:{}};(function(n,e){(function(t,o){n.exports=o()})(_o,function(){function t(p){var f=p.tags,v=Object.keys(f),u=v.map(function(g){return typeof f[g]}).every(function(g){return g==="object"||g==="boolean"||g==="function"});if(!u)throw new Error("The configuration was invalid");this.config=p}var o=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function r(p){return o.indexOf(p.nodeName)!==-1}var s=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function i(p){return s.indexOf(p.nodeName)!==-1}t.prototype.clean=function(p){const f=document.implementation.createHTMLDocument(),v=f.createElement("div");return v.innerHTML=p,this._sanitize(f,v),v.innerHTML},t.prototype._sanitize=function(p,f){var v=a(p,f),u=v.firstChild();if(u)do{if(u.nodeType===Node.TEXT_NODE)if(u.data.trim()===""&&(u.previousElementSibling&&r(u.previousElementSibling)||u.nextElementSibling&&r(u.nextElementSibling))){f.removeChild(u),this._sanitize(p,f);break}else continue;if(u.nodeType===Node.COMMENT_NODE){f.removeChild(u),this._sanitize(p,f);break}var g=i(u),w;g&&(w=Array.prototype.some.call(u.childNodes,r));var E=!!f.parentNode,x=r(f)&&r(u)&&E,S=u.nodeName.toLowerCase(),O=l(this.config,S,u),M=g&&w;if(M||h(u,O)||!this.config.keepNestedBlockElements&&x){if(!(u.nodeName==="SCRIPT"||u.nodeName==="STYLE"))for(;u.childNodes.length>0;)f.insertBefore(u.childNodes[0],u);f.removeChild(u),this._sanitize(p,f);break}for(var C=0;C<u.attributes.length;C+=1){var B=u.attributes[C];d(B,O,u)&&(u.removeAttribute(B.name),C=C-1)}this._sanitize(p,u)}while(u=v.nextSibling())};function a(p,f){return p.createTreeWalker(f,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function l(p,f,v){return typeof p.tags[f]=="function"?p.tags[f](v):p.tags[f]}function h(p,f){return typeof f>"u"?!0:typeof f=="boolean"?!f:!1}function d(p,f,v){var u=p.name.toLowerCase();return f===!0?!1:typeof f[u]=="function"?!f[u](p.value,v):typeof f[u]>"u"||f[u]===!1?!0:typeof f[u]=="string"?f[u]!==p.value:!1}return t})})(hl);var pf=hl.exports;const ff=vn(pf);function Rr(n,e){return n.map(t=>{const o=xe(e)?e(t.tool):e;return Ye(o)||(t.data=Nr(t.data,o)),t})}function st(n,e={}){const t={tags:e};return new ff(t).clean(n)}function Nr(n,e){return Array.isArray(n)?gf(n,e):Le(n)?mf(n,e):gt(n)?vf(n,e):n}function gf(n,e){return n.map(t=>Nr(t,e))}function mf(n,e){const t={};for(const o in n){if(!Object.prototype.hasOwnProperty.call(n,o))continue;const r=n[o],s=bf(e[o])?e[o]:e;t[o]=Nr(r,s)}return t}function vf(n,e){return Le(e)?st(n,e):e===!1?st(n,{}):n}function bf(n){return Le(n)||Np(n)||xe(n)}class yf extends ce{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return st(e,t)}}class wf extends ce{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(Ke(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class kf extends ce{constructor(){super(...arguments),this.selectionUtils=new G}get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e),save:()=>this.selectionUtils.save(),restore:()=>this.selectionUtils.restore(),setFakeBackground:()=>this.selectionUtils.setFakeBackground(),removeFakeBackground:()=>this.selectionUtils.removeFakeBackground()}}findParentTag(e,t){return this.selectionUtils.findParentTag(e,t)}expandToTag(e){this.selectionUtils.expandToTag(e)}}class Ef extends ce{get methods(){return{getBlockTools:()=>Array.from(this.Editor.Tools.blockTools.values())}}}class xf extends ce{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class Sf extends ce{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){Ke("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){Ke("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var pl={exports:{}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(n,e){(function(t,o){n.exports=o()})(window,function(){return function(t){var o={};function r(s){if(o[s])return o[s].exports;var i=o[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=o,r.d=function(s,i,a){r.o(s,i)||Object.defineProperty(s,i,{enumerable:!0,get:a})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,i){if(1&i&&(s=r(s)),8&i||4&i&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&i&&typeof s!="string")for(var l in s)r.d(a,l,(function(h){return s[h]}).bind(null,l));return a},r.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(i,"a",i),i},r.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},r.p="",r(r.s=0)}([function(t,o,r){t.exports=r(1)},function(t,o,r){r.r(o),r.d(o,"default",function(){return s});class s{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(a,l,h){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const d=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},h);if(d.hidingDelay&&(this.hidingDelay=d.hidingDelay),this.nodes.content.innerHTML="",typeof l=="string")this.nodes.content.appendChild(document.createTextNode(l));else{if(!(l instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof l+" given.");this.nodes.content.appendChild(l)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),d.placement){case"top":this.placeTop(a,d);break;case"left":this.placeLeft(a,d);break;case"right":this.placeRight(a,d);break;case"bottom":default:this.placeBottom(a,d)}d&&d.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},d.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(a=!1){if(this.hidingDelay&&!a)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(a,l,h){a.addEventListener("mouseenter",()=>{this.show(a,l,h)}),a.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const a="codex-tooltips-style";if(document.getElementById(a))return;const l=r(2),h=this.make("style",null,{textContent:l.toString(),id:a});this.prepend(document.head,h)}placeBottom(a,l){const h=a.getBoundingClientRect(),d=h.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,p=h.bottom+window.pageYOffset+this.offsetTop+l.marginTop;this.applyPlacement("bottom",d,p)}placeTop(a,l){const h=a.getBoundingClientRect(),d=h.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,p=h.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",d,p)}placeLeft(a,l){const h=a.getBoundingClientRect(),d=h.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-l.marginLeft,p=h.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",d,p)}placeRight(a,l){const h=a.getBoundingClientRect(),d=h.right+this.offsetRight+l.marginRight,p=h.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",d,p)}applyPlacement(a,l,h){this.nodes.wrapper.classList.add(this.CSS.placement[a]),this.nodes.wrapper.style.left=l+"px",this.nodes.wrapper.style.top=h+"px"}make(a,l=null,h={}){const d=document.createElement(a);Array.isArray(l)?d.classList.add(...l):l&&d.classList.add(l);for(const p in h)h.hasOwnProperty(p)&&(d[p]=h[p]);return d}append(a,l){Array.isArray(l)?l.forEach(h=>a.appendChild(h)):a.appendChild(l)}prepend(a,l){Array.isArray(l)?(l=l.reverse()).forEach(h=>a.prepend(h)):a.prepend(l)}}},function(t,o){t.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(pl);var Cf=pl.exports;const _f=vn(Cf);let et=null;function Dr(){et||(et=new _f)}function Tf(n,e,t){Dr(),et==null||et.show(n,e,t)}function en(n=!1){Dr(),et==null||et.hide(n)}function tn(n,e,t){Dr(),et==null||et.onHover(n,e,t)}function Bf(){et==null||et.destroy(),et=null}class If extends ce{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t})}get methods(){return{show:(e,t,o)=>this.show(e,t,o),hide:()=>this.hide(),onHover:(e,t,o)=>this.onHover(e,t,o)}}show(e,t,o){Tf(e,t,o)}hide(){en()}onHover(e,t,o){tn(e,t,o)}}class Af extends ce{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function fl(n,e){const t={};return Object.entries(n).forEach(([o,r])=>{if(Le(r)){const s=e?`${e}.${o}`:o;Object.values(r).every(i=>gt(i))?t[o]=s:t[o]=fl(r,s);return}t[o]=r}),t}const ze=fl(nl);function Of(n,e){const t={};return Object.keys(n).forEach(o=>{const r=e[o];r!==void 0?t[r]=n[o]:t[o]=n[o]}),t}const gl=class mo{constructor(e,t){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=t}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(mo.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(mo.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(this.items.length===0)return this.cursor;let t=this.cursor;return t===-1?t=e===mo.directions.RIGHT?-1:0:this.items[t].classList.remove(this.focusedCssClass),e===mo.directions.RIGHT?t=(t+1)%this.items.length:t=(this.items.length+t-1)%this.items.length,R.canSetCaret(this.items[t])&&Zo(()=>G.setCursor(this.items[t]),50)(),this.items[t].classList.add(this.focusedCssClass),t}};gl.directions={RIGHT:"right",LEFT:"left"};let po=gl;class $t{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=t=>{if(this.isEventReadyForHandling(t))switch($t.usedKeys.includes(t.keyCode)&&t.preventDefault(),t.keyCode){case re.TAB:this.handleTabPress(t);break;case re.LEFT:case re.UP:this.flipLeft();break;case re.RIGHT:case re.DOWN:this.flipRight();break;case re.ENTER:this.handleEnterPress(t);break}},this.iterator=new po(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||$t.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[re.TAB,re.LEFT,re.RIGHT,re.ENTER,re.UP,re.DOWN]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),t!==void 0&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(t=>t!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?po.directions.LEFT:po.directions.RIGHT){case po.directions.RIGHT:this.flipRight();break;case po.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),xe(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}}const Pf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',Mf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',Lf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',Rf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>',Nf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',Df='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',$f='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',jf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',Si='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Ff='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',Uf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',ml='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>',Hf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',zf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Vf='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',qf="__",Qf="--";function _t(n){return(e,t)=>[[n,e].filter(o=>!!o).join(qf),t].filter(o=>!!o).join(Qf)}const fo=_t("ce-hint"),go={root:fo(),alignedStart:fo(null,"align-left"),alignedCenter:fo(null,"align-center"),title:fo("title"),description:fo("description")};class Wf{constructor(e){this.nodes={root:R.make("div",[go.root,e.alignment==="center"?go.alignedCenter:go.alignedStart]),title:R.make("div",go.title,{textContent:e.title})},this.nodes.root.appendChild(this.nodes.title),e.description!==void 0&&(this.nodes.description=R.make("div",go.description,{textContent:e.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}}class $r{constructor(e){this.params=e}get name(){if(this.params!==void 0&&"name"in this.params)return this.params.name}destroy(){en()}onChildrenOpen(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onOpen)=="function"&&this.params.children.onOpen()}onChildrenClose(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onClose)=="function"&&this.params.children.onClose()}handleClick(){var e,t;this.params!==void 0&&"onActivate"in this.params&&((t=(e=this.params).onActivate)==null||t.call(e,this.params))}addHint(e,t){const o=new Wf(t);tn(e,o.getElement(),{placement:t.position,hidingDelay:100})}get children(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.items)!==void 0?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.isOpen)===!0}get isChildrenFlippable(){var e;return!(this.params===void 0||!("children"in this.params)||((e=this.params.children)==null?void 0:e.isFlippable)===!1)}get isChildrenSearchable(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.searchable)===!0}get closeOnActivate(){return this.params!==void 0&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return this.params===void 0||!("isActive"in this.params)?!1:typeof this.params.isActive=="function"?this.params.isActive():this.params.isActive===!0}}const He=_t("ce-popover-item"),Se={container:He(),active:He(null,"active"),disabled:He(null,"disabled"),focused:He(null,"focused"),hidden:He(null,"hidden"),confirmationState:He(null,"confirmation"),noHover:He(null,"no-hover"),noFocus:He(null,"no-focus"),title:He("title"),secondaryTitle:He("secondary-title"),icon:He("icon"),iconTool:He("icon","tool"),iconChevronRight:He("icon","chevron-right"),wobbleAnimation:_t("wobble")()};class At extends $r{constructor(e,t){super(e),this.params=e,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var o;(o=this.nodes.root)==null||o.classList.remove(Se.noFocus)},this.removeSpecialHoverBehavior=()=>{var o;(o=this.nodes.root)==null||o.classList.remove(Se.noHover)},this.onErrorAnimationEnd=()=>{var o,r;(o=this.nodes.icon)==null||o.classList.remove(Se.wobbleAnimation),(r=this.nodes.icon)==null||r.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(e,t)}get isDisabled(){return this.params.isDisabled===!0}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root===null?!1:this.nodes.root.classList.contains(Se.focused)}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled&&this.confirmationState!==null){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){var t;(t=this.nodes.root)==null||t.classList.toggle(Se.active,e)}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(Se.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e,t){var o,r;const s=(t==null?void 0:t.wrapperTag)||"div",i=R.make(s,Se.container,{type:s==="button"?"button":void 0});return e.name&&(i.dataset.itemName=e.name),this.nodes.icon=R.make("div",[Se.icon,Se.iconTool],{innerHTML:e.icon||$f}),i.appendChild(this.nodes.icon),e.title!==void 0&&i.appendChild(R.make("div",Se.title,{innerHTML:e.title||""})),e.secondaryLabel&&i.appendChild(R.make("div",Se.secondaryTitle,{textContent:e.secondaryLabel})),this.hasChildren&&i.appendChild(R.make("div",[Se.icon,Se.iconChevronRight],{innerHTML:Rf})),this.isActive&&i.classList.add(Se.active),e.isDisabled&&i.classList.add(Se.disabled),e.hint!==void 0&&((o=t==null?void 0:t.hint)==null?void 0:o.enabled)!==!1&&this.addHint(i,{...e.hint,position:((r=t==null?void 0:t.hint)==null?void 0:r.position)||"right"}),i}enableConfirmationMode(e){if(this.nodes.root===null)return;const t={...this.params,...e,confirmation:"confirmation"in e?e.confirmation:void 0},o=this.make(t);this.nodes.root.innerHTML=o.innerHTML,this.nodes.root.classList.add(Se.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(this.nodes.root===null)return;const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(Se.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var e,t,o;(e=this.nodes.root)==null||e.classList.add(Se.noHover),(t=this.nodes.root)==null||t.classList.add(Se.noFocus),(o=this.nodes.root)==null||o.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var e;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),(e=this.nodes.root)==null||e.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){var t;if(!("confirmation"in e)||e.confirmation===void 0)try{(t=e.onActivate)==null||t.call(e,e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){var e,t,o;(e=this.nodes.icon)!=null&&e.classList.contains(Se.wobbleAnimation)||((t=this.nodes.icon)==null||t.classList.add(Se.wobbleAnimation),(o=this.nodes.icon)==null||o.addEventListener("animationend",this.onErrorAnimationEnd))}}const $n=_t("ce-popover-item-separator"),jn={container:$n(),line:$n("line"),hidden:$n(null,"hidden")};class vl extends $r{constructor(){super(),this.nodes={root:R.make("div",jn.container),line:R.make("div",jn.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(jn.hidden,e)}}var at=(n=>(n.Closed="closed",n.ClosedOnActivate="closed-on-activate",n))(at||{});const $e=_t("ce-popover"),_e={popover:$e(),popoverContainer:$e("container"),popoverOpenTop:$e(null,"open-top"),popoverOpenLeft:$e(null,"open-left"),popoverOpened:$e(null,"opened"),search:$e("search"),nothingFoundMessage:$e("nothing-found-message"),nothingFoundMessageDisplayed:$e("nothing-found-message","displayed"),items:$e("items"),overlay:$e("overlay"),overlayHidden:$e("overlay","hidden"),popoverNested:$e(null,"nested"),getPopoverNestedClass:n=>$e(null,`nested-level-${n.toString()}`),popoverInline:$e(null,"inline"),popoverHeader:$e("header")};var Xt=(n=>(n.NestingLevel="--nesting-level",n.PopoverHeight="--popover-height",n.InlinePopoverWidth="--inline-popover-width",n.TriggerItemLeft="--trigger-item-left",n.TriggerItemTop="--trigger-item-top",n))(Xt||{});const Ci=_t("ce-popover-item-html"),_i={root:Ci(),hidden:Ci(null,"hidden")};class Bo extends $r{constructor(e,t){var o,r;super(e),this.nodes={root:R.make("div",_i.root)},this.nodes.root.appendChild(e.element),e.name&&(this.nodes.root.dataset.itemName=e.name),e.hint!==void 0&&((o=t==null?void 0:t.hint)==null?void 0:o.enabled)!==!1&&this.addHint(this.nodes.root,{...e.hint,position:((r=t==null?void 0:t.hint)==null?void 0:r.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(_i.hidden,e)}getControls(){const e=this.nodes.root.querySelectorAll(`button, ${R.allInputsSelector}`);return Array.from(e)}}class bl extends Oo{constructor(e,t={}){super(),this.params=e,this.itemsRenderParams=t,this.listeners=new Po,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(e.items),e.messages&&(this.messages={...this.messages,...e.messages}),this.nodes={},this.nodes.popoverContainer=R.make("div",[_e.popoverContainer]),this.nodes.nothingFoundMessage=R.make("div",[_e.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=R.make("div",[_e.items]),this.items.forEach(o=>{const r=o.getElement();r!==null&&this.nodes.items.appendChild(r)}),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",o=>this.handleClick(o)),this.nodes.popover=R.make("div",[_e.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter(e=>e instanceof At)}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(_e.popoverOpened),this.search!==void 0&&this.search.focus()}hide(){this.nodes.popover.classList.remove(_e.popoverOpened),this.nodes.popover.classList.remove(_e.popoverOpenTop),this.itemsDefault.forEach(e=>e.reset()),this.search!==void 0&&this.search.clear(),this.emit(at.Closed)}destroy(){var e;this.items.forEach(t=>t.destroy()),this.nodes.popover.remove(),this.listeners.removeAll(),(e=this.search)==null||e.destroy()}activateItemByName(e){const t=this.items.find(o=>o.name===e);this.handleItemClick(t)}buildItems(e){return e.map(t=>{switch(t.type){case Ee.Separator:return new vl;case Ee.Html:return new Bo(t,this.itemsRenderParams[Ee.Html]);default:return new At(t,this.itemsRenderParams[Ee.Default])}})}getTargetItem(e){return this.items.filter(t=>t instanceof At||t instanceof Bo).find(t=>{const o=t.getElement();return o===null?!1:e.composedPath().includes(o)})}handleItemClick(e){if(!("isDisabled"in e&&e.isDisabled)){if(e.hasChildren){this.showNestedItems(e),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick();return}this.itemsDefault.filter(t=>t!==e).forEach(t=>t.reset()),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&(this.hide(),this.emit(at.ClosedOnActivate))}}handleClick(e){const t=this.getTargetItem(e);t!==void 0&&this.handleItemClick(t)}toggleItemActivenessIfNeeded(e){if(e instanceof At&&(e.toggle===!0&&e.toggleActive(),typeof e.toggle=="string")){const t=this.itemsDefault.filter(o=>o.toggle===e.toggle);if(t.length===1){e.toggleActive();return}t.forEach(o=>{o.toggleActive(o===e)})}}}var on=(n=>(n.Search="search",n))(on||{});const Fn=_t("cdx-search-field"),Un={wrapper:Fn(),icon:Fn("icon"),input:Fn("input")};class Gf extends Oo{constructor({items:e,placeholder:t}){super(),this.listeners=new Po,this.items=e,this.wrapper=R.make("div",Un.wrapper);const o=R.make("div",Un.icon,{innerHTML:Hf});this.input=R.make("input",Un.input,{placeholder:t,tabIndex:-1}),this.wrapper.appendChild(o),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.emit(on.Search,{query:this.searchQuery,items:this.foundItems})})}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(on.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var t,o;const r=((t=e.title)==null?void 0:t.toLowerCase())||"",s=(o=this.searchQuery)==null?void 0:o.toLowerCase();return s!==void 0?r.includes(s):!1}}var Kf=Object.defineProperty,Yf=Object.getOwnPropertyDescriptor,Zf=(n,e,t,o)=>{for(var r=Yf(e,t),s=n.length-1,i;s>=0;s--)(i=n[s])&&(r=i(e,t,r)||r);return r&&Kf(e,t,r),r};const yl=class wl extends bl{constructor(e,t){super(e,t),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var o;super.hide(),this.destroyNestedPopoverIfExists(),(o=this.flipper)==null||o.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const o=this.itemsDefault.find(r=>r.isFocused);o==null||o.onFocus()},this.onSearch=o=>{var r;const s=o.query==="",i=o.items.length===0;this.items.forEach(l=>{let h=!1;l instanceof At?h=!o.items.includes(l):(l instanceof vl||l instanceof Bo)&&(h=i||!s),l.toggleHidden(h)}),this.toggleNothingFoundMessage(i);const a=o.query===""?this.flippableElements:o.items.map(l=>l.getElement());(r=this.flipper)!=null&&r.isActivated&&(this.flipper.deactivate(),this.flipper.activate(a))},e.nestingLevel!==void 0&&(this.nestingLevel=e.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(_e.popoverNested),e.scopeElement!==void 0&&(this.scopeElement=e.scopeElement),this.nodes.popoverContainer!==null&&this.listeners.on(this.nodes.popoverContainer,"mouseover",o=>this.handleHover(o)),e.searchable&&this.addSearch(),e.flippable!==!1&&(this.flipper=new $t({items:this.flippableElements,focusedItemClass:Se.focused,allowedKeys:[re.TAB,re.UP,re.DOWN,re.ENTER]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return this.flipper===void 0?!1:this.flipper.hasFocus()}get scrollTop(){return this.nodes.items===null?0:this.nodes.items.scrollTop}get offsetTop(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetTop}show(){var e;this.nodes.popover.style.setProperty(Xt.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(_e.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(_e.popoverOpenLeft),super.show(),(e=this.flipper)==null||e.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(e){this.nestedPopover!==null&&this.nestedPopover!==void 0||(this.nestedPopoverTriggerItem=e,this.showNestedPopoverForItem(e))}handleHover(e){const t=this.getTargetItem(e);t!==void 0&&this.previouslyHoveredItem!==t&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=t,t.hasChildren&&this.showNestedPopoverForItem(t))}setTriggerItemPosition(e,t){const o=t.getElement(),r=(o?o.offsetTop:0)-this.scrollTop,s=this.offsetTop+r;e.style.setProperty(Xt.TriggerItemTop,s+"px")}destroyNestedPopoverIfExists(){var e,t;this.nestedPopover===void 0||this.nestedPopover===null||(this.nestedPopover.off(at.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,(e=this.flipper)==null||e.activate(this.flippableElements),(t=this.nestedPopoverTriggerItem)==null||t.onChildrenClose())}showNestedPopoverForItem(e){var t;this.nestedPopover=new wl({searchable:e.isChildrenSearchable,items:e.children,nestingLevel:this.nestingLevel+1,flippable:e.isChildrenFlippable,messages:this.messages}),e.onChildrenOpen(),this.nestedPopover.on(at.ClosedOnActivate,this.hide);const o=this.nestedPopover.getElement();return this.nodes.popover.appendChild(o),this.setTriggerItemPosition(o,e),o.style.setProperty(Xt.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),(t=this.flipper)==null||t.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popoverContainer.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),o=this.size.height,r=e.top+o,s=e.top-o,i=Math.min(window.innerHeight,t.bottom);return s<t.top||r<=i}get shouldOpenRight(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),o=this.size.width,r=e.right+o,s=e.left-o,i=Math.min(window.innerWidth,t.right);return s<t.left||r<=i}get size(){var e;const t={height:0,width:0};if(this.nodes.popover===null)return t;const o=this.nodes.popover.cloneNode(!0);o.style.visibility="hidden",o.style.position="absolute",o.style.top="-1000px",o.classList.add(_e.popoverOpened),(e=o.querySelector("."+_e.popoverNested))==null||e.remove(),document.body.appendChild(o);const r=o.querySelector("."+_e.popoverContainer);return t.height=r.offsetHeight,t.width=r.offsetWidth,o.remove(),t}get flippableElements(){return this.items.map(e=>{if(e instanceof At)return e.getElement();if(e instanceof Bo)return e.getControls()}).flat().filter(e=>e!=null)}addSearch(){this.search=new Gf({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(on.Search,this.onSearch);const e=this.search.getElement();e.classList.add(_e.search),this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(_e.nothingFoundMessageDisplayed,e)}};Zf([io],yl.prototype,"size");let jr=yl;class Xf extends jr{constructor(e){const t=!ao();super({...e,class:_e.popoverInline},{[Ee.Default]:{wrapperTag:"button",hint:{position:"top",alignment:"center",enabled:t}},[Ee.Html]:{hint:{position:"top",alignment:"center",enabled:t}}}),this.items.forEach(o=>{!(o instanceof At)&&!(o instanceof Bo)||o.hasChildren&&o.isChildrenOpen&&this.showNestedItems(o)})}get offsetLeft(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetLeft}show(){this.nestingLevel===0&&this.nodes.popover.style.setProperty(Xt.InlinePopoverWidth,this.size.width+"px"),super.show()}handleHover(){}setTriggerItemPosition(e,t){const o=t.getElement(),r=o?o.offsetLeft:0,s=this.offsetLeft+r;e.style.setProperty(Xt.TriggerItemLeft,s+"px")}showNestedItems(e){if(this.nestedPopoverTriggerItem===e){this.destroyNestedPopoverIfExists(),this.nestedPopoverTriggerItem=null;return}super.showNestedItems(e)}showNestedPopoverForItem(e){const t=super.showNestedPopoverForItem(e);return t.getElement().classList.add(_e.getPopoverNestedClass(t.nestingLevel)),t}handleItemClick(e){var t;e!==this.nestedPopoverTriggerItem&&((t=this.nestedPopoverTriggerItem)==null||t.handleClick(),super.destroyNestedPopoverIfExists()),super.handleItemClick(e)}}const kl=class vo{constructor(){this.scrollPosition=null}lock(){ir?this.lockHard():document.body.classList.add(vo.CSS.scrollLocked)}unlock(){ir?this.unlockHard():document.body.classList.remove(vo.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(vo.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(vo.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};kl.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let Jf=kl;const Hn=_t("ce-popover-header"),zn={root:Hn(),text:Hn("text"),backButton:Hn("back-button")};class eg{constructor({text:e,onBackButtonClick:t}){this.listeners=new Po,this.text=e,this.onBackButtonClick=t,this.nodes={root:R.make("div",[zn.root]),backButton:R.make("button",[zn.backButton]),text:R.make("div",[zn.text])},this.nodes.backButton.innerHTML=Lf,this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}}class tg{constructor(){this.history=[]}push(e){this.history.push(e)}pop(){return this.history.pop()}get currentTitle(){return this.history.length===0?"":this.history[this.history.length-1].title}get currentItems(){return this.history.length===0?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}}class El extends bl{constructor(e){super(e,{[Ee.Default]:{hint:{enabled:!1}},[Ee.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new Jf,this.history=new tg,this.isHidden=!0,this.nodes.overlay=R.make("div",[_e.overlay,_e.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.history.push({items:e.items})}show(){this.nodes.overlay.classList.remove(_e.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(_e.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(e){this.updateItemsAndHeader(e.children,e.title),this.history.push({title:e.title,items:e.children})}updateItemsAndHeader(e,t){if(this.header!==null&&this.header!==void 0&&(this.header.destroy(),this.header=null),t!==void 0){this.header=new eg({text:t,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const o=this.header.getElement();o!==null&&this.nodes.popoverContainer.insertBefore(o,this.nodes.popoverContainer.firstChild)}this.items.forEach(o=>{var r;return(r=o.getElement())==null?void 0:r.remove()}),this.items=this.buildItems(e),this.items.forEach(o=>{var r;const s=o.getElement();s!==null&&((r=this.nodes.items)==null||r.appendChild(s))})}}class og extends ce{constructor(){super(...arguments),this.opened=!1,this.selection=new G,this.popover=null,this.close=()=>{this.opened&&(this.opened=!1,G.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(at.Closed,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))},this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;if(this.popover!==null)return"flipper"in this.popover?(e=this.popover)==null?void 0:e.flipper:void 0}make(){this.nodes.wrapper=R.make("div",[this.CSS.settings]),this.nodes.wrapper.setAttribute("data-cy","block-tunes"),this.eventsDispatcher.on(To,this.close)}destroy(){this.removeAllNodes(),this.listeners.destroy(),this.eventsDispatcher.off(To,this.close)}async open(e=this.Editor.BlockManager.currentBlock){var t;this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const{toolTunes:o,commonTunes:r}=e.getTunes();this.eventsDispatcher.emit(this.events.opened);const s=ao()?El:jr;this.popover=new s({searchable:!0,items:await this.getTunesItems(e,r,o),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:je.ui(ze.ui.popover,"Nothing found"),search:je.ui(ze.ui.popover,"Filter")}}),this.popover.on(at.Closed,this.onPopoverClose),(t=this.nodes.wrapper)==null||t.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}async getTunesItems(e,t,o){const r=[];o!==void 0&&o.length>0&&(r.push(...o),r.push({type:Ee.Separator}));const s=Array.from(this.Editor.Tools.blockTools.values()),i=(await ul(e,s)).reduce((a,l)=>(l.toolbox.forEach(h=>{a.push({icon:h.icon,title:je.t(ze.toolNames,h.title),name:l.name,closeOnActivate:!0,onActivate:async()=>{const{BlockManager:d,Caret:p,Toolbar:f}=this.Editor,v=await d.convert(e,l.name,h.data);f.close(),p.setToBlock(v,p.positions.END)}})}),a),[]);return i.length>0&&(r.push({icon:ml,name:"convert-to",title:je.ui(ze.ui.popover,"Convert to"),children:{searchable:!0,items:i}}),r.push({type:Ee.Separator})),r.push(...t),r.map(a=>this.resolveTuneAliases(a))}resolveTuneAliases(e){if(e.type===Ee.Separator||e.type===Ee.Html)return e;const t=Of(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}}var xl={exports:{}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(n,e){(function(t,o){n.exports=o()})(window,function(){return function(t){var o={};function r(s){if(o[s])return o[s].exports;var i=o[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=o,r.d=function(s,i,a){r.o(s,i)||Object.defineProperty(s,i,{enumerable:!0,get:a})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,i){if(1&i&&(s=r(s)),8&i||4&i&&typeof s=="object"&&s&&s.__esModule)return s;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:s}),2&i&&typeof s!="string")for(var l in s)r.d(a,l,(function(h){return s[h]}).bind(null,l));return a},r.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(i,"a",i),i},r.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},r.p="",r(r.s=0)}([function(t,o,r){function s(l,h){for(var d=0;d<h.length;d++){var p=h[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}function i(l,h,d){return h&&s(l.prototype,h),d&&s(l,d),l}r.r(o);var a=function(){function l(h){var d=this;(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,l),this.commands={},this.keys={},this.name=h.name,this.parseShortcutName(h.name),this.element=h.on,this.callback=h.callback,this.executeShortcut=function(p){d.execute(p)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return i(l,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),i(l,[{key:"parseShortcutName",value:function(h){h=h.split("+");for(var d=0;d<h.length;d++){h[d]=h[d].toUpperCase();var p=!1;for(var f in l.supportedCommands)if(l.supportedCommands[f].includes(h[d])){p=this.commands[f]=!0;break}p||(this.keys[h[d]]=!0)}for(var v in l.supportedCommands)this.commands[v]||(this.commands[v]=!1)}},{key:"execute",value:function(h){var d,p={CMD:h.ctrlKey||h.metaKey,SHIFT:h.shiftKey,ALT:h.altKey},f=!0;for(d in this.commands)this.commands[d]!==p[d]&&(f=!1);var v,u=!0;for(v in this.keys)u=u&&h.keyCode===l.keyCodes[v];f&&u&&this.callback(h)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),l}();o.default=a}]).default})})(xl);var ng=xl.exports;const rg=vn(ng);class sg{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new rg({name:e.name,on:e.on,callback:e.handler}),o=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...o,t])}remove(e,t){const o=this.findShortcut(e,t);if(!o)return;o.remove();const r=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,r.filter(s=>s!==o))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find(({name:o})=>o===t)}}const oo=new sg;var ig=Object.defineProperty,ag=Object.getOwnPropertyDescriptor,Sl=(n,e,t,o)=>{for(var r=ag(e,t),s=n.length-1,i;s>=0;s--)(i=n[s])&&(r=i(e,t,r)||r);return r&&ig(e,t,r),r},Ho=(n=>(n.Opened="toolbox-opened",n.Closed="toolbox-closed",n.BlockAdded="toolbox-block-added",n))(Ho||{});const Fr=class Cl extends Oo{constructor({api:e,tools:t,i18nLabels:o}){super(),this.opened=!1,this.listeners=new Po,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=t,this.i18nLabels=o,this.enableShortcuts(),this.nodes={toolbox:R.make("div",Cl.CSS.toolbox)},this.initPopover(),this.nodes.toolbox.setAttribute("data-cy","toolbox"),this.api.events.on(To,this.handleMobileLayoutToggle)}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(this.popover!==null)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),(e=this.popover)==null||e.off(at.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(To,this.handleMobileLayoutToggle)}toolButtonActivated(e,t){this.insertNewBlock(e,t)}open(){var e;this.isEmpty||((e=this.popover)==null||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;(e=this.popover)==null||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var e;const t=ao()?El:jr;this.popover=new t({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(at.Closed,this.onPopoverClose),(e=this.nodes.toolbox)==null||e.append(this.popover.getElement())}destroyPopover(){this.popover!==null&&(this.popover.hide(),this.popover.off(at.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),this.nodes.toolbox!==null&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const e=[];return this.tools.forEach(t=>{t.toolbox&&e.push(t)}),e}get toolboxItemsToBeDisplayed(){const e=(t,o,r=!0)=>({icon:t.icon,title:je.t(ze.toolNames,t.title||Xo(o.name)),name:o.name,onActivate:()=>{this.toolButtonActivated(o.name,t.data)},secondaryLabel:o.shortcut&&r?Mr(o.shortcut):""});return this.toolsToBeDisplayed.reduce((t,o)=>(Array.isArray(o.toolbox)?o.toolbox.forEach((r,s)=>{t.push(e(r,o,s===0))}):o.toolbox!==void 0&&t.push(e(o.toolbox,o)),t),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const t=e.shortcut;t&&this.enableShortcutForTool(e.name,t)})}enableShortcutForTool(e,t){oo.add({name:t,on:this.api.ui.nodes.redactor,handler:async o=>{o.preventDefault();const r=this.api.blocks.getCurrentBlockIndex(),s=this.api.blocks.getBlockByIndex(r);if(s)try{const i=await this.api.blocks.convert(s.id,e);this.api.caret.setToBlock(i,"end");return}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const t=e.shortcut;t&&oo.remove(this.api.ui.nodes.redactor,t)})}async insertNewBlock(e,t){const o=this.api.blocks.getCurrentBlockIndex(),r=this.api.blocks.getBlockByIndex(o);if(!r)return;const s=r.isEmpty?o:o+1;let i;if(t){const l=await this.api.blocks.composeBlockData(e);i=Object.assign(l,t)}const a=this.api.blocks.insert(e,i,void 0,s,void 0,r.isEmpty);a.call(ft.APPEND_CALLBACK),this.api.caret.setToBlock(s),this.emit("toolbox-block-added",{block:a}),this.api.toolbar.close()}};Sl([io],Fr.prototype,"toolsToBeDisplayed");Sl([io],Fr.prototype,"toolboxItemsToBeDisplayed");let lg=Fr;const _l="block hovered";async function cg(n,e){const t=navigator.keyboard;if(!t)return e;try{return(await t.getLayoutMap()).get(n)||e}catch(o){return console.error(o),e}}class ug extends ce{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var t;(t=this.toolboxInstance)==null||t.close()},open:()=>{if(this.toolboxInstance===null){pe("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){pe("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var t;return(t=this.toolboxInstance)==null?void 0:t.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){pe("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:o}=this.Editor.UI;let r;const s=20,i=e.firstInput,a=t.getBoundingClientRect(),l=i!==void 0?i.getBoundingClientRect():null,h=l!==null?l.top-a.top:null,d=h!==null?h>s:void 0;if(o)r=t.offsetTop+t.offsetHeight;else if(i===void 0||d){const p=parseInt(window.getComputedStyle(e.pluginsContent).paddingTop);r=t.offsetTop+p}else{const p=Wp(i),f=parseInt(window.getComputedStyle(this.nodes.plusButton).height,10);r=t.offsetTop+p-f+8+h}this.nodes.wrapper.style.top=`${Math.floor(r)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,t;this.Editor.ReadOnly.isEnabled||((e=this.nodes.wrapper)==null||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(t=this.toolboxInstance)==null||t.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=R.make("div",this.CSS.toolbar),["content","actions"].forEach(s=>{this.nodes[s]=R.make("div",this.CSS[s])}),R.append(this.nodes.wrapper,this.nodes.content),R.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=R.make("div",this.CSS.plusButton,{innerHTML:Uf}),R.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{en(!0),this.plusButtonClicked()},!1);const e=R.make("div");e.appendChild(document.createTextNode(je.ui(ze.ui.toolbar.toolbox,"Add"))),e.appendChild(R.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),tn(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=R.make("span",this.CSS.settingsToggler,{innerHTML:Ff}),R.append(this.nodes.actions,this.nodes.settingsToggler);const t=R.make("div"),o=R.text(je.ui(ze.ui.blockTunes.toggler,"Click to tune")),r=await cg("Slash","/");t.appendChild(o),t.appendChild(R.make("div",this.CSS.plusButtonShortcut,{textContent:Mr(`CMD + ${r}`)})),tn(this.nodes.settingsToggler,t,{hidingDelay:400}),R.append(this.nodes.actions,this.makeToolbox()),R.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),R.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new lg({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:je.ui(ze.ui.popover,"Filter"),nothingFound:je.ui(ze.ui.popover,"Nothing found")}}),this.toolboxInstance.on(Ho.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(Ho.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(Ho.BlockAdded,({block:e})=>{const{BlockManager:t,Caret:o}=this.Editor,r=t.getBlockById(e.id);r.inputs.length===0&&(r===t.lastBlock?(t.insertAtEnd(),o.setToBlock(t.lastBlock)):o.setToBlock(t.nextBlock))}),this.toolboxInstance.getElement()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),(t=this.toolboxInstance)!=null&&t.opened&&this.toolboxInstance.close(),en(!0)},!0),ao()||this.eventsDispatcher.on(_l,e=>{var t;this.Editor.BlockSettings.opened||(t=this.toolboxInstance)!=null&&t.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var Lt=(n=>(n[n.Block=0]="Block",n[n.Inline=1]="Inline",n[n.Tune=2]="Tune",n))(Lt||{}),zo=(n=>(n.Shortcut="shortcut",n.Toolbox="toolbox",n.EnabledInlineTools="inlineToolbar",n.EnabledBlockTunes="tunes",n.Config="config",n))(zo||{}),Tl=(n=>(n.Shortcut="shortcut",n.SanitizeConfig="sanitize",n))(Tl||{}),Wt=(n=>(n.IsEnabledLineBreaks="enableLineBreaks",n.Toolbox="toolbox",n.ConversionConfig="conversionConfig",n.IsReadOnlySupported="isReadOnlySupported",n.PasteConfig="pasteConfig",n))(Wt||{}),nn=(n=>(n.IsInline="isInline",n.Title="title",n.IsReadOnlySupported="isReadOnlySupported",n))(nn||{}),cr=(n=>(n.IsTune="isTune",n))(cr||{});class Ur{constructor({name:e,constructable:t,config:o,api:r,isDefault:s,isInternal:i=!1,defaultPlaceholder:a}){this.api=r,this.name=e,this.constructable=t,this.config=o,this.isDefault=s,this.isInternal=i,this.defaultPlaceholder=a}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(xe(this.constructable.reset))return this.constructable.reset()}prepare(){if(xe(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===Lt.Inline}isBlock(){return this.type===Lt.Block}isTune(){return this.type===Lt.Tune}}class dg extends ce{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar"},this.opened=!1,this.popover=null,this.toolbarVerticalMargin=ao()?20:6,this.tools=new Map,window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1){e&&this.close(),this.allowedToShow()&&(await this.open(),this.Editor.Toolbar.close())}close(){var e,t;if(this.opened){for(const[o,r]of this.tools){const s=this.getToolShortcut(o.name);s!==void 0&&oo.remove(this.Editor.UI.nodes.redactor,s),xe(r.clear)&&r.clear()}this.tools=new Map,this.reset(),this.opened=!1,(e=this.popover)==null||e.hide(),(t=this.popover)==null||t.destroy(),this.popover=null}}containsNode(e){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(e)}destroy(){var e;this.removeAllNodes(),(e=this.popover)==null||e.destroy(),this.popover=null}make(){this.nodes.wrapper=R.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.wrapper.setAttribute("data-cy","inline-toolbar"),R.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}async open(){var e;if(this.opened)return;this.opened=!0,this.popover!==null&&this.popover.destroy(),this.createToolsInstances();const t=await this.getPopoverItems();this.popover=new Xf({items:t,scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:je.ui(ze.ui.popover,"Nothing found"),search:je.ui(ze.ui.popover,"Filter")}}),this.move(this.popover.size.width),(e=this.nodes.wrapper)==null||e.append(this.popover.getElement()),this.popover.show()}move(e){const t=G.rect,o=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),r={x:t.x-o.x,y:t.y+t.height-o.top+this.toolbarVerticalMargin};r.x+e+o.x>this.Editor.UI.contentRect.right&&(r.x=this.Editor.UI.contentRect.right-e-o.x),this.nodes.wrapper.style.left=Math.floor(r.x)+"px",this.nodes.wrapper.style.top=Math.floor(r.y)+"px"}reset(){this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=["IMG","INPUT"],t=G.get(),o=G.text;if(!t||!t.anchorNode||t.isCollapsed||o.length<1)return!1;const r=R.isElement(t.anchorNode)?t.anchorNode:t.anchorNode.parentElement;if(r===null||t!==null&&e.includes(r.tagName))return!1;const s=this.Editor.BlockManager.getBlock(t.anchorNode);return!s||this.getTools().some(i=>s.tool.inlineTools.has(i.name))===!1?!1:r.closest("[contenteditable]")!==null}getTools(){const e=this.Editor.BlockManager.currentBlock;return e?Array.from(e.tool.inlineTools.values()).filter(t=>!(this.Editor.ReadOnly.isEnabled&&t.isReadOnlySupported!==!0)):[]}createToolsInstances(){this.tools=new Map,this.getTools().forEach(e=>{const t=e.create();this.tools.set(e,t)})}async getPopoverItems(){const e=[];let t=0;for(const[o,r]of this.tools){const s=await r.render(),i=this.getToolShortcut(o.name);if(i!==void 0)try{this.enableShortcuts(o.name,i)}catch{}const a=i!==void 0?Mr(i):void 0,l=je.t(ze.toolNames,o.title||Xo(o.name));[s].flat().forEach(h=>{var d,p;const f={name:o.name,onActivate:()=>{this.toolClicked(r)},hint:{title:l,description:a}};if(R.isElement(h)){const v={...f,element:h,type:Ee.Html};if(xe(r.renderActions)){const u=r.renderActions();v.children={isOpen:(d=r.checkState)==null?void 0:d.call(r,G.get()),isFlippable:!1,items:[{type:Ee.Html,element:u}]}}else(p=r.checkState)==null||p.call(r,G.get());e.push(v)}else if(h.type===Ee.Html)e.push({...f,...h,type:Ee.Html});else if(h.type===Ee.Separator)e.push({type:Ee.Separator});else{const v={...f,...h,type:Ee.Default};"children"in v&&t!==0&&e.push({type:Ee.Separator}),e.push(v),"children"in v&&t<this.tools.size-1&&e.push({type:Ee.Separator})}}),t++}return e}getToolShortcut(e){const{Tools:t}=this.Editor,o=t.inlineTools.get(e),r=t.internal.inlineTools;return Array.from(r.keys()).includes(e)?this.inlineTools[e][Tl.Shortcut]:o==null?void 0:o.shortcut}enableShortcuts(e,t){oo.add({name:t,handler:o=>{var r;const{currentBlock:s}=this.Editor.BlockManager;s&&s.tool.enabledInlineTools&&(o.preventDefault(),(r=this.popover)==null||r.activateItemByName(e))},on:document})}toolClicked(e){var t;const o=G.range;(t=e.surround)==null||t.call(e,o),this.checkToolsState()}checkToolsState(){var e;(e=this.tools)==null||e.forEach(t=>{var o;(o=t.checkState)==null||o.call(t,G.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([t,o])=>{e[t]=o.create()}),e}}function Bl(){const n=window.getSelection();if(n===null)return[null,0];let e=n.focusNode,t=n.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],t=e.textContent.length)),[e,t])}function Il(n,e,t,o){const r=document.createRange();o==="left"?(r.setStart(n,0),r.setEnd(e,t)):(r.setStart(e,t),r.setEnd(n,n.childNodes.length));const s=r.cloneContents(),i=document.createElement("div");i.appendChild(s);const a=i.textContent||"";return Qp(a)}function Vo(n){const e=R.getDeepestNode(n);if(e===null||R.isEmpty(n))return!0;if(R.isNativeInput(e))return e.selectionEnd===0;if(R.isEmpty(n))return!0;const[t,o]=Bl();return t===null?!1:Il(n,t,o,"left")}function qo(n){const e=R.getDeepestNode(n,!0);if(e===null)return!0;if(R.isNativeInput(e))return e.selectionEnd===e.value.length;const[t,o]=Bl();return t===null?!1:Il(n,t,o,"right")}var Al={},Hr={},bn={},Ht={},zr={},Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.allInputsSelector=hg;function hg(){var n=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+n.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.allInputsSelector=void 0;var e=Vr;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(zr);var zt={},qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.isNativeInput=pg;function pg(n){var e=["INPUT","TEXTAREA"];return n&&n.tagName?e.includes(n.tagName):!1}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNativeInput=void 0;var e=qr;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(zt);var Ol={},Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.append=fg;function fg(n,e){Array.isArray(e)?e.forEach(function(t){n.appendChild(t)}):n.appendChild(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.append=void 0;var e=Qr;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return e.append}})})(Ol);var Wr={},Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.blockElements=gg;function gg(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.blockElements=void 0;var e=Gr;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(Wr);var Pl={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.calculateBaseline=mg;function mg(n){var e=window.getComputedStyle(n),t=parseFloat(e.fontSize),o=parseFloat(e.lineHeight)||t*1.2,r=parseFloat(e.paddingTop),s=parseFloat(e.borderTopWidth),i=parseFloat(e.marginTop),a=t*.8,l=(o-t)/2,h=i+s+r+l+a;return h}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateBaseline=void 0;var e=Kr;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(Pl);var Ml={},Yr={},Zr={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.isContentEditable=vg;function vg(n){return n.contentEditable==="true"}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isContentEditable=void 0;var e=Xr;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(Zr);Object.defineProperty(Yr,"__esModule",{value:!0});Yr.canSetCaret=wg;var bg=zt,yg=Zr;function wg(n){var e=!0;if((0,bg.isNativeInput)(n))switch(n.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,yg.isContentEditable)(n);return e}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.canSetCaret=void 0;var e=Yr;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(Ml);var yn={},Jr={};function kg(n,e,t){const o=t.value!==void 0?"value":"get",r=t[o],s=`#${e}Cache`;if(t[o]=function(...i){return this[s]===void 0&&(this[s]=r.apply(this,i)),this[s]},o==="get"&&t.set){const i=t.set;t.set=function(a){delete n[s],i.apply(this,a)}}return t}function Ll(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e!==void 0&&(n[e]=!0),n}function es(n){return n!=null&&n!==""&&(typeof n!="object"||Object.keys(n).length>0)}function Eg(n){return!es(n)}const xg=()=>typeof window<"u"&&window.navigator!==null&&es(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Sg(n){const e=Ll();return n=n.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e.mac?n=n.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function Cg(n){return n[0].toUpperCase()+n.slice(1)}function _g(n){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=n,document.body.appendChild(e);const t=window.getSelection(),o=document.createRange();if(o.selectNode(e),t===null)throw new Error("Cannot copy text to clipboard");t.removeAllRanges(),t.addRange(o),document.execCommand("copy"),document.body.removeChild(e)}function Tg(n,e,t){let o;return(...r)=>{const s=this,i=()=>{o=void 0,t!==!0&&n.apply(s,r)},a=t===!0&&o!==void 0;window.clearTimeout(o),o=window.setTimeout(i,e),a&&n.apply(s,r)}}function Ct(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Bg(n){return Ct(n)==="boolean"}function Rl(n){return Ct(n)==="function"||Ct(n)==="asyncfunction"}function Ig(n){return Rl(n)&&/^\s*class\s+/.test(n.toString())}function Ag(n){return Ct(n)==="number"}function Qo(n){return Ct(n)==="object"}function Og(n){return Promise.resolve(n)===n}function Pg(n){return Ct(n)==="string"}function Mg(n){return Ct(n)==="undefined"}function ur(n,...e){if(!e.length)return n;const t=e.shift();if(Qo(n)&&Qo(t))for(const o in t)Qo(t[o])?(n[o]===void 0&&Object.assign(n,{[o]:{}}),ur(n[o],t[o])):Object.assign(n,{[o]:t[o]});return ur(n,...e)}function Lg(n,e,t){const o=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;n&&console.warn(o)}function Rg(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function Ng(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}const Dg={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},$g={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};let jg=class{constructor(){this.completed=Promise.resolve()}add(n){return new Promise((e,t)=>{this.completed=this.completed.then(n).then(e).catch(t)})}};function Fg(n,e,t=void 0){let o,r,s,i=null,a=0;t||(t={});const l=function(){a=t.leading===!1?0:Date.now(),i=null,s=n.apply(o,r),i===null&&(o=r=null)};return function(){const h=Date.now();!a&&t.leading===!1&&(a=h);const d=e-(h-a);return o=this,r=arguments,d<=0||d>e?(i&&(clearTimeout(i),i=null),a=h,s=n.apply(o,r),i===null&&(o=r=null)):!i&&t.trailing!==!1&&(i=setTimeout(l,d)),s}}const Ug=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:jg,beautifyShortcut:Sg,cacheable:kg,capitalize:Cg,copyTextToClipboard:_g,debounce:Tg,deepMerge:ur,deprecationAssert:Lg,getUserOS:Ll,getValidUrl:Rg,isBoolean:Bg,isClass:Ig,isEmpty:Eg,isFunction:Rl,isIosDevice:xg,isNumber:Ag,isObject:Qo,isPrintableKey:Ng,isPromise:Og,isString:Pg,isUndefined:Mg,keyCodes:Dg,mouseButtons:$g,notEmpty:es,throttle:Fg,typeOf:Ct},Symbol.toStringTag,{value:"Module"})),ts=Pp(Ug);Object.defineProperty(Jr,"__esModule",{value:!0});Jr.containsOnlyInlineElements=Vg;var Hg=ts,zg=Wr;function Vg(n){var e;(0,Hg.isString)(n)?(e=document.createElement("div"),e.innerHTML=n):e=n;var t=function(o){return!(0,zg.blockElements)().includes(o.tagName.toLowerCase())&&Array.from(o.children).every(t)};return Array.from(e.children).every(t)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.containsOnlyInlineElements=void 0;var e=Jr;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(yn);var Nl={},os={},wn={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.make=qg;function qg(n,e,t){var o;e===void 0&&(e=null),t===void 0&&(t={});var r=document.createElement(n);if(Array.isArray(e)){var s=e.filter(function(a){return a!==void 0});(o=r.classList).add.apply(o,s)}else e!==null&&r.classList.add(e);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.make=void 0;var e=ns;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return e.make}})})(wn);Object.defineProperty(os,"__esModule",{value:!0});os.fragmentToString=Wg;var Qg=wn;function Wg(n){var e=(0,Qg.make)("div");return e.appendChild(n),e.innerHTML}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fragmentToString=void 0;var e=os;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(Nl);var Dl={},rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.getContentLength=Kg;var Gg=zt;function Kg(n){var e,t;return(0,Gg.isNativeInput)(n)?n.value.length:n.nodeType===Node.TEXT_NODE?n.length:(t=(e=n.textContent)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContentLength=void 0;var e=rs;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(Dl);var ss={},is={},Ti=_o&&_o.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var o=0,r=e.length,s;o<r;o++)(s||!(o in e))&&(s||(s=Array.prototype.slice.call(e,0,o)),s[o]=e[o]);return n.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(is,"__esModule",{value:!0});is.getDeepestBlockElements=$l;var Yg=yn;function $l(n){return(0,Yg.containsOnlyInlineElements)(n)?[n]:Array.from(n.children).reduce(function(e,t){return Ti(Ti([],e,!0),$l(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestBlockElements=void 0;var e=is;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(ss);var jl={},as={},kn={},ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.isLineBreakTag=Zg;function Zg(n){return["BR","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLineBreakTag=void 0;var e=ls;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(kn);var En={},cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.isSingleTag=Xg;function Xg(n){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSingleTag=void 0;var e=cs;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(En);Object.defineProperty(as,"__esModule",{value:!0});as.getDeepestNode=Fl;var Jg=zt,em=kn,tm=En;function Fl(n,e){e===void 0&&(e=!1);var t=e?"lastChild":"firstChild",o=e?"previousSibling":"nextSibling";if(n.nodeType===Node.ELEMENT_NODE&&n[t]){var r=n[t];if((0,tm.isSingleTag)(r)&&!(0,Jg.isNativeInput)(r)&&!(0,em.isLineBreakTag)(r))if(r[o])r=r[o];else if(r.parentNode!==null&&r.parentNode[o])r=r.parentNode[o];else return r.parentNode;return Fl(r,e)}return n}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestNode=void 0;var e=as;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(jl);var Ul={},us={},No=_o&&_o.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var o=0,r=e.length,s;o<r;o++)(s||!(o in e))&&(s||(s=Array.prototype.slice.call(e,0,o)),s[o]=e[o]);return n.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(us,"__esModule",{value:!0});us.findAllInputs=im;var om=yn,nm=ss,rm=zr,sm=zt;function im(n){return Array.from(n.querySelectorAll((0,rm.allInputsSelector)())).reduce(function(e,t){return(0,sm.isNativeInput)(t)||(0,om.containsOnlyInlineElements)(t)?No(No([],e,!0),[t],!1):No(No([],e,!0),(0,nm.getDeepestBlockElements)(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.findAllInputs=void 0;var e=us;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(Ul);var Hl={},ds={};Object.defineProperty(ds,"__esModule",{value:!0});ds.isCollapsedWhitespaces=am;function am(n){return!/[^\t\n\r ]/.test(n)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCollapsedWhitespaces=void 0;var e=ds;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(Hl);var hs={},ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.isElement=cm;var lm=ts;function cm(n){return(0,lm.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.ELEMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isElement=void 0;var e=ps;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(hs);var zl={},fs={},gs={},ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.isLeaf=um;function um(n){return n===null?!1:n.childNodes.length===0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLeaf=void 0;var e=ms;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(gs);var vs={},bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.isNodeEmpty=gm;var dm=kn,hm=hs,pm=zt,fm=En;function gm(n,e){var t="";return(0,fm.isSingleTag)(n)&&!(0,dm.isLineBreakTag)(n)?!1:((0,hm.isElement)(n)&&(0,pm.isNativeInput)(n)?t=n.value:n.textContent!==null&&(t=n.textContent.replace("​","")),e!==void 0&&(t=t.replace(new RegExp(e,"g"),"")),t.trim().length===0)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeEmpty=void 0;var e=bs;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(vs);Object.defineProperty(fs,"__esModule",{value:!0});fs.isEmpty=bm;var mm=gs,vm=vs;function bm(n,e){n.normalize();for(var t=[n];t.length>0;){var o=t.shift();if(o){if(n=o,(0,mm.isLeaf)(n)&&!(0,vm.isNodeEmpty)(n,e))return!1;t.push.apply(t,Array.from(n.childNodes))}}return!0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEmpty=void 0;var e=fs;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(zl);var Vl={},ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.isFragment=wm;var ym=ts;function wm(n){return(0,ym.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFragment=void 0;var e=ys;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(Vl);var ql={},ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.isHTMLString=Em;var km=wn;function Em(n){var e=(0,km.make)("div");return e.innerHTML=n,e.childElementCount>0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHTMLString=void 0;var e=ws;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(ql);var Ql={},ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.offset=xm;function xm(n){var e=n.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,r=e.top+o,s=e.left+t;return{top:r,left:s,bottom:r+e.height,right:s+e.width}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.offset=void 0;var e=ks;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return e.offset}})})(Ql);var Wl={},Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.prepend=Sm;function Sm(n,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(t){return n.prepend(t)})):n.prepend(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=void 0;var e=Es;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(Wl);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=n.offset=n.make=n.isLineBreakTag=n.isSingleTag=n.isNodeEmpty=n.isLeaf=n.isHTMLString=n.isFragment=n.isEmpty=n.isElement=n.isContentEditable=n.isCollapsedWhitespaces=n.findAllInputs=n.isNativeInput=n.allInputsSelector=n.getDeepestNode=n.getDeepestBlockElements=n.getContentLength=n.fragmentToString=n.containsOnlyInlineElements=n.canSetCaret=n.calculateBaseline=n.blockElements=n.append=void 0;var e=zr;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var t=zt;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}});var o=Ol;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return o.append}});var r=Wr;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return r.blockElements}});var s=Pl;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return s.calculateBaseline}});var i=Ml;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return i.canSetCaret}});var a=yn;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return a.containsOnlyInlineElements}});var l=Nl;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return l.fragmentToString}});var h=Dl;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return h.getContentLength}});var d=ss;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return d.getDeepestBlockElements}});var p=jl;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return p.getDeepestNode}});var f=Ul;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return f.findAllInputs}});var v=Hl;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return v.isCollapsedWhitespaces}});var u=Zr;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return u.isContentEditable}});var g=hs;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return g.isElement}});var w=zl;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return w.isEmpty}});var E=Vl;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return E.isFragment}});var x=ql;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return x.isHTMLString}});var S=gs;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return S.isLeaf}});var O=vs;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return O.isNodeEmpty}});var M=kn;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return M.isLineBreakTag}});var C=En;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return C.isSingleTag}});var B=wn;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return B.make}});var A=Ql;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return A.offset}});var k=Wl;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return k.prepend}})})(Ht);var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.getContenteditableSlice=_m;var Cm=Ht;function _m(n,e,t,o,r){var s;r===void 0&&(r=!1);var i=document.createRange();if(o==="left"?(i.setStart(n,0),i.setEnd(e,t)):(i.setStart(e,t),i.setEnd(n,n.childNodes.length)),r===!0){var a=i.extractContents();return(0,Cm.fragmentToString)(a)}var l=i.cloneContents(),h=document.createElement("div");h.appendChild(l);var d=(s=h.textContent)!==null&&s!==void 0?s:"";return d}Object.defineProperty(bn,"__esModule",{value:!0});bn.checkContenteditableSliceForEmptiness=Im;var Tm=Ht,Bm=xn;function Im(n,e,t,o){var r=(0,Bm.getContenteditableSlice)(n,e,t,o);return(0,Tm.isCollapsedWhitespaces)(r)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkContenteditableSliceForEmptiness=void 0;var e=bn;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(Hr);var Gl={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContenteditableSlice=void 0;var e=xn;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(Gl);var Kl={},xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.focus=Om;var Am=Ht;function Om(n,e){var t,o;if(e===void 0&&(e=!0),(0,Am.isNativeInput)(n)){n.focus();var r=e?0:n.value.length;n.setSelectionRange(r,r)}else{var s=document.createRange(),i=window.getSelection();if(!i)return;var a=function(f){var v=document.createTextNode("");f.appendChild(v),s.setStart(v,0),s.setEnd(v,0)},l=function(f){return f!=null},h=n.childNodes,d=e?h[0]:h[h.length-1];if(l(d)){for(;l(d)&&d.nodeType!==Node.TEXT_NODE;)d=e?d.firstChild:d.lastChild;if(l(d)&&d.nodeType===Node.TEXT_NODE){var p=(o=(t=d.textContent)===null||t===void 0?void 0:t.length)!==null&&o!==void 0?o:0,r=e?0:p;s.setStart(d,r),s.setEnd(d,r)}else a(n)}else a(n);i.removeAllRanges(),i.addRange(s)}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.focus=void 0;var e=xs;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return e.focus}})})(Kl);var Ss={},Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.getCaretNodeAndOffset=Pm;function Pm(){var n=window.getSelection();if(n===null)return[null,0];var e=n.focusNode,t=n.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]!==void 0?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],e.textContent!==null&&(t=e.textContent.length))),[e,t])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaretNodeAndOffset=void 0;var e=Sn;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(Ss);var Yl={},Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.getRange=Mm;function Mm(){var n=window.getSelection();return n&&n.rangeCount?n.getRangeAt(0):null}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRange=void 0;var e=Cn;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(Yl);var Zl={},Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.isCaretAtEndOfInput=Nm;var Bi=Ht,Lm=Ss,Rm=Hr;function Nm(n){var e=(0,Bi.getDeepestNode)(n,!0);if(e===null)return!0;if((0,Bi.isNativeInput)(e))return e.selectionEnd===e.value.length;var t=(0,Lm.getCaretNodeAndOffset)(),o=t[0],r=t[1];return o===null?!1:(0,Rm.checkContenteditableSliceForEmptiness)(n,o,r,"right")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtEndOfInput=void 0;var e=Cs;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(Zl);var Xl={},_s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.isCaretAtStartOfInput=jm;var Do=Ht,Dm=Sn,$m=bn;function jm(n){var e=(0,Do.getDeepestNode)(n);if(e===null||(0,Do.isEmpty)(n))return!0;if((0,Do.isNativeInput)(e))return e.selectionEnd===0;if((0,Do.isEmpty)(n))return!0;var t=(0,Dm.getCaretNodeAndOffset)(),o=t[0],r=t[1];return o===null?!1:(0,$m.checkContenteditableSliceForEmptiness)(n,o,r,"left")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtStartOfInput=void 0;var e=_s;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(Xl);var Jl={},Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.save=Hm;var Fm=Ht,Um=Cn;function Hm(){var n=(0,Um.getRange)(),e=(0,Fm.make)("span");if(e.id="cursor",e.hidden=!0,!!n)return n.insertNode(e),function(){var t=window.getSelection();t&&(n.setStartAfter(e),n.setEndAfter(e),t.removeAllRanges(),t.addRange(n),setTimeout(function(){e.remove()},150))}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=void 0;var e=Ts;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return e.save}})})(Jl);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=n.isCaretAtStartOfInput=n.isCaretAtEndOfInput=n.getRange=n.getCaretNodeAndOffset=n.focus=n.getContenteditableSlice=n.checkContenteditableSliceForEmptiness=void 0;var e=Hr;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var t=Gl;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}});var o=Kl;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return o.focus}});var r=Ss;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return r.getCaretNodeAndOffset}});var s=Yl;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return s.getRange}});var i=Zl;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return i.isCaretAtEndOfInput}});var a=Xl;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return a.isCaretAtStartOfInput}});var l=Jl;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return l.save}})})(Al);class zm extends ce{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case re.BACKSPACE:this.backspace(e);break;case re.DELETE:this.delete(e);break;case re.ENTER:this.enter(e);break;case re.DOWN:case re.RIGHT:this.arrowRightAndDown(e);break;case re.UP:case re.LEFT:this.arrowLeftAndUp(e);break;case re.TAB:this.tabPressed(e);break}e.key==="/"&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(e),e.code==="Slash"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&Ja(e.keyCode)&&(this.Editor.Toolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!0}dragLeave(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:o,Caret:r}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then(()=>{const s=o.removeSelectedBlocks(),i=o.insertDefaultBlockAtIndex(s,!0);r.setToBlock(i,r.positions.START),t.clearSelection(e)})}tabPressed(e){const{InlineToolbar:t,Caret:o}=this.Editor;t.opened||(e.shiftKey?o.navigatePrevious(!0):o.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(e){this.Editor.BlockManager.currentBlock.isEmpty&&(e.preventDefault(),this.Editor.Caret.insertContentAtCaretPosition("/"),this.activateToolbox())}enter(e){const{BlockManager:t,UI:o}=this.Editor,r=t.currentBlock;if(r===void 0||r.tool.isLineBreaksEnabled||o.someToolbarOpened&&o.someFlipperButtonFocused||e.shiftKey&&!ir)return;let s=r;r.currentInput!==void 0&&Vo(r.currentInput)&&!r.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):r.currentInput&&qo(r.currentInput)?s=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):s=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(s),this.Editor.Toolbar.moveAndOpen(s),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:o}=this.Editor,{currentBlock:r,previousBlock:s}=t;if(!(r===void 0||!G.isCollapsed||!r.currentInput||!Vo(r.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),r.currentInput!==r.firstInput){o.navigatePrevious();return}if(s!==null){if(s.isEmpty){t.removeBlock(s);return}if(r.isEmpty){t.removeBlock(r);const i=t.currentBlock;o.setToBlock(i,o.positions.END);return}Ei(s,r)?this.mergeBlocks(s,r):o.setToBlock(s,o.positions.END)}}}delete(e){const{BlockManager:t,Caret:o}=this.Editor,{currentBlock:r,nextBlock:s}=t;if(!(!G.isCollapsed||!qo(r.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),r.currentInput!==r.lastInput){o.navigateNext();return}if(s!==null){if(s.isEmpty){t.removeBlock(s);return}if(r.isEmpty){t.removeBlock(r),o.setToBlock(s,o.positions.START);return}Ei(r,s)?this.mergeBlocks(r,s):o.setToBlock(s,o.positions.START)}}}mergeBlocks(e,t){const{BlockManager:o,Toolbar:r}=this.Editor;e.lastInput!==void 0&&(Al.focus(e.lastInput,!1),o.mergeBlocks(e,t).then(()=>{r.close()}))}arrowRightAndDown(e){const t=$t.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===re.TAB);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.Toolbar.close();const{currentBlock:o}=this.Editor.BlockManager,r=((o==null?void 0:o.currentInput)!==void 0?qo(o.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===re.DOWN&&r){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode===re.DOWN||e.keyCode===re.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}Zo(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if($t.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===re.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const{currentBlock:t}=this.Editor.BlockManager,o=((t==null?void 0:t.currentInput)!==void 0?Vo(t.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===re.UP&&o){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode===re.UP||e.keyCode===re.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}Zo(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const t=e.keyCode===re.ENTER&&this.Editor.Toolbar.toolbox.opened,o=e.keyCode===re.ENTER&&this.Editor.BlockSettings.opened,r=e.keyCode===re.ENTER&&this.Editor.InlineToolbar.opened,s=e.keyCode===re.TAB;return!(e.shiftKey||s||t||o||r)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class Vn{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return el(this.workingArea.children)}static set(e,t,o){return isNaN(Number(t))?(Reflect.set(e,t,o),!0):(e.insert(+t,o),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const o=this.blocks[t];R.swap(this.blocks[e].holder,o.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=o}move(e,t){const o=this.blocks.splice(t,1)[0],r=e-1,s=Math.max(0,r),i=this.blocks[s];e>0?this.insertToDOM(o,"afterend",i):this.insertToDOM(o,"beforebegin",i),this.blocks.splice(e,0,o);const a=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});o.call(ft.MOVED,a)}insert(e,t,o=!1){if(!this.length){this.push(t);return}e>this.length&&(e=this.length),o&&(this.blocks[e].holder.remove(),this.blocks[e].call(ft.REMOVED));const r=o?1:0;if(this.blocks.splice(e,r,t),e>0){const s=this.blocks[e-1];this.insertToDOM(t,"afterend",s)}else{const s=this.blocks[e+1];s?this.insertToDOM(t,"beforebegin",s):this.insertToDOM(t)}}replace(e,t){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const o=new DocumentFragment;for(const r of e)o.appendChild(r.holder);if(this.length>0){if(t>0){const r=Math.min(t-1,this.length-1);this.blocks[r].holder.after(o)}else t===0&&this.workingArea.prepend(o);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(o);e.forEach(r=>r.call(ft.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(ft.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(ft.REMOVED)),this.blocks.length=0}insertAfter(e,t){const o=this.blocks.indexOf(e);this.insert(o+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,o){t?o.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(ft.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}}const Ii="block-removed",Ai="block-added",Vm="block-moved",Oi="block-changed";class qm{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,o)=>{this.completed=this.completed.then(e).then(t).catch(o)})}}class Qm extends ce{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new Vn(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:Vn.set,get:Vn.get}),this.listeners.on(document,"copy",t=>this.Editor.BlockEvents.handleCommandC(t))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:o=void 0,tunes:r={}}){const s=this.Editor.ReadOnly.isEnabled,i=this.Editor.Tools.blockTools.get(e),a=new Me({id:o,data:t,tool:i,api:this.Editor.API,readOnly:s,tunesData:r},this.eventsDispatcher);return s||window.requestIdleCallback(()=>{this.bindBlockEvents(a)},{timeout:2e3}),a}insert({id:e=void 0,tool:t=this.config.defaultBlock,data:o={},index:r,needToFocus:s=!0,replace:i=!1,tunes:a={}}={}){let l=r;l===void 0&&(l=this.currentBlockIndex+(i?0:1));const h=this.composeBlock({id:e,tool:t,data:o,tunes:a});return i&&this.blockDidMutated(Ii,this.getBlockByIndex(l),{index:l}),this._blocks.insert(l,h,i),this.blockDidMutated(Ai,h,{index:l}),s?this.currentBlockIndex=l:l<=this.currentBlockIndex&&this.currentBlockIndex++,h}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t,o){if(!t&&!o)return e;const r=await e.data,s=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},r,t??{}),tunes:o??e.tunes}),i=this.getBlockIndex(e);return this._blocks.replace(i,s),this.blockDidMutated(Oi,s,{index:i}),s}replace(e,t,o){const r=this.getBlockIndex(e);return this.insert({tool:t,data:o,index:r,replace:!0})}paste(e,t,o=!1){const r=this.insert({tool:e,replace:o});try{window.requestIdleCallback(()=>{r.call(ft.ON_PASTE,t)})}catch(s){pe(`${e}: onPaste callback call is failed`,"error",s)}return r}insertDefaultBlockAtIndex(e,t=!1){const o=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=o,this.blockDidMutated(Ai,o,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,o}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){let o;if(e.name===t.name&&e.mergeable){const r=await t.data;if(Ye(r)){console.error("Could not merge Block. Failed to extract original Block data.");return}const[s]=Rr([r],e.tool.sanitizeConfig);o=s}else if(e.mergeable&&Jo(t,"export")&&Jo(e,"import")){const r=await t.exportDataAsString(),s=st(r,e.tool.sanitizeConfig);o=xi(s,e.tool.conversionConfig)}o!==void 0&&(await e.mergeWith(o),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e))}removeBlock(e,t=!0){return new Promise(o=>{const r=this._blocks.indexOf(e);if(!this.validateIndex(r))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(r),this.blockDidMutated(Ii,e,{index:r}),this.currentBlockIndex>=r&&this.currentBlockIndex--,this.blocks.length?r===0&&(this.currentBlockIndex=0):(this.unsetCurrentBlock(),t&&this.insert()),o()})}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.unsetCurrentBlock(),this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=R.make("div");t.appendChild(e);const o={text:R.isEmpty(t)?"":t.innerHTML};return this.insert({data:o})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(t=>t.id===e)}getBlock(e){R.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,o=e.closest(`.${Me.CSS.wrapper}`),r=t.indexOf(o);if(r>=0)return this._blocks[r]}setCurrentBlockByChildNode(e){R.isElement(e)||(e=e.parentNode);const t=e.closest(`.${Me.CSS.wrapper}`);if(!t)return;const o=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(o!=null&&o.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;R.isElement(e)||(e=e.parentNode);const t=e.closest(`.${Me.CSS.wrapper}`);return this.blocks.find(o=>o.holder===t)}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){if(isNaN(e)||isNaN(t)){pe("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(t)){pe("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated(Vm,this.currentBlock,{fromIndex:t,toIndex:e})}async convert(e,t,o){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const r=this.Editor.Tools.blockTools.get(t);if(!r)throw new Error(`Could not convert Block. Tool «${t}» not found.`);const s=await e.exportDataAsString(),i=st(s,r.sanitizeConfig);let a=xi(i,r.conversionConfig,r.settings);return o&&(a=Object.assign(a,o)),this.replace(e,r.name,a)}unsetCurrentBlock(){this.currentBlockIndex=-1}async clear(e=!1){const t=new qm;this.blocks.forEach(o=>{t.add(async()=>{await this.removeBlock(o,!1)})}),await t.completed,this.unsetCurrentBlock(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",o=>{t.keydown(o)}),this.readOnlyMutableListeners.on(e.holder,"keyup",o=>{t.keyup(o)}),this.readOnlyMutableListeners.on(e.holder,"dragover",o=>{t.dragOver(o)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",o=>{t.dragLeave(o)}),e.on("didMutated",o=>this.blockDidMutated(Oi,o,{index:this.getBlockIndex(o)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,o){const r=new CustomEvent(e,{detail:{target:new ht(t),...o}});return this.eventsDispatcher.emit(il,{event:r}),t}}class Wm extends ce{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(t=>t.selected===!0)}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach(o=>{o.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(t=>t.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new G,oo.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:o}=this.Editor;if(o.isEnabled){e.preventDefault(),this.selectAllBlocks();return}t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){G.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let o;isNaN(e)?o=t.currentBlock:o=t.getBlockByIndex(e),o.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:o,Caret:r,RectangleSelection:s}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const i=e&&e instanceof KeyboardEvent,a=i&&Ja(e.keyCode);if(this.anyBlockSelected&&i&&a&&!G.isSelectionExists){const l=o.removeSelectedBlocks();o.insertDefaultBlockAtIndex(l,!0),r.setToBlock(o.currentBlock),Zo(()=>{const h=e.key;r.insertContentAtCaretPosition(h.length>1?"":h)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||s.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}t&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const t=R.make("div");this.selectedBlocks.forEach(s=>{const i=st(s.holder.innerHTML,this.sanitizerConfig),a=R.make("p");a.innerHTML=i,t.appendChild(a)});const o=Array.from(t.childNodes).map(s=>s.textContent).join(`

`),r=t.innerHTML;return e.clipboardData.setData("text/plain",o),e.clipboardData.setData("text/html",r),Promise.all(this.selectedBlocks.map(s=>s.save())).then(s=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(s))}catch{}})}selectBlockByIndex(e){const{BlockManager:t}=this.Editor,o=t.getBlockByIndex(e);o!==void 0&&this.selectBlock(o)}selectBlock(e){this.selection.save(),G.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){oo.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),R.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const t=this.Editor.BlockManager.getBlock(e.target),o=t.inputs;if(o.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(o.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(t),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),G.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}class rn extends ce{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}setToBlock(e,t=this.positions.DEFAULT,o=0){var r;const{BlockManager:s,BlockSelection:i}=this.Editor;if(i.clearSelection(),!e.focusable){(r=window.getSelection())==null||r.removeAllRanges(),i.selectBlock(e),s.currentBlock=e;return}let a;switch(t){case this.positions.START:a=e.firstInput;break;case this.positions.END:a=e.lastInput;break;default:a=e.currentInput}if(!a)return;const l=R.getDeepestNode(a,t===this.positions.END),h=R.getContentLength(l);switch(!0){case t===this.positions.START:o=0;break;case t===this.positions.END:case o>h:o=h;break}this.set(l,o),s.setCurrentBlockByChildNode(e.holder),s.currentBlock.currentInput=a}setToInput(e,t=this.positions.DEFAULT,o=0){const{currentBlock:r}=this.Editor.BlockManager,s=R.getDeepestNode(e);switch(t){case this.positions.START:this.set(s,0);break;case this.positions.END:this.set(s,R.getContentLength(s));break;default:o&&this.set(s,o)}r.currentInput=e}set(e,t=0){const{top:o,bottom:r}=G.setCursor(e,t),{innerHeight:s}=window;o<0?window.scrollBy(0,o-30):r>s&&window.scrollBy(0,r-s+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const t=this.Editor.BlockManager.insertAtEnd();this.setToBlock(t)}}extractFragmentFromCaretPosition(){const e=G.get();if(e.rangeCount){const t=e.getRangeAt(0),o=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),o)if(R.isNativeInput(o)){const r=o,s=document.createDocumentFragment(),i=r.value.substring(0,r.selectionStart),a=r.value.substring(r.selectionStart);return s.textContent=a,r.value=i,s}else{const r=t.cloneRange();return r.selectNodeContents(o),r.setStart(t.endContainer,t.endOffset),r.extractContents()}}}navigateNext(e=!1){const{BlockManager:t}=this.Editor,{currentBlock:o,nextBlock:r}=t;if(o===void 0)return!1;const{nextInput:s,currentInput:i}=o,a=i!==void 0?qo(i):void 0;let l=r;const h=e||a||!o.focusable;if(s&&h)return this.setToInput(s,this.positions.START),!0;if(l===null){if(o.tool.isDefault||!h)return!1;l=t.insertAtEnd()}return h?(this.setToBlock(l,this.positions.START),!0):!1}navigatePrevious(e=!1){const{currentBlock:t,previousBlock:o}=this.Editor.BlockManager;if(!t)return!1;const{previousInput:r,currentInput:s}=t,i=s!==void 0?Vo(s):void 0,a=e||i||!t.focusable;return r&&a?(this.setToInput(r,this.positions.END),!0):o!==null&&a?(this.setToBlock(o,this.positions.END),!0):!1}createShadow(e){const t=document.createElement("span");t.classList.add(rn.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${rn.CSS.shadowCaret}`);if(!t)return;new G().expandToTag(t);const o=document.createRange();o.selectNode(t),o.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),o=document.createElement("div"),r=G.get(),s=G.range;o.innerHTML=e,Array.from(o.childNodes).forEach(h=>t.appendChild(h)),t.childNodes.length===0&&t.appendChild(new Text);const i=t.lastChild;s.deleteContents(),s.insertNode(t);const a=document.createRange(),l=i.nodeType===Node.TEXT_NODE?i:i.firstChild;l!==null&&l.textContent!==null&&a.setStart(l,l.textContent.length),r.removeAllRanges(),r.addRange(a)}}class Gm extends ce{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:o}=this.Editor;if(e.relatedTarget===null&&e.target===null)return;const r=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,s=t.getBlockByChildNode(e.target);if(!(!r||!s)&&s!==r){if(r===this.firstSelectedBlock){G.get().removeAllRanges(),r.selected=!0,s.selected=!0,o.clearCache();return}if(s===this.firstSelectedBlock){r.selected=!1,s.selected=!1,o.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(r,s),this.lastSelectedBlock=s}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==Lp.LEFT)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock&&this.firstSelectedBlock!==this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:o}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,o.clearCache(),G.get().removeAllRanges());const r=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),s=t.blocks[r];s&&(this.lastSelectedBlock.selected!==s.selected?(s.selected=!0,o.clearCache()):(this.lastSelectedBlock.selected=!1,o.clearCache()),this.lastSelectedBlock=s,this.Editor.InlineToolbar.close(),s.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:o,Caret:r}=this.Editor,s=t.blocks.indexOf(this.firstSelectedBlock),i=t.blocks.indexOf(this.lastSelectedBlock);if(o.anyBlockSelected&&s>-1&&i>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case re.DOWN:case re.RIGHT:r.setToBlock(t.blocks[Math.max(s,i)],r.positions.END);break;case re.UP:case re.LEFT:r.setToBlock(t.blocks[Math.min(s,i)],r.positions.START);break;default:r.setToBlock(t.blocks[Math.max(s,i)],r.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;G.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:o,BlockSelection:r}=this.Editor,s=o.blocks.indexOf(e),i=o.blocks.indexOf(t),a=e.selected!==t.selected;for(let l=Math.min(s,i);l<=Math.max(s,i);l++){const h=o.blocks[l];h!==this.firstSelectedBlock&&h!==(a?e:t)&&(o.blocks[l].selected=!o.blocks[l].selected,r.clearCache())}}}class Km extends ce{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async t=>{await this.processDrop(t)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",t=>{this.processDragOver(t)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Paste:o,Caret:r}=this.Editor;e.preventDefault(),t.blocks.forEach(i=>{i.dropTarget=!1}),G.isAtEditor&&!G.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const s=t.setCurrentBlockByChildNode(e.target);if(s)this.Editor.Caret.setToBlock(s,r.positions.END);else{const i=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(i,r.positions.END)}await o.processDataTransfer(e.dataTransfer,!0)}processDragStart(){G.isAtEditor&&!G.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}const Ym=180,Zm=400;class Xm extends ce{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=Zm,this.mutationObserver=new MutationObserver(o=>{this.redactorChanged(o)}),this.eventsDispatcher.on(il,o=>{this.particularBlockChanged(o.event)}),this.eventsDispatcher.on(al,()=>{this.disable()}),this.eventsDispatcher.on(ll,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!xe(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let t;this.batchingOnChangeQueue.size===1?t=this.batchingOnChangeQueue.values().next().value:t=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,t),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(ar,{mutations:e})}}const ec=class tc extends ce{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const t=e.create({},{},!1);if(e.pasteConfig===!1){this.exceptionList.push(e.name);return}if(!xe(t.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(t){pe(`Paste handling for «${e.name}» Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async e=>{const{BlockManager:t,Toolbar:o}=this.Editor,r=t.setCurrentBlockByChildNode(e.target);!r||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||r&&this.exceptionList.includes(r.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),o.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,t=!1){const{Tools:o}=this.Editor,r=e.types;if((r.includes?r.includes("Files"):r.contains("Files"))&&!Ye(this.toolsFiles)){await this.processFiles(e.files);return}const s=e.getData(this.MIME_TYPE),i=e.getData("text/plain");let a=e.getData("text/html");if(s)try{this.insertEditorJSData(JSON.parse(s));return}catch{}t&&i.trim()&&a.trim()&&(a="<p>"+(a.trim()?a:i)+"</p>");const l=Object.keys(this.toolsTags).reduce((p,f)=>(p[f.toLowerCase()]=this.toolsTags[f].sanitizationConfig??{},p),{}),h=Object.assign({},l,o.getAllInlineToolsSanitizeConfig(),{br:{}}),d=st(a,h);!d.trim()||d.trim()===i||!R.isHTMLString(d)?await this.processText(i):await this.processText(d,!0)}async processText(e,t=!1){const{Caret:o,BlockManager:r}=this.Editor,s=t?this.processHTML(e):this.processPlain(e);if(!s.length)return;if(s.length===1){s[0].isBlock?this.processSingleBlock(s.pop()):this.processInlinePaste(s.pop());return}const i=r.currentBlock&&r.currentBlock.tool.isDefault&&r.currentBlock.isEmpty;s.map(async(a,l)=>this.insertBlock(a,l===0&&i)),r.currentBlock&&o.setToBlock(r.currentBlock,o.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return gt(e)?[e]:Le(e)?Object.keys(e):[]}getTagsConfig(e){if(e.pasteConfig===!1)return;const t=e.pasteConfig.tags||[],o=[];t.forEach(r=>{const s=this.collectTagNames(r);o.push(...s),s.forEach(i=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,i)){pe(`Paste handler for «${e.name}» Tool on «${i}» tag is skipped because it is already used by «${this.toolsTags[i].tool.name}» Tool.`,"warn");return}const a=Le(r)?r[i]:null;this.toolsTags[i.toUpperCase()]={tool:e,sanitizationConfig:a}})}),this.tagsByTool[e.name]=o.map(r=>r.toUpperCase())}getFilesConfig(e){if(e.pasteConfig===!1)return;const{files:t={}}=e.pasteConfig;let{extensions:o,mimeTypes:r}=t;!o&&!r||(o&&!Array.isArray(o)&&(pe(`«extensions» property of the onDrop config for «${e.name}» Tool should be an array`),o=[]),r&&!Array.isArray(r)&&(pe(`«mimeTypes» property of the onDrop config for «${e.name}» Tool should be an array`),r=[]),r&&(r=r.filter(s=>jp(s)?!0:(pe(`MIME type value «${s}» for the «${e.name}» Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[e.name]={extensions:o||[],mimeTypes:r||[]})}getPatternsConfig(e){e.pasteConfig===!1||!e.pasteConfig.patterns||Ye(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach(([t,o])=>{o instanceof RegExp||pe(`Pattern ${o} for «${e.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:o,tool:e})})}isNativeBehaviour(e){return R.isNativeInput(e)}async processFiles(e){const{BlockManager:t}=this.Editor;let o;o=await Promise.all(Array.from(e).map(s=>this.processFile(s))),o=o.filter(s=>!!s);const r=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;o.forEach((s,i)=>{t.paste(s.type,s.event,i===0&&r)})}async processFile(e){const t=$p(e),o=Object.entries(this.toolsFiles).find(([s,{mimeTypes:i,extensions:a}])=>{const[l,h]=e.type.split("/"),d=a.find(f=>f.toLowerCase()===t.toLowerCase()),p=i.find(f=>{const[v,u]=f.split("/");return v===l&&(u===h||u==="*")});return!!d||!!p});if(!o)return;const[r]=o;return{event:this.composePasteEvent("file",{file:e}),type:r}}processHTML(e){const{Tools:t}=this.Editor,o=R.make("DIV");return o.innerHTML=e,this.getNodes(o).map(r=>{let s,i=t.defaultTool,a=!1;switch(r.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:s=R.make("div"),s.appendChild(r);break;case Node.ELEMENT_NODE:s=r,a=!0,this.toolsTags[s.tagName]&&(i=this.toolsTags[s.tagName].tool);break}const{tags:l}=i.pasteConfig||{tags:[]},h=l.reduce((f,v)=>(this.collectTagNames(v).forEach(u=>{const g=Le(v)?v[u]:null;f[u.toLowerCase()]=g||{}}),f),{}),d=Object.assign({},h,i.baseSanitizeConfig);if(s.tagName.toLowerCase()==="table"){const f=st(s.outerHTML,d);s=R.make("div",void 0,{innerHTML:f}).firstChild}else s.innerHTML=st(s.innerHTML,d);const p=this.composePasteEvent("tag",{data:s});return{content:s,isBlock:a,tool:i.name,event:p}}).filter(r=>{const s=R.isEmpty(r.content),i=R.isSingleTag(r.content);return!s||i})}processPlain(e){const{defaultBlock:t}=this.config;if(!e)return[];const o=t;return e.split(/\r?\n/).filter(r=>r.trim()).map(r=>{const s=R.make("div");s.textContent=r;const i=this.composePasteEvent("tag",{data:s});return{content:s,tool:o,isBlock:!1,event:i}})}async processSingleBlock(e){const{Caret:t,BlockManager:o}=this.Editor,{currentBlock:r}=o;if(!r||e.tool!==r.name||!R.containsOnlyInlineElements(e.content.innerHTML)){this.insertBlock(e,(r==null?void 0:r.tool.isDefault)&&r.isEmpty);return}t.insertContentAtCaretPosition(e.content.innerHTML)}async processInlinePaste(e){const{BlockManager:t,Caret:o}=this.Editor,{content:r}=e;if(t.currentBlock&&t.currentBlock.tool.isDefault&&r.textContent.length<tc.PATTERN_PROCESSING_MAX_LENGTH){const s=await this.processPattern(r.textContent);if(s){const i=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty,a=t.paste(s.tool,s.event,i);o.setToBlock(a,o.positions.END);return}}if(t.currentBlock&&t.currentBlock.currentInput){const s=t.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,st(r.innerHTML,s))}else this.insertBlock(e)}async processPattern(e){const t=this.toolsPatterns.find(o=>{const r=o.pattern.exec(e);return r?e===r.shift():!1});return t?{event:this.composePasteEvent("pattern",{key:t.key,data:e}),tool:t.tool.name}:void 0}insertBlock(e,t=!1){const{BlockManager:o,Caret:r}=this.Editor,{currentBlock:s}=o;let i;if(t&&s&&s.isEmpty){i=o.paste(e.tool,e.event,!0),r.setToBlock(i,r.positions.END);return}i=o.paste(e.tool,e.event),r.setToBlock(i,r.positions.END)}insertEditorJSData(e){const{BlockManager:t,Caret:o,Tools:r}=this.Editor;Rr(e,s=>r.blockTools.get(s).sanitizeConfig).forEach(({tool:s,data:i},a)=>{let l=!1;a===0&&(l=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const h=t.insert({tool:s,data:i,replace:l});o.setToBlock(h,o.positions.END)})}processElementNode(e,t,o){const r=Object.keys(this.toolsTags),s=e,{tool:i}=this.toolsTags[s.tagName]||{},a=this.tagsByTool[i==null?void 0:i.name]||[],l=r.includes(s.tagName),h=R.blockElements.includes(s.tagName.toLowerCase()),d=Array.from(s.children).some(({tagName:f})=>r.includes(f)&&!a.includes(f)),p=Array.from(s.children).some(({tagName:f})=>R.blockElements.includes(f.toLowerCase()));if(!h&&!l&&!d)return o.appendChild(s),[...t,o];if(l&&!d||h&&!p&&!d)return[...t,o,s]}getNodes(e){const t=Array.from(e.childNodes);let o;const r=(s,i)=>{if(R.isEmpty(i)&&!R.isSingleTag(i))return s;const a=s[s.length-1];let l=new DocumentFragment;switch(a&&R.isFragment(a)&&(l=s.pop()),i.nodeType){case Node.ELEMENT_NODE:if(o=this.processElementNode(i,s,l),o)return o;break;case Node.TEXT_NODE:return l.appendChild(i),[...s,l];default:return[...s,l]}return[...s,...Array.from(i.childNodes).reduce(r,[])]};return t.reduce(r,[])}composePasteEvent(e,t){return new CustomEvent(e,{detail:t})}};ec.PATTERN_PROCESSING_MAX_LENGTH=450;let Jm=ec;class e0 extends ce{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,o=[];Array.from(t.entries()).forEach(([r,s])=>{s.isReadOnlySupported||o.push(r)}),this.toolsDontSupportReadOnly=o,this.config.readOnly&&o.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly,!0)}async toggle(e=!this.readOnlyEnabled,t=!1){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const o=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const s in this.Editor)this.Editor[s].toggleReadOnly&&this.Editor[s].toggleReadOnly(e);if(o===e)return this.readOnlyEnabled;if(t)return this.readOnlyEnabled;this.Editor.ModificationsObserver.disable();const r=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(r.blocks),this.Editor.ModificationsObserver.enable(),this.readOnlyEnabled}throwCriticalError(){throw new sl(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}class wo extends ce{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const o=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);o.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const r=[`.${Me.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],s=o.closest("."+this.Editor.UI.CSS.editorWrapper),i=r.some(a=>!!o.closest(a));!s||i||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",t=>{this.processMouseDown(t)},!1),this.listeners.on(document.body,"mousemove",nr(t=>{this.processMouseMove(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",nr(t=>{this.processScroll(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(R.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),o=R.make("div",wo.CSS.overlay,{}),r=R.make("div",wo.CSS.overlayContainer,{}),s=R.make("div",wo.CSS.rect,{});return r.appendChild(s),o.appendChild(r),t.appendChild(o),this.overlayRectangle=s,{container:t,overlay:o}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:o,index:r}=this.genInfoForMouseSelection(),s=this.startX>t&&this.mouseX>t,i=this.startX<o&&this.mouseX<o;this.rectCrossesBlocks=!(s||i),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),r!==void 0&&(this.trySelectNextBlock(r),this.inverseSelection(),G.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(t);if(!this.rectCrossesBlocks&&e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(t)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,o=document.elementFromPoint(e,t),r=this.Editor.BlockManager.getBlockByChildNode(o);let s;r!==void 0&&(s=this.Editor.BlockManager.blocks.findIndex(d=>d.holder===r.holder));const i=this.Editor.BlockManager.lastBlock.holder.querySelector("."+Me.CSS.content),a=Number.parseInt(window.getComputedStyle(i).width,10)/2,l=e-a,h=e+a;return{index:s,leftPos:l,rightPos:h}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,o=this.stackOfSelected.length,r=1,s=-1,i=0;if(t)return;const a=this.stackOfSelected[o-1]-this.stackOfSelected[o-2]>0;let l=i;o>1&&(l=a?r:s);const h=e>this.stackOfSelected[o-1]&&l===r,d=e<this.stackOfSelected[o-1]&&l===s,p=!(h||d||l===i);if(!p&&(e>this.stackOfSelected[o-1]||this.stackOfSelected[o-1]===void 0)){let u=this.stackOfSelected[o-1]+1||e;for(u;u<=e;u++)this.addBlockInSelection(u);return}if(!p&&e<this.stackOfSelected[o-1]){for(let u=this.stackOfSelected[o-1]-1;u>=e;u--)this.addBlockInSelection(u);return}if(!p)return;let f=o-1,v;for(e>this.stackOfSelected[o-1]?v=()=>e>this.stackOfSelected[f]:v=()=>e<this.stackOfSelected[f];v();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[f]),this.stackOfSelected.pop(),f--}}class t0 extends ce{async render(e){return new Promise(t=>{const{Tools:o,BlockManager:r}=this.Editor;if(e.length===0)r.insert();else{const s=e.map(({type:i,data:a,tunes:l,id:h})=>{o.available.has(i)===!1&&(Ke(`Tool «${i}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),a=this.composeStubDataForTool(i,a,h),i=o.stubTool);let d;try{d=r.composeBlock({id:h,tool:i,data:a,tunes:l})}catch(p){pe(`Block «${i}» skipped because of plugins error`,"error",{data:a,error:p}),a=this.composeStubDataForTool(i,a,h),i=o.stubTool,d=r.composeBlock({id:h,tool:i,data:a,tunes:l})}return d});r.insertMany(s)}window.requestIdleCallback(()=>{t()},{timeout:2e3})})}composeStubDataForTool(e,t,o){const{Tools:r}=this.Editor;let s=e;if(r.unavailable.has(e)){const i=r.unavailable.get(e).toolbox;i!==void 0&&i[0].title!==void 0&&(s=i[0].title)}return{savedData:{id:o,type:e,data:t},title:s}}}class o0 extends ce{async save(){const{BlockManager:e,Tools:t}=this.Editor,o=e.blocks,r=[];try{o.forEach(a=>{r.push(this.getSavedData(a))});const s=await Promise.all(r),i=await Rr(s,a=>t.blockTools.get(a).sanitizeConfig);return this.makeOutput(i)}catch(s){Ke("Saving failed due to the Error %o","error",s)}}async getSavedData(e){const t=await e.save(),o=t&&await e.validate(t.data);return{...t,isValid:o}}makeOutput(e){const t=[];return e.forEach(({id:o,tool:r,data:s,tunes:i,isValid:a})=>{if(!a){pe(`Block «${r}» skipped because saved data is invalid`);return}if(r===this.Editor.Tools.stubTool){t.push(s);return}const l={id:o,type:r,data:s,...!Ye(i)&&{tunes:i}};t.push(l)}),{time:+new Date,blocks:t,version:"2.31.0-rc.7"}}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const n0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function r0(n){const e=document.createElement("div");e.innerHTML=n.trim();const t=document.createDocumentFragment();return t.append(...Array.from(e.childNodes)),t}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class Bs{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:o,readOnly:r}){this.api=o,this.readOnly=r,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:Bs.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete"||!this._element)return;const{textContent:t}=this._element;t===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=r0(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame(()=>{this._element&&(this._element.innerHTML=this._data.text||"")})}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:n0,title:"Text"}}}class Is{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:Pf,name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}}Is.isInline=!0;Is.title="Bold";class As{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=jf,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}As.isInline=!0;As.title="Italic";class Os{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new G}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Si,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const t=this.selection.findParentTag("A");if(t){this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=zf,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value=t!=="null"?t:"",this.selection.save()}else this.nodes.button.innerHTML=Si,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const t=new G;t.save(),this.selection.restore(),this.selection.removeFakeBackground(),t.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";if(!t.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(t)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),pe("Incorrect Link pasted","warn",t);return}t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),o=e.substring(0,1)==="#",r=/^\/\/[^/\s]/.test(e);return!t&&!o&&!r&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}Os.isInline=!0;Os.title="Link";class oc{constructor({api:e}){this.i18nAPI=e.i18n,this.blocksAPI=e.blocks,this.selectionAPI=e.selection,this.toolsAPI=e.tools,this.caretAPI=e.caret}async render(){const e=G.get(),t=this.blocksAPI.getBlockByElement(e.anchorNode);if(t===void 0)return[];const o=this.toolsAPI.getBlockTools(),r=await ul(t,o);if(r.length===0)return[];const s=r.reduce((h,d)=>{var p;return(p=d.toolbox)==null||p.forEach(f=>{h.push({icon:f.icon,title:je.t(ze.toolNames,f.title),name:d.name,closeOnActivate:!0,onActivate:async()=>{const v=await this.blocksAPI.convert(t.id,d.name,f.data);this.caretAPI.setToBlock(v,"end")}})}),h},[]),i=await t.getActiveToolboxEntry(),a=i!==void 0?i.icon:ml,l=!ao();return{icon:a,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:l,items:s,onOpen:()=>{l&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{l&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}}oc.isInline=!0;class nc{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=R.make("div",this.CSS.wrapper),t=Vf,o=R.make("div",this.CSS.info),r=R.make("div",this.CSS.title,{textContent:this.title}),s=R.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=t,o.appendChild(r),o.appendChild(s),e.appendChild(o),e}}nc.isReadOnlySupported=!0;class s0 extends Ur{constructor(){super(...arguments),this.type=Lt.Inline}get title(){return this.constructable[nn.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[nn.IsReadOnlySupported]??!1}}class i0 extends Ur{constructor(){super(...arguments),this.type=Lt.Tune}create(e,t){return new this.constructable({api:this.api,config:this.settings,block:t,data:e})}}class De extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isBlock());return new De(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInline());return new De(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,t])=>t.isTune());return new De(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInternal);return new De(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,t])=>!t.isInternal);return new De(e)}}var a0=Object.defineProperty,l0=Object.getOwnPropertyDescriptor,rc=(n,e,t,o)=>{for(var r=l0(e,t),s=n.length-1,i;s>=0;s--)(i=n[s])&&(r=i(e,t,r)||r);return r&&a0(e,t,r),r};class Ps extends Ur{constructor(){super(...arguments),this.type=Lt.Block,this.inlineTools=new De,this.tunes=new De}create(e,t,o){return new this.constructable({data:e,block:t,readOnly:o,api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[Wt.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[Wt.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[Wt.Toolbox],t=this.config[zo.Toolbox];if(!Ye(e)&&t!==!1)return t?Array.isArray(e)?Array.isArray(t)?t.map((o,r)=>{const s=e[r];return s?{...s,...o}:o}):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[Wt.ConversionConfig]}get enabledInlineTools(){return this.config[zo.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[zo.EnabledBlockTunes]}get pasteConfig(){return this.constructable[Wt.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(Ye(e))return t;const o={};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];Le(s)?o[r]=Object.assign({},t,s):o[r]=s}return o}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),Array.from(this.tunes.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),e}}rc([io],Ps.prototype,"sanitizeConfig");rc([io],Ps.prototype,"baseSanitizeConfig");class c0{constructor(e,t,o){this.api=o,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:o=!1,...r}=this.config[e],s=this.getConstructor(t),i=t[cr.IsTune];return new s({name:e,constructable:t,config:r,api:this.api.getMethodsForTool(e,i),isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:o})}getConstructor(e){switch(!0){case e[nn.IsInline]:return s0;case e[cr.IsTune]:return i0;default:return Ps}}}class sc{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:Mf,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const o=t.holder,r=o.getBoundingClientRect();let s=Math.abs(window.innerHeight-o.offsetHeight);r.top<window.innerHeight&&(s=window.scrollY+o.offsetHeight),window.scrollTo(0,s),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}sc.isTune=!0;class ic{constructor({api:e}){this.api=e}render(){return{icon:Df,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}ic.isTune=!0;class ac{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:Nf,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),o=this.api.blocks.getBlockByIndex(e-1);if(e===0||!t||!o)throw new Error("Unable to move Block up since it is already the first");const r=t.holder,s=o.holder,i=r.getBoundingClientRect(),a=s.getBoundingClientRect();let l;a.top>0?l=Math.abs(i.top)-Math.abs(a.top):l=Math.abs(i.top)+a.height,window.scrollBy(0,-1*l),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}ac.isTune=!0;var u0=Object.defineProperty,d0=Object.getOwnPropertyDescriptor,h0=(n,e,t,o)=>{for(var r=d0(e,t),s=n.length-1,i;s>=0;s--)(i=n[s])&&(r=i(e,t,r)||r);return r&&u0(e,t,r),r};class lc extends ce{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new De,this.toolsUnavailable=new De}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=rr({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new c0(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(t.length===0)return Promise.resolve();await Dp(t,o=>{this.toolPrepareMethodSuccess(o)},o=>{this.toolPrepareMethodFallback(o)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>{Object.assign(e,t.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{xe(e.reset)&&await e.reset()})}get internalTools(){return{convertTo:{class:oc,isInternal:!0},link:{class:Os,isInternal:!0},bold:{class:Is,isInternal:!0},italic:{class:As,isInternal:!0},paragraph:{class:Bs,inlineToolbar:!0,isInternal:!0},stub:{class:nc,isInternal:!0},moveUp:{class:ac,isInternal:!0},delete:{class:ic,isInternal:!0},moveDown:{class:sc,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const o=["render"].filter(r=>!t.create()[r]);if(o.length){pe(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",o),this.toolsUnavailable.set(t.name,t);return}}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach(([o,r])=>{t.push({function:xe(r.class.prepare)?r.class.prepare:()=>{},data:{toolName:o,config:r.config}})}),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new De(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(t=>[t,this.inlineTools.get(t)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new De(["convertTo",...e.enabledInlineTools].map(t=>[t,this.inlineTools.get(t)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const t=new De(e.enabledBlockTunes.map(o=>[o,this.blockTunes.get(o)]));e.tunes=new De([...t,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const t=new De(this.config.tunes.map(o=>[o,this.blockTunes.get(o)]));e.tunes=new De([...t,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!xe(t)&&!xe(t.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const t in this.config.tools)Le(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}}h0([io],lc.prototype,"getAllInlineToolsSanitizeConfig");const p0=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;--color-background-icon-active: rgba(56, 138, 229, .1);--color-text-icon-active: #388AE5;--color-text-primary: black;position:absolute;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3;opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{color:var(--color-text-primary);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;border-radius:4px;line-height:normal;height:100%;padding:0;width:28px;background-color:transparent;cursor:pointer}@media (max-width: 650px){.ce-inline-tool{width:36px;height:36px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#f8f8f8}}.ce-inline-tool svg{display:block;width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:4px 8px;font-size:14px;line-height:22px;outline:none;margin:0;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-inline-tool--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #EFF0F1;--color-shadow: rgba(13, 20, 33, .1);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #F8F8F8;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;--popover-top: calc(100% + var(--offset-from-target));--popover-left: 0;--nested-popover-overlap: 4px;--icon-size: 20px;--item-padding: 3px;--item-height: calc(var(--icon-size) + 2 * var(--item-padding))}.ce-popover__container{min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0px 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:var(--popover-left);top:var(--popover-top);background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened>.ce-popover__container{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened>.ce-popover__container{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover--open-top .ce-popover__container{--popover-top: calc(-1 * (var(--offset-from-target) + var(--popover-height)))}.ce-popover--open-left .ce-popover__container{--popover-left: calc(-1 * var(--width) + 100%)}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}@media (max-width: 650px){.ce-popover .ce-popover__container{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__search{margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover--nested .ce-popover__container{--popover-left: calc(var(--nesting-level) * (var(--width) - var(--nested-popover-overlap)));top:calc(var(--trigger-item-top) - var(--nested-popover-overlap));position:absolute}.ce-popover--open-top.ce-popover--nested .ce-popover__container{top:calc(var(--trigger-item-top) - var(--popover-height) + var(--item-height) + var(--offset-from-target) + var(--nested-popover-overlap))}.ce-popover--open-left .ce-popover--nested .ce-popover__container{--popover-left: calc(-1 * (var(--nesting-level) + 1) * var(--width) + 100%)}.ce-popover-item-separator{padding:4px 3px}.ce-popover-item-separator--hidden{display:none}.ce-popover-item-separator__line{height:1px;background:var(--color-border);width:100%}.ce-popover-item-html--hidden{display:none}.ce-popover-item{--border-radius: 6px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--item-padding);color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;background:transparent}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover-item__icon--tool{margin-right:4px}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-right:auto}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title,.ce-popover-item--confirmation .ce-popover-item__icon{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}.ce-popover-header{margin-bottom:8px;margin-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover-header__text{font-size:18px;font-weight:600}.ce-popover-header__back-button{border:0;background:transparent;width:36px;height:36px;color:var(--color-text-primary)}.ce-popover-header__back-button svg{display:block;width:28px;height:28px}.ce-popover--inline{--height: 38px;--height-mobile: 46px;--container-padding: 4px;position:relative}.ce-popover--inline .ce-popover__custom-content{margin-bottom:0}.ce-popover--inline .ce-popover__items{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-popover--inline .ce-popover__container{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:var(--container-padding);height:var(--height);top:0;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-animation:none;animation:none}@media (max-width: 650px){.ce-popover--inline .ce-popover__container{height:var(--height-mobile);position:absolute}}.ce-popover--inline .ce-popover-item-separator{padding:0 4px}.ce-popover--inline .ce-popover-item-separator__line{height:100%;width:1px}.ce-popover--inline .ce-popover-item{border-radius:4px;padding:4px}.ce-popover--inline .ce-popover-item__icon--tool{-webkit-box-shadow:none;box-shadow:none;background:transparent;margin-right:0}.ce-popover--inline .ce-popover-item__icon{width:auto;width:initial;height:auto;height:initial}.ce-popover--inline .ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover--inline .ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover--inline .ce-popover-item:not(:last-of-type){margin-bottom:0;margin-bottom:initial}.ce-popover--inline .ce-popover-item-html{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover--inline .ce-popover-item__icon--chevron-right{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{--offset: 3px;left:0;top:calc(var(--height) + var(--offset))}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{top:calc(var(--height-mobile) + var(--offset))}}.ce-popover--inline .ce-popover--nested .ce-popover__container{min-width:var(--width);width:var(--width);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:6px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ce-popover--inline .ce-popover--nested .ce-popover__items{display:block;width:100%}.ce-popover--inline .ce-popover--nested .ce-popover-item{border-radius:6px;padding:3px}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested .ce-popover-item{padding:4px}}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon--tool{margin-right:4px}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon{width:26px;height:26px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator{padding:4px 3px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator__line{width:100%;height:1px}.codex-editor [data-placeholder]:empty:before,.codex-editor [data-placeholder][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text;content:attr(data-placeholder)}.codex-editor [data-placeholder-active]:empty:before,.codex-editor [data-placeholder-active][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text}.codex-editor [data-placeholder-active]:empty:focus:before,.codex-editor [data-placeholder-active][data-empty=true]:focus:before{content:attr(data-placeholder-active)}
`;class f0 extends ce{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=null,this.resizeDebouncer=ki(()=>{this.windowResize()},200),this.selectionChangeDebounced=ki(()=>{this.selectionChanged()},Ym),this.documentTouchedListener=e=>{this.documentTouched(e)}}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache!==null)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${Me.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.setIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.unbindReadOnlySensitiveListeners():window.requestIdleCallback(()=>{this.bindReadOnlySensitiveListeners()},{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:o}=this.Editor;return!!(t.opened||o.opened||e.toolbox.opened)}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,t])=>t.flipper instanceof $t).some(([e,t])=>t.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML="",this.unbindReadOnlyInsensitiveListeners()}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:o}=this.Editor;t.close(),o.close(),e.toolbox.close()}setIsMobile(){const e=window.innerWidth<tl;e!==this.isMobile&&this.eventsDispatcher.emit(To,{isEnabled:this.isMobile}),this.isMobile=e}make(){this.nodes.holder=R.getHolder(this.config.holder),this.nodes.wrapper=R.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=R.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper),this.bindReadOnlyInsensitiveListeners()}loadStyles(){const e="editor-js-styles";if(R.get(e))return;const t=R.make("style",null,{id:e,textContent:p0.toString()});this.config.style&&!Ye(this.config.style)&&this.config.style.nonce&&t.setAttribute("nonce",this.config.style.nonce),R.prepend(document.head,t)}bindReadOnlyInsensitiveListeners(){this.listeners.on(document,"selectionchange",this.selectionChangeDebounced),this.listeners.on(window,"resize",this.resizeDebouncer,{passive:!0}),this.listeners.on(this.nodes.redactor,"mousedown",this.documentTouchedListener,{capture:!0,passive:!0}),this.listeners.on(this.nodes.redactor,"touchstart",this.documentTouchedListener,{capture:!0,passive:!0})}unbindReadOnlyInsensitiveListeners(){this.listeners.off(document,"selectionchange",this.selectionChangeDebounced),this.listeners.off(window,"resize",this.resizeDebouncer),this.listeners.off(this.nodes.redactor,"mousedown",this.documentTouchedListener),this.listeners.off(this.nodes.redactor,"touchstart",this.documentTouchedListener)}bindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0),this.watchBlockHoveredEvents(),this.enableInputsEmptyMark()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",nr(t=>{const o=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||o&&e!==o&&(e=o,this.eventsDispatcher.emit(_l,{block:this.Editor.BlockManager.getBlockByChildNode(o)}))},20),{passive:!0})}unbindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.setIsMobile()}documentKeydown(e){switch(e.keyCode){case re.ENTER:this.enterPressed(e);break;case re.BACKSPACE:case re.DELETE:this.backspacePressed(e);break;case re.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,o=e.target.closest(`.${this.CSS.editorWrapper}`),r=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(t!==void 0&&o===null){this.Editor.BlockEvents.keydown(e);return}o||t&&r||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:t,BlockSelection:o,Caret:r}=this.Editor;if(o.anyBlockSelected&&!G.isSelectionExists){const s=t.removeSelectedBlocks(),i=t.insertDefaultBlockAtIndex(s,!0);r.setToBlock(i,r.positions.START),o.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:o}=this.Editor;if(this.someToolbarOpened)return;const r=t.currentBlockIndex>=0;if(o.anyBlockSelected&&!G.isSelectionExists){o.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&r&&e.target.tagName==="BODY"){const s=this.Editor.BlockManager.insert();e.preventDefault(),this.Editor.Caret.setToBlock(s),this.Editor.Toolbar.moveAndOpen(s)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var t,o;if(!e.isTrusted)return;const r=e.target;this.nodes.holder.contains(r)||G.isAtEditor||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close());const s=(t=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:t.contains(r),i=(o=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:o.contains(r),a=s||i;if(this.Editor.BlockSettings.opened&&!a){this.Editor.BlockSettings.close();const l=this.Editor.BlockManager.getBlockByChildNode(r);this.Editor.Toolbar.moveAndOpen(l)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const o=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,r=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(o,r)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.ReadOnly.isEnabled||this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!G.isCollapsed)return;const t=e.target,o=e.metaKey||e.ctrlKey;if(R.isAnchor(t)&&o){e.stopImmediatePropagation(),e.stopPropagation();const r=t.getAttribute("href"),s=Up(r);zp(s);return}this.processBottomZoneClick(e)}processBottomZoneClick(e){const t=this.Editor.BlockManager.getBlockByIndex(-1),o=R.offset(t.holder).bottom,r=e.pageY,{BlockSelection:s}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!s.anyBlockSelected&&o<r){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:i,Caret:a,Toolbar:l}=this.Editor;(!i.lastBlock.tool.isDefault||!i.lastBlock.isEmpty)&&i.insertAtEnd(),a.setToTheLastBlock(),l.moveAndOpen(i.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,o=G.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&G.get().removeAllRanges(),!o){G.range||this.Editor.InlineToolbar.close();return}const r=o.closest(`.${Me.CSS.content}`);(r===null||r.closest(`.${G.CSS.editorWrapper}`)!==this.nodes.wrapper)&&(this.Editor.InlineToolbar.containsNode(o)||this.Editor.InlineToolbar.close(),o.dataset.inlineToolbar!=="true")||(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(o),this.Editor.InlineToolbar.tryToShow(!0))}enableInputsEmptyMark(){function e(t){const o=t.target;ol(o)}this.readOnlyMutableListeners.on(this.nodes.wrapper,"input",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusin",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusout",e)}}const g0={BlocksAPI:ef,CaretAPI:of,EventsAPI:nf,I18nAPI:Lr,API:rf,InlineToolbarAPI:sf,ListenersAPI:af,NotifierAPI:df,ReadOnlyAPI:hf,SanitizerAPI:yf,SaverAPI:wf,SelectionAPI:kf,ToolsAPI:Ef,StylesAPI:xf,ToolbarAPI:Sf,TooltipAPI:If,UiAPI:Af,BlockSettings:og,Toolbar:ug,InlineToolbar:dg,BlockEvents:zm,BlockManager:Qm,BlockSelection:Wm,Caret:rn,CrossBlockSelection:Gm,DragNDrop:Km,ModificationsObserver:Xm,Paste:Jm,ReadOnly:e0,RectangleSelection:wo,Renderer:t0,Saver:o0,Tools:lc,UI:f0};class m0{constructor(e){this.moduleInstances={},this.eventsDispatcher=new Oo;let t,o;this.isReady=new Promise((r,s)=>{t=r,o=s}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:r,Caret:s,UI:i,ModificationsObserver:a}=this.moduleInstances;i.checkEmptiness(),a.enable(),this.configuration.autofocus===!0&&this.configuration.readOnly!==!0&&s.setToBlock(r.blocks[0],s.positions.START),t()}).catch(r=>{pe(`Editor.js is not ready because of ${r}`,"error"),o(r)})}set configuration(e){var t,o;Le(e)?this.config={...e}:this.config={holder:e},sr(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=Xa.VERBOSE),Rp(this.config.logLevel),sr(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const r={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(Ye(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[r]}),this.config.readOnly=this.config.readOnly||!1,(t=this.config.i18n)!=null&&t.messages&&je.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((o=this.config.i18n)==null?void 0:o.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("«holderId» and «holder» param can't assign at the same time.");if(gt(t)&&!R.get(t))throw Error(`element with ID «${t}» is missing. Pass correct holder's ID.`);if(t&&Le(t)&&!R.isElement(t))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,t)=>e.then(async()=>{try{await this.moduleInstances[t].prepare()}catch(o){if(o instanceof sl)throw new Error(o.message);pe(`Module ${t} was skipped because of %o`,"warn",o)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(g0).forEach(([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(o){pe("[constructModules]",`Module ${e} skipped because`,"error",o)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const o in this.moduleInstances)o!==e&&(t[o]=this.moduleInstances[o]);return t}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class Pi{static get version(){return"2.31.0-rc.7"}constructor(e){let t=()=>{};Le(e)&&xe(e.onReady)&&(t=e.onReady);const o=new m0(e);this.isReady=o.isReady.then(()=>{this.exportAPI(o),t()})}exportAPI(e){const t=["configuration"],o=()=>{Object.values(e.moduleInstances).forEach(r=>{xe(r.destroy)&&r.destroy(),r.listeners.removeAll()}),Bf(),e=null;for(const r in this)Object.prototype.hasOwnProperty.call(this,r)&&delete this[r];Object.setPrototypeOf(this,null)};t.forEach(r=>{this[r]=e[r]}),this.destroy=o,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([r,s])=>{Object.entries(s).forEach(([i,a])=>{this[a]=e.moduleInstances.API.methods[r][i]})})}}const v0={__name:"EditorView",props:{id:Number},setup(n,{expose:e}){e();const t=n,o=fe(""),r=fe("");let s;Ve(async()=>{const l=await pi(t.id),h=l.content!=null?l.content:!1;o.value=l.title,r.value=l.updated_at,s=new Pi({holder:"editor",data:h,autofocus:!0,hideToolbar:!1,placeholder:"Que estas pensando?"})});async function i(){s.save().then(async l=>{const h=JSON.stringify(l),d=await gi(t.id,h);d.status==200&&(r.value=d.updated_at)}).catch(l=>{console.log("Saving failed: ",l)})}const a={props:t,fileName:o,lastUpdate:r,get editor(){return s},set editor(l){s=l},saveNote:i,onMounted:Ve,ref:fe,get EditorJS(){return Pi},get CheckCircleIcon(){return Qu},get PencilSquareIcon(){return Yu},get ClockIcon(){return Wu},get findNotesAction(){return pi},get updateNoteAction(){return gi}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},b0={class:"h-full relative"},y0={class:"border-b pb-5 mb-5 border-slate-500"},w0={class:"flex align-baseline"},k0={class:"text-3xl"},E0={class:"underline text-blue-600"};function x0(n,e,t,o,r,s){return oe(),ae("div",b0,[U("div",y0,[U("div",w0,[U("h1",k0,Et(o.fileName),1),U("button",{class:"text-slate-500 hover:text-slate-200 cursor-pointer inline-block ml-4",onClick:e[0]||(e[0]=i=>o.saveNote())},[Ce(o.CheckCircleIcon,{class:"size-6"})])]),U("p",null,[Ce(o.ClockIcon,{class:"inline-block size-4"}),e[1]||(e[1]=xo()),U("small",E0,Et(o.lastUpdate),1)])]),e[2]||(e[2]=U("div",{id:"editor"},null,-1))])}const S0=Fe(v0,[["render",x0],["__file","/home/marcos/DEV/vue-notes-app/src/components/notes/EditorView.vue"]]),C0={};function _0(n,e){return oe(),ae("div",null,e[0]||(e[0]=[U("h1",{class:"text-4xl"},"Ajustes",-1),U("hr",{class:"w-2/3 my-4"},null,-1),U("div",{class:"p-5"},null,-1)]))}const T0=Fe(C0,[["render",_0],["__file","/home/marcos/DEV/vue-notes-app/src/components/SetupView.vue"]]);class sn{constructor(){this.sql=gn("postgresql://neondb_owner:npg_EsOW9R1whuGy@ep-raspy-tree-a8xdn8ec-pooler.eastus2.azure.neon.tech/neondb?sslmode=require")}async login(e,t){try{const o=await this.sql("select * from users where username = $1 and password = $2;",[e,t]);if(o[0]==null)return Ie().showMessage("Username or Password incorrect","error"),!1;Ie().showMessage(`Hi ${o[0].username} !!`,"create"),localStorage.setItem("username",o[0].username),jt.push("/")}catch(o){return console.log(`Error during login: ${o.message}`),{error:{message:"Error al obtener datos."}}}}async signUp(e,t){try{return await this.sql("insert into users (username,password) values ($1,$2);",[e,t])}catch(o){return console.log(`Error during signUp: ${o}`),{error:{message:"Error al guardar datos"}}}}}const B0={__name:"LoginView",setup(n,{expose:e}){e();const t=new sn,o=Ko(),r=fe(""),s=fe("");async function i(){await t.login(r.value,s.value)}const a={auth:t,router:o,username:r,password:s,login:i,onMounted:Ve,ref:fe,get useRouter(){return Ko},get RouterLink(){return br},get Auth(){return sn},get globalState(){return Ie}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},I0={class:"min-h-screen flex flex-col bg-gray-900"},A0={class:"absolute top-0 right-0 m-4"},O0={class:"min-h-screen flex flex-col items-center justify-center bg-gray-900"},P0={class:"w-full max-w-md p-12 bg-gray-800 rounded-lg shadow-lg"},M0={class:"rounded-md shadow-sm"},L0={class:"mt-6"};function R0(n,e,t,o,r,s){return oe(),ae("div",I0,[U("div",A0,[Ce(o.RouterLink,{to:"/signup",class:"group relative m-5 flex justify-center py-2 px-4 text-sm font-medium rounded-md text-white hover:text-cyan-400 focus:outline-none hover:ring-2 hover:ring-blue-400 transition-colors"},{default:Gt(()=>e[2]||(e[2]=[xo(" Sign Up ")])),_:1})]),U("div",O0,[U("div",P0,[e[6]||(e[6]=U("h1",{class:"text-3xl font-bold text-center text-white"},"Login",-1)),U("form",{onSubmit:Di(o.login,["prevent"]),class:"mt-8 space-y-6"},[U("div",M0,[U("div",null,[e[3]||(e[3]=U("label",{for:"username",class:"sr-only"},"Username",-1)),Ot(U("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.username=i),id:"username",type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-400 text-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Username account"},null,512),[[Pt,o.username]])]),U("div",L0,[e[4]||(e[4]=U("label",{for:"password",class:"sr-only"},"Password",-1)),Ot(U("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>o.password=i),id:"password",type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-400 text-white rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password"},null,512),[[Pt,o.password]])])]),e[5]||(e[5]=mc('<div class="flex items-center justify-between"><div class="flex items-center"><input id="remember-me" type="checkbox" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-600 rounded"><label for="remember-me" class="ml-2 block text-sm text-gray-400"> Remember me </label></div><div class="text-sm"><a href="#" class="font-medium text-indigo-400 hover:text-indigo-300"> Forgot your password? </a></div></div><div><button type="submit" class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 my-2"><span class="absolute left-0 inset-y-0 flex items-center pl-3"><svg class="h-5 w-5 text-indigo-500 group-hover:text-indigo-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path></svg></span> Login </button></div>',2))],32)])])])}const N0=Fe(B0,[["render",R0],["__file","/home/marcos/DEV/vue-notes-app/src/auth/LoginView.vue"]]),D0={__name:"SignUpView",setup(n,{expose:e}){e();const t=Ko(),o=wt({password:{error:!1,message:""}}),r=new sn,s=fe(""),i=fe(""),a=fe(""),h={router:t,data:o,auth:r,username:s,password:i,confirmPassword:a,onSubmit:async d=>{if(i.value!=a.value)return o.password.error=!0,o.password.message="Las contrasenas no coinciden",!1;(await r.signUp(s.value,i.value)).error&&Ie().showMessage("Error al guardar datos","error"),Ie().showMessage("Usuario creado con exito","create"),t.push("/login")},ref:fe,reactive:wt,get Auth(){return sn},get globalState(){return Ie},get useRouter(){return Ko}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}},$0={class:"min-h-screen flex flex-col items-center justify-center bg-gray-900"},j0={class:"w-full max-w-md p-12 bg-gray-800 rounded-lg shadow-lg"},F0={class:"rounded-md shadow-sm"},U0={class:"mt-6"},H0={class:"mt-6"},z0={key:0,class:"text-red-600"};function V0(n,e,t,o,r,s){return oe(),ae("div",$0,[U("div",j0,[e[7]||(e[7]=U("h1",{class:"text-3xl font-bold text-center text-white"},"Sign Up",-1)),U("form",{onSubmit:Di(o.onSubmit,["prevent"]),class:"mt-8 space-y-6"},[U("div",F0,[U("div",null,[e[3]||(e[3]=U("label",{for:"username",class:"sr-only"},"Username",-1)),Ot(U("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.username=i),id:"username",type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-400 text-white rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Document"},null,512),[[Pt,o.username]])]),U("div",U0,[e[4]||(e[4]=U("label",{for:"password",class:"sr-only"},"Password",-1)),Ot(U("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>o.password=i),id:"password",type:"password",required:"",class:Rt(["appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-400 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-600":o.data.password.error}]),placeholder:"Password"},null,2),[[Pt,o.password]])]),U("div",H0,[e[5]||(e[5]=U("label",{for:"confirm-password",class:"sr-only"},"Confirm Password",-1)),Ot(U("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>o.confirmPassword=i),id:"confirm-password",type:"password",required:"",class:Rt(["appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-600 placeholder-gray-400 text-white rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",{"border-red-600":o.data.password.error}]),placeholder:"Confirm Password"},null,2),[[Pt,o.confirmPassword]]),o.data.password.error?(oe(),ae("small",z0,Et(o.data.password.message),1)):Kt("",!0)])]),e[6]||(e[6]=U("div",null,[U("button",{type:"submit",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[U("span",{class:"absolute left-0 inset-y-0 flex items-center pl-3"},[U("svg",{class:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[U("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})])]),xo(" Sign Up ")])],-1))],32)])])}const q0=Fe(D0,[["render",V0],["__file","/home/marcos/DEV/vue-notes-app/src/auth/SignUpView.vue"]]),Q0=[{path:"/login",name:"Login",component:N0,meta:{requiresAuth:!1}},{path:"/signup",name:"Signup",component:q0,meta:{requiresAuth:!1}},{path:"/",name:"notes",component:Op,meta:{requiresAuth:!0}},{path:"/editor/:id",name:"editor",component:S0,props:!0,meta:{requiresAuth:!0}},{path:"/setup",name:"setup",component:T0,meta:{requiresAuth:!0}},{path:"/about",name:"about",component:Zh}],jt=Fu({history:Xc(),routes:Q0});jt.beforeEach(async(n,e)=>{if(n.meta.requiresAuth&&!localStorage.getItem("username"))return{name:"Login"}});const W0=Ih();vc(Gh).use(jt).use(W0).mount("#app");
